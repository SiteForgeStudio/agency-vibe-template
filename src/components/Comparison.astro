---
// src/components/Comparison.astro
const { comparison, intelligence } = Astro.props;

// Defensive check: ensure comparison and comparison.items exist
const items = comparison?.items || [];
const title = comparison?.title || "The Competition";
---

<section id="comparison" class="py-24 px-6 bg-[var(--bg-card)]">
  <div class="max-w-4xl mx-auto">
    <h2 class="text-4xl font-black mb-12 text-center text-[var(--text-primary)]">
      {title}
    </h2>
    
    <div class="overflow-hidden rounded-[var(--radius)] border border-[var(--border)]">
      <table class="w-full text-left border-collapse">
        <thead>
          <tr class="bg-[var(--bg-color)] border-b border-[var(--border)]">
            <th class="p-6 text-[var(--text-secondary)] font-medium">Feature</th>
            <th class="p-6 text-[var(--accent)] font-bold">Our Standard</th>
            <th class="p-6 text-[var(--text-secondary)]">The Others</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-[var(--border)]">
          {items.length > 0 ? items.map((item) => (
            <tr class="hover:bg-[var(--bg-color)] transition-colors">
              <td class="p-6 font-bold text-[var(--text-primary)]">{item.label}</td>
              <td class="p-6 text-[var(--accent)] font-black">{item.us}</td>
              <td class="p-6 text-[var(--text-secondary)]">{item.them}</td>
            </tr>
          )) : (
            <tr>
              <td colspan="3" class="p-6 text-center text-[var(--text-secondary)]">No comparison data provided.</td>
            </tr>
          )}
        </tbody>
      </table>
    </div>
  </div>
</section>