---
import { Image } from 'astro:assets';
const { brand, hero, id } = Astro.props;

// Correct glob
const allImages = import.meta.glob('/src/assets/generated/*/*.{jpg,jpeg,png,webp}', { eager: true });

const heroFileName = `${brand?.slug || id}-hero`;

// Find matching file
const match = Object.entries(allImages).find(([path]) =>
  path.includes(`/generated/${id}/`) &&
  path.includes(heroFileName)
);

// Astro eager glob returns module with .default
const heroImage = match?.[1]?.default;
---

<section id="home" class="relative min-h-[80vh] flex items-center bg-[var(--bg-primary)] overflow-hidden">
  <div class="container mx-auto px-6 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">

    <div>
      <h1 class="text-7xl font-black uppercase tracking-tighter text-[var(--text-primary)] leading-[0.85] mb-6">
        {hero?.headline || brand?.name}
      </h1>

      <p class="text-lg text-[var(--text-secondary)] opacity-80 mb-8 max-w-md">
        {hero?.subtext}
      </p>

      {hero?.cta && (
        <a href="#contact"
           class="inline-block px-10 py-4 bg-[var(--accent)] text-black font-bold uppercase tracking-widest hover:scale-105 transition-transform">
          {hero.cta}
        </a>
      )}
    </div>

    <div class="relative">
      <div class="aspect-[4/5] rounded-2xl overflow-hidden border border-[var(--border)] shadow-2xl">

        {heroImage ? (
          <Image
            src={heroImage}
            alt={brand?.name || "Hero Image"}
            width={1000}
            height={1250}
            class="object-cover w-full h-full"
            loading="eager"
          />
        ) : (
          <div class="w-full h-full bg-[var(--bg-card)] flex items-center justify-center text-[var(--text-secondary)]">
            Image Not Found ({id})
          </div>
        )}

      </div>
    </div>

  </div>
</section>