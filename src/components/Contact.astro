---
/**
 * COMPONENT: Contact
 * Standards: 2026 AI-Ready / Netlify Form Integration
 * Logic: Fully dynamic headlines with automatic last-word accenting.
 */
 const { brand, contact, settings } = Astro.props;

const businessName = brand?.name || "Our Studio";
const email = contact?.email || brand?.email || "";
const phone = contact?.phone || brand?.phone || "";
const handle = brand?.objection_handle || "Ready to start your project?";
const cta_text = settings?.cta_text || "Send Message";

// Dynamic Headline Logic: Splits the headline to color the last word with the accent variable
const rawHeadline = contact?.headline || "Let's Build Something";
const words = rawHeadline.split(' ');
const lastWord = words.pop();
const firstPart = words.join(' ');

// 2026 Standard: Redirect to a custom success page
const successPath = "/success"; 
---

<section id="contact" class="py-24 bg-[var(--bg-color)] border-t border-[var(--border)] scroll-mt-24">
  <div class="container mx-auto px-6">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
      
      {/* Branding Side */}
      <div>
        <h2 class="text-xs font-bold tracking-[0.3em] uppercase text-[var(--accent)] mb-4">Connect</h2>
        
        <h3 class="text-5xl md:text-7xl font-black uppercase tracking-tighter text-[var(--text-primary)] mb-8">
          {firstPart} <span class="text-[var(--accent)]">{lastWord}</span>.
        </h3>

        <p class="text-[var(--text-secondary)] mb-12 max-w-md leading-relaxed opacity-80">
          {handle}
        </p>

        <div class="space-y-8">
          {email && (
            <div class="flex flex-col">
              <span class="text-[10px] uppercase tracking-widest text-[var(--accent)] font-bold mb-1">Email</span>
              <a href={`mailto:${email}`} class="text-xl md:text-2xl font-bold text-[var(--text-primary)] hover:text-[var(--accent)] transition-colors italic break-all">
                {email}
              </a>
            </div>
          )}
          {phone && (
            <div class="flex flex-col">
              <span class="text-[10px] uppercase tracking-widest text-[var(--accent)] font-bold mb-1">Phone</span>

              <a
                href={`tel:+${phone.replace(/[^\d]/g, "")}`}
                class="text-xl md:text-2xl font-bold text-[var(--text-primary)] hover:text-[var(--accent)] transition-colors no-underline"
              >
                {phone}
              </a>
            </div>
          )}
        </div>
      </div>

      {/* Form Side: Netlify Optimized */}
      <div class="p-8 md:p-12 bg-[var(--bg-card)] border border-[var(--border)] rounded-[var(--radius)] relative overflow-hidden shadow-2xl">
        <h4 class="text-2xl font-black uppercase tracking-tighter mb-8 border-b border-[var(--border)] pb-4">
            {businessName} <span class="text-[var(--accent)]">Inquiry</span>
        </h4>
        
        <form 
          name="contact" 
          method="POST" 
          data-netlify="true" 
          action={successPath}
          netlify-honeypot="bot-field"
          class="space-y-4"
        >
          {/* Netlify Hidden Fields */}
          <input type="hidden" name="form-name" value="contact" />
          <p class="hidden">
            <label>Don't fill this out if you're human: <input name="bot-field" /></label>
          </p>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <input type="text" name="name" placeholder="NAME" required class="w-full bg-[var(--bg-color)] border border-[var(--border)] p-4 text-[10px] font-bold uppercase tracking-widest text-[var(--text-primary)] focus:border-[var(--accent)] outline-none transition-colors" />
            <input type="email" name="email" placeholder="EMAIL" required class="w-full bg-[var(--bg-color)] border border-[var(--border)] p-4 text-[10px] font-bold uppercase tracking-widest text-[var(--text-primary)] focus:border-[var(--accent)] outline-none transition-colors" />
          </div>
          
          <textarea name="message" rows="4" placeholder="PROJECT DETAILS" required class="w-full bg-[var(--bg-color)] border border-[var(--border)] p-4 text-[10px] font-bold uppercase tracking-widest text-[var(--text-primary)] focus:border-[var(--accent)] outline-none transition-colors"></textarea>
          
          <button type="submit" class="w-full bg-[var(--accent)] text-black py-5 font-black uppercase tracking-[0.3em] text-[10px] hover:bg-white transition-colors">
            {cta_text}
          </button>
        </form>
      </div>

    </div>
  </div>
</section>