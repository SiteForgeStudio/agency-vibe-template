This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.github/
  workflows/
    build-client.yml
apps/
  intake/
    .vscode/
      extensions.json
      launch.json
    functions/
      api/
        generate.js
        submit.js
    netlify/
      functions/
        generate.mjs
        submit.mjs
    public/
      favicon.ico
      favicon.svg
    src/
      pages/
        index.astro
    .gitignore
    astro.config.mjs
    gen.json
    netlify.toml
    package.json
    payload.json
    README.md
    submit.json
    tsconfig.json
clients/
  biff-buff-detailing/
    business.base.json
    business.updates.json
  testbrand-detailing/
    business.base.json
    business.updates.json
public/
  _headers
  favicon.svg
scripts/
  fetch-unsplash-images.mjs
  merge-json.mjs
  prepare-build.mjs
  setup-site.js
src/
  assets/
    client/
      hero-main.jpg
    images/
      apex-turf-hero.jpg
      apex-turf-project-0.jpg
      apex-turf-project-1.jpg
      apex-turf-project-2.jpg
      biff-buff-hero.jpg
      biff-buff-project-0.jpg
      biff-buff-project-1.jpg
      biff-buff-project-2.jpg
      biff-buff-project-3.jpg
      biff-buff-project-4.jpg
      brand-project-0.jpg
      brand-project-1.jpg
      brand-project-2.jpg
      brand-project-3.jpg
      brand-project-4.jpg
      brand-project-5.jpg
      coastal-roof-care-hero.jpg
      coastal-roof-care-project-0.jpg
      coastal-roof-care-project-1.jpg
      coastal-roof-care-project-2.jpg
      eastside-flow-yoga-austin-hero.jpg
      elite-details-hero.jpg
      elite-details-project-0.jpg
      elite-details-project-1.jpg
      elite-details-project-2.jpg
      havic-phoenix-hvac-hero.jpg
      lakefront-cpa-chicago-hero.jpg
      luxe-detail-labs-hero.jpg
      luxe-detail-labs-project-0.jpg
      luxe-detail-labs-project-1.jpg
      luxe-detail-labs-project-2.jpg
      mr-miyagi-mobile-detailing-hero.jpg
      mr-miyagi-mobile-detailing-project-0.jpg
      mr-miyagi-mobile-detailing-project-1.jpg
      mr-miyagi-mobile-detailing-project-2.jpg
      mr-miyagi-mobile-detailing-project-3.jpg
      mr-miyagi-mobile-detailing-project-4.jpg
      mr-miyagi-mobile-detailing-project-5.jpg
      napa-noir-weddings-hero.jpg
      napa-noir-weddings-project-0.jpg
      napa-noir-weddings-project-1.jpg
      napa-noir-weddings-project-2.jpg
      napa-noir-weddings-project-3.jpg
      napa-noir-weddings-project-4.jpg
      napa-noir-weddings-project-5.jpg
      napa-noir-weddings-project-6.jpg
      napa-noir-weddings-project-7.jpg
      neon-havoc-live-hero.jpg
      neon-havoc-live-project-0.jpg
      neon-havoc-live-project-1.jpg
      neon-havoc-live-project-2.jpg
      neon-havoc-micro-hero.jpg
      noir-aesthetics-scottsdale-hero.jpg
      noir-aesthetics-scottsdale-project-0.jpg
      noir-aesthetics-scottsdale-project-1.jpg
      noir-aesthetics-scottsdale-project-2.jpg
      noir-aesthetics-scottsdale-project-3.jpg
      noir-aesthetics-scottsdale-project-4.jpg
      noir-aesthetics-scottsdale-project-5.jpg
      nova-lane-studio-hero.jpg
      nova-lane-studio-project-0.jpg
      nova-lane-studio-project-1.jpg
      nova-lane-studio-project-2.jpg
      nova-lane-studio-project-3.jpg
      nova-lane-studio-project-4.jpg
      nova-lane-studio-project-5.jpg
      nova-lane-studio-project-6.jpg
      nova-lane-studio-project-7.jpg
      power-wash-clean-hero.jpg
      power-wash-clean-project-0.jpg
      power-wash-clean-project-1.jpg
      skips-snowboarding-train-hero.jpg
      skips-snowboarding-train-project-0.jpg
      skips-snowboarding-train-project-1.jpg
      skips-snowboarding-train-project-2.jpg
      skips-snowboarding-train-project-3.jpg
      skips-snowboarding-train-project-4.jpg
      skips-snowboarding-train-project-5.jpg
      skips-snowboarding-train-project-6.jpg
      trash-can-man-hero.jpg
      trash-can-man-project-0.jpg
      trash-can-man-project-1.jpg
      trash-can-man-project-2.jpg
      trash-can-man-project-3.jpg
      trash-can-man-project-4.jpg
      trash-can-man-project-5.jpg
      trash-can-man-project-6.jpg
      voltsync-infra-hero.jpg
  components/
    BentoAbout.astro
    Comparison.astro
    Contact.astro
    Events.astro
    FAQ.astro
    Features.astro
    Fonts.astro
    Footer.astro
    Gallery.astro
    Hero.astro
    Investment.astro
    Navbar.astro
    Process.astro
    ServiceArea.astro
    Testimonials.astro
    TrustBar.astro
    VibeSwitcher.astro
  content/
    services/
      web-design.md
    config.ts
  data/
    business.jso1
    business.jso10
    business.jso11
    business.jso12
    business.jso13
    business.jso14
    business.jso15
    business.jso16
    business.jso2
    business.jso3
    business.jso4
    business.jso5
    business.jso6
    business.jso7
    business.jso8
    business.jso9
    business.json
  layouts/
    Layout.astro
  lib/
    icons.js
  pages/
    services/
      [...slug].astro
    index.astro
    success.astro
  styles/
    vibe-system.css
  PROCESS.md
.gitignore
astro.config.mjs
Contact.astro
gen.json
master-schema.json
netlify.toml
package.json
PROCESS.md
README.md
submit.json
submit.response.json
tailwind.config.mjs
tsconfig.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="submit.json">
{
  "business_json": {
    "intelligence": {
      "industry": "Mobile Car Detailing",
      "target_persona": "Local owners of nice cars seeking premium, convenient car care",
      "tone_of_voice": "premium but friendly"
    },
    "strategy": {
      "show_trustbar": true,
      "show_about": true,
      "show_features": true,
      "show_events": false,
      "show_process": true,
      "show_testimonials": true,
      "show_comparison": true,
      "show_gallery": true,
      "show_investment": true,
      "show_faqs": true,
      "show_service_area": true
    },
    "settings": {
      "vibe": "Luxury Noir",
      "cta_text": "Get a Quote",
      "cta_link": "#contact",
      "cta_type": "anchor",
      "secondary_cta_text": "",
      "secondary_cta_link": "",
      "menu": [
        {
          "label": "Home",
          "path": "#home"
        },
        {
          "label": "About",
          "path": "#about"
        },
        {
          "label": "Features",
          "path": "#features"
        },
        {
          "label": "Process",
          "path": "#process"
        },
        {
          "label": "Testimonials",
          "path": "#testimonials"
        },
        {
          "label": "Comparison",
          "path": "#comparison"
        },
        {
          "label": "Gallery",
          "path": "#gallery"
        },
        {
          "label": "Investment",
          "path": "#investment"
        },
        {
          "label": "FAQs",
          "path": "#faqs"
        },
        {
          "label": "Service Area",
          "path": "#service-area"
        },
        {
          "label": "Contact",
          "path": "#contact"
        }
      ]
    },
    "brand": {
      "name": "Biff-Buff Detailing",
      "slug": "biff-buff-detailing",
      "tagline": "Premium Mobile Car Detailing at Your Doorstep",
      "email": "biff@gmail.com",
      "phone": "215-555-5555",
      "office_address": "Philadelphia, PA",
      "objection_handle": "We come to you, saving you time while delivering a flawless finish that protects your investment."
    },
    "hero": {
      "headline": "Luxury Mobile Detailing That Comes To You",
      "subtext": "Experience a premium finish without leaving your home or office.",
      "image": {
        "alt": "Premium car detailing service with luxury finish",
        "image_search_query": "premium mobile car detailing service luxury finish"
      }
    },
    "about": {
      "story_text": "Biff-Buff Detailing was founded to bring top-tier car care directly to your doorstep. We understand the value of your time and your vehicle, offering expert detailing that fits your schedule.",
      "founder_note": "As a car enthusiast, I wanted to create a service that combines convenience with impeccable quality. Your car deserves the best, wherever you are.",
      "years_experience": "Newly launched"
    },
    "features": [
      {
        "title": "Convenient Mobile Service",
        "description": "We come to your home or office, saving you time and hassle.",
        "icon_slug": "car"
      },
      {
        "title": "Premium Quality Finish",
        "description": "Using only the highest-grade products for a flawless shine.",
        "icon_slug": "sparkles"
      },
      {
        "title": "Eco-Friendly Products",
        "description": "Safe for your car and the environment.",
        "icon_slug": "leaf"
      },
      {
        "title": "Experienced Detailers",
        "description": "Skilled professionals dedicated to perfection.",
        "icon_slug": "user-check"
      },
      {
        "title": "Flexible Scheduling",
        "description": "Book at a time that suits your busy lifestyle.",
        "icon_slug": "calendar-alt"
      }
    ],
    "contact": {
      "headline": "Get Your Premium Detailing Quote Today",
      "subheadline": "Contact us to schedule your mobile car detailing service.",
      "email_recipient": "biff@gmail.com",
      "button_text": "Request a Quote",
      "email": "biff@gmail.com",
      "phone": "215-555-5555",
      "office_address": "Philadelphia, PA"
    },
    "service_area": {
      "headline": "Our Service Area",
      "description": "Proudly serving Philadelphia and surrounding neighborhoods with premium mobile car detailing.",
      "locations": [
        "Philadelphia",
        "Nearby Suburbs"
      ]
    }
  },
  "client_email": "biff@gmail.com"
}
</file>

<file path="submit.response.json">
{"ok":true,"status":"PENDING","slug":"biff-buff-detailing","submission_row":5}
</file>

<file path="apps/intake/.vscode/extensions.json">
{
  "recommendations": ["astro-build.astro-vscode"],
  "unwantedRecommendations": []
}
</file>

<file path="apps/intake/.vscode/launch.json">
{
  "version": "0.2.0",
  "configurations": [
    {
      "command": "./node_modules/.bin/astro dev",
      "name": "Development server",
      "request": "launch",
      "type": "node-terminal"
    }
  ]
}
</file>

<file path="apps/intake/public/favicon.svg">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 128 128">
    <path d="M50.4 78.5a75.1 75.1 0 0 0-28.5 6.9l24.2-65.7c.7-2 1.9-3.2 3.4-3.2h29c1.5 0 2.7 1.2 3.4 3.2l24.2 65.7s-11.6-7-28.5-7L67 45.5c-.4-1.7-1.6-2.8-2.9-2.8-1.3 0-2.5 1.1-2.9 2.7L50.4 78.5Zm-1.1 28.2Zm-4.2-20.2c-2 6.6-.6 15.8 4.2 20.2a17.5 17.5 0 0 1 .2-.7 5.5 5.5 0 0 1 5.7-4.5c2.8.1 4.3 1.5 4.7 4.7.2 1.1.2 2.3.2 3.5v.4c0 2.7.7 5.2 2.2 7.4a13 13 0 0 0 5.7 4.9v-.3l-.2-.3c-1.8-5.6-.5-9.5 4.4-12.8l1.5-1a73 73 0 0 0 3.2-2.2 16 16 0 0 0 6.8-11.4c.3-2 .1-4-.6-6l-.8.6-1.6 1a37 37 0 0 1-22.4 2.7c-5-.7-9.7-2-13.2-6.2Z" />
    <style>
        path { fill: #000; }
        @media (prefers-color-scheme: dark) {
            path { fill: #FFF; }
        }
    </style>
</svg>
</file>

<file path="apps/intake/src/pages/index.astro">
---

---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Astro</title>
	</head>
	<body>
		<h1>Astro</h1>
	</body>
</html>
</file>

<file path="apps/intake/.gitignore">
# build output
dist/
# generated types
.astro/

# dependencies
node_modules/

# logs
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*


# environment variables
.env
.env.production

# macOS-specific files
.DS_Store

# jetbrains setting folder
.idea/
</file>

<file path="apps/intake/astro.config.mjs">
// @ts-check
import { defineConfig } from 'astro/config';

// https://astro.build/config
export default defineConfig({});
</file>

<file path="apps/intake/gen.json">
Error - Request ID: 01KH9NH6SDG2HBJ3KJ4PV02Q89
</file>

<file path="apps/intake/netlify.toml">
[build]
  command = "npm run build"
  publish = "dist"
  functions = "netlify/functions"
</file>

<file path="apps/intake/package.json">
{
  "name": "intake",
  "type": "module",
  "version": "0.0.1",
  "scripts": {
    "dev": "astro dev",
    "build": "astro build",
    "preview": "astro preview",
    "astro": "astro"
  },
  "dependencies": {
    "astro": "^5.17.1"
  }
}
</file>

<file path="apps/intake/payload.json">
{
    "client_email": "biff@gmail.com",
    "business_json": {
      "intelligence": {
        "business_name": "Biff-Buff Detailing",
        "site_for": "A mobile car detailing service that comes to homes and offices. Customers are local owners of nice cars who want a premium finish without wasting time.",
        "goal": "Quote",
        "tone_hint": "premium but friendly",
        "main_city": "Philadelphia, PA"
      },
      "strategy": {
        "CTA": "#contact",
        "show_events": false,
        "menu": [
          "#home",
          "#about",
          "#features",
          "#process",
          "#testimonials",
          "#investment",
          "#faqs",
          "#service-area",
          "#contact"
        ]
      },
      "settings": {
        "vibe": "Luxury Noir",
        "menu": [
          "#home",
          "#about",
          "#features",
          "#process",
          "#testimonials",
          "#investment",
          "#faqs",
          "#service-area",
          "#contact"
        ]
      },
      "brand": {
        "name": "Biff-Buff Detailing",
        "tagline": "Premium Mobile Car Detailing in Philadelphia",
        "slug": "biff-buff-detailing",
        "email": "biff@gmail.com",
        "phone": "215-555-5555"
      },
      "hero": {
        "headline": "Luxury Mobile Car Detailing at Your Doorstep",
        "subheadline": "Expert care for your prized vehicle without the hassle of travel.",
        "image": {
          "alt": "Professional detailing technician polishing luxury car outdoors",
          "image_search_query": "professional detailing technician polishing luxury car outdoors"
        }
      },
      "about": {
        "headline": "About Biff-Buff Detailing",
        "content": "Biff-Buff Detailing offers premium mobile car detailing services in Philadelphia, PA. We bring expert care directly to your home or office, ensuring your vehicle receives the highest quality finish with convenience and professionalism."
      },
      "features": [
        {
          "title": "Convenient Mobile Service",
          "description": "We come to your location, saving you time and effort while delivering top-tier detailing.",
          "icon_slug": "truck"
        },
        {
          "title": "Premium Quality Finishes",
          "description": "Using only the best products and techniques to protect and enhance your vehicle‚Äôs appearance.",
          "icon_slug": "sparkles"
        },
        {
          "title": "Experienced Technicians",
          "description": "Our skilled team treats every car with meticulous attention to detail and care.",
          "icon_slug": "users"
        },
        {
          "title": "Eco-Friendly Products",
          "description": "We use environmentally responsible cleaning solutions that are safe for your car and the planet.",
          "icon_slug": "leaf"
        },
        {
          "title": "Flexible Scheduling",
          "description": "Book appointments at times that suit your busy lifestyle, including evenings and weekends.",
          "icon_slug": "clock"
        }
      ],
      "contact": {
        "headline": "Get Your Premium Detailing Quote Today",
        "subheadline": "Contact Biff-Buff Detailing to schedule your mobile service in Philadelphia.",
        "email_recipient": "biff@gmail.com",
        "button_text": "Request a Quote"
      }
    }
  }
</file>

<file path="apps/intake/README.md">
# Astro Starter Kit: Minimal

```sh
npm create astro@latest -- --template minimal
```

> üßë‚ÄçüöÄ **Seasoned astronaut?** Delete this file. Have fun!

## üöÄ Project Structure

Inside of your Astro project, you'll see the following folders and files:

```text
/
‚îú‚îÄ‚îÄ public/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ pages/
‚îÇ       ‚îî‚îÄ‚îÄ index.astro
‚îî‚îÄ‚îÄ package.json
```

Astro looks for `.astro` or `.md` files in the `src/pages/` directory. Each page is exposed as a route based on its file name.

There's nothing special about `src/components/`, but that's where we like to put any Astro/React/Vue/Svelte/Preact components.

Any static assets, like images, can be placed in the `public/` directory.

## üßû Commands

All commands are run from the root of the project, from a terminal:

| Command                   | Action                                           |
| :------------------------ | :----------------------------------------------- |
| `npm install`             | Installs dependencies                            |
| `npm run dev`             | Starts local dev server at `localhost:4321`      |
| `npm run build`           | Build your production site to `./dist/`          |
| `npm run preview`         | Preview your build locally, before deploying     |
| `npm run astro ...`       | Run CLI commands like `astro add`, `astro check` |
| `npm run astro -- --help` | Get help using the Astro CLI                     |

## üëÄ Want to learn more?

Feel free to check [our documentation](https://docs.astro.build) or jump into our [Discord server](https://astro.build/chat).
</file>

<file path="apps/intake/submit.json">
{"client_email": "biff@gmail.com", "business_json": {"intelligence": {"industry": "mobile car detailing", "target_persona": "Local customers who want a reliable, high-quality service", "tone_of_voice": "premium but friendly"}, "strategy": {"show_trustbar": false, "show_about": true, "show_features": true, "show_events": false, "show_process": true, "show_testimonials": true, "show_comparison": false, "show_gallery": false, "show_investment": false, "show_faqs": true, "show_service_area": true, "primary_cta": true, "key_messages": true, "differentiators": true}, "settings": {"vibe": "Luxury Noir", "cta_text": "Request a Quote", "cta_link": "#contact", "cta_type": "anchor", "menu": [{"label": "Home", "path": "#home"}, {"label": "About", "path": "#about"}, {"label": "Services", "path": "#features"}, {"label": "Process", "path": "#process"}, {"label": "Reviews", "path": "#testimonials"}, {"label": "FAQ", "path": "#faqs"}, {"label": "Service Area", "path": "#service-area"}, {"label": "Contact", "path": "#contact"}]}, "brand": {"name": "Biff-Buff Detailing", "slug": "biff-buff-detailing", "tagline": "Trusted mobile car detailing in Philadelphia, PA", "email": "biff@gmail.com", "phone": "215-555-5555", "office_address": "", "objection_handle": ""}, "hero": {"headline": "Premium Mobile Car Detailing in Philadelphia", "subtext": "Expert care for your luxury vehicle, wherever you are", "image": {"alt": "Luxury car receiving mobile detailing service outdoors", "image_search_query": "luxury car mobile detailing Philadelphia outdoors"}}, "about": {"story_text": "Biff-Buff Detailing brings premium car care directly to your home or office in Philadelphia. We specialize in high-quality detailing services tailored for luxury vehicles, ensuring a flawless finish without disrupting your busy schedule. Our friendly and professional team is dedicated to providing convenient, expert service that saves you time and keeps your car looking its best.", "founder_note": "Owner-led, detail-focused, and committed to doing it right.", "years_experience": "Newly launched"}, "features": [{"title": "Mobile Convenience", "description": "We come to you, offering detailing services at your home or workplace to save you time and effort.", "icon_slug": "truck"}, {"title": "Premium Finish", "description": "Expert detailing using top-tier products to protect and enhance your vehicle's appearance.", "icon_slug": "sparkles"}, {"title": "Luxury Vehicle Specialists", "description": "Our team is trained to handle high-end cars with the utmost care and attention to detail.", "icon_slug": "shield"}, {"title": "Friendly Professional Staff", "description": "We pride ourselves on delivering courteous and reliable service every time.", "icon_slug": "users"}, {"title": "Time-Saving Service", "description": "Get your car detailed without interrupting your day, thanks to our efficient mobile operations.", "icon_slug": "clock"}], "contact": {"headline": "Get Your Premium Detailing Quote Today", "subheadline": "Contact Biff-Buff Detailing for expert mobile service in Philadelphia", "email_recipient": "biff@gmail.com", "button_text": "Request a Quote", "email": "biff@gmail.com", "phone": "215-555-5555", "office_address": ""}, "service_area": {"main_city": "Philadelphia, PA", "surrounding_cities": [], "travel_note": "Outside these areas? We offer custom quotes for extended travel.", "cta_text": "Request a Quote", "cta_link": "#contact"}}}
</file>

<file path="apps/intake/tsconfig.json">
{
  "extends": "astro/tsconfigs/strict",
  "include": [".astro/types.d.ts", "**/*"],
  "exclude": ["dist"]
}
</file>

<file path="clients/biff-buff-detailing/business.updates.json">
{}
</file>

<file path="clients/testbrand-detailing/business.base.json">
{
  "intelligence": {
    "industry": "Creative portfolio (brand & web designer)",
    "target_persona": "Founders, agencies, and small business owners who want a premium brand and website that looks modern and converts without feeling salesy",
    "tone_of_voice": "Confident, modern, concise, tasteful"
  },
  "strategy": {
    "show_trustbar": true,
    "show_about": true,
    "show_features": true,
    "show_process": true,
    "show_testimonials": true,
    "show_comparison": false,
    "show_gallery": true,
    "show_investment": false,
    "show_faqs": true,
    "show_service_area": false
  },
  "settings": {
    "vibe": "Solar Flare",
    "cta_text": "Request a Project Quote",
    "cta_link": "#contact",
    "cta_type": "anchor",
    "secondary_cta_text": "View Work",
    "secondary_cta_link": "#gallery",
    "menu": [
      { "label": "Home", "path": "#home" },
      { "label": "About", "path": "#about" },
      { "label": "Services", "path": "#features" },
      { "label": "Process", "path": "#process" },
      { "label": "Reviews", "path": "#testimonials" },
      { "label": "Work", "path": "#gallery" },
      { "label": "FAQs", "path": "#faqs" },
      { "label": "Contact", "path": "#contact" }
    ]
  },
  "brand": {
    "name": "Nova Lane Studio",
    "slug": "nova-lane-studio",
    "tagline": "Brand & web design that feels expensive.",
    "email": "hello@novalanestudio.com",
    "phone": "215-555-0147",
    "objection_handle": "If you want your site to feel premium, it has to be clear, fast, and intentional. I build clean systems that look great and make it easy for people to say yes."
  },
  "hero": {
    "headline": "Design that makes your work look premium",
    "subtext": "Brand identity, web design, and visual systems for founders who want clarity, confidence, and a website that converts without the cringe.",
    "image": {
      "alt": "Designer workspace with modern portfolio materials",
      "image_search_query": "designer portfolio workspace modern"
    }
  },
  "trustbar": {
    "enabled": true,
    "headline": "High-end results, without the agency overhead",
    "items": [
      { "icon": "sparkles", "label": "Premium aesthetic", "sublabel": "Clean, modern, confident" },
      { "icon": "layers", "label": "Systemized design", "sublabel": "Consistent across pages" },
      { "icon": "rocket", "label": "Fast delivery", "sublabel": "Clear milestones + pace" },
      { "icon": "check", "label": "Conversion-first", "sublabel": "Designed to drive action" }
    ]
  },
  "about": {
    "story_text": "Nova Lane Studio helps founders and small teams turn ‚Äúgood‚Äù into ‚Äúpremium.‚Äù The work is minimal but intentional‚Äîstrong typography, clear hierarchy, and visual systems that scale. The goal isn‚Äôt decoration. It‚Äôs clarity that builds trust and makes the next step obvious.",
    "founder_note": "I like simple sites that feel expensive: fast, focused, and easy to navigate. If you‚Äôre building something real, your website should reflect that.",
    "years_experience": "8"
  },
  "features": [
    {
      "title": "Brand Identity Refresh",
      "description": "Refine your logo, typography, and visual direction into a cohesive brand that looks polished everywhere.",
      "icon_slug": "sparkles"
    },
    {
      "title": "High-Converting Website Design",
      "description": "A clean, modern layout with strong messaging and clear CTAs‚Äîbuilt for speed, trust, and action.",
      "icon_slug": "rocket"
    },
    {
      "title": "Visual System + Templates",
      "description": "Reusable design components for social, pitch decks, and future pages‚Äîso your brand stays consistent.",
      "icon_slug": "layers"
    }
  ],
  "processSteps": [
    {
      "title": "Quick discovery",
      "description": "You share your goals, audience, and references. I confirm scope and define the visual direction."
    },
    {
      "title": "Messaging + structure",
      "description": "We shape the content hierarchy: what matters first, what supports it, and what drives action."
    },
    {
      "title": "Design + refinement",
      "description": "I design the key sections and polish the system. You get a clean preview and focused revisions."
    },
    {
      "title": "Launch-ready handoff",
      "description": "You receive a deployment-ready site build plus a simple path for future updates."
    }
  ],
  "testimonials": [
    {
      "quote": "The site instantly felt more premium. Clean, fast, and the messaging finally makes sense.",
      "author": "Jordan M.",
      "role": "Founder"
    },
    {
      "quote": "The process was structured and easy. Every decision had a purpose‚Äîand the final look is exactly what we wanted.",
      "author": "Alyssa K.",
      "role": "Studio owner"
    },
    {
      "quote": "This looks like an agency build, but we got it done quickly and with zero fluff.",
      "author": "Devon R.",
      "role": "Consultant"
    }
  ],
  "gallery": {
    "enabled": true,
    "title": "Selected work",
    "layout": null,
    "show_titles": true,
    "image_source": {
      "provider": "unsplash",
      "image_search_query": "branding mockup minimal modern",
      "filename_pattern": "nova-lane-studio-project-{i}.jpg",
      "target_folder": "public/images"
    },
    "computed_count": 8,
    "computed_layout": "masonry",
    "items": [
      { "title": "Brand identity system", "caption": "Typography + color direction", "tag": "Branding", "image_search_query": "branding identity mockup minimal" },
      { "title": "Homepage redesign", "caption": "Clear hierarchy + strong CTA", "tag": "Web", "image_search_query": "website mockup laptop minimal" },
      { "title": "Product landing page", "caption": "Premium feel, simple structure", "tag": "Web", "image_search_query": "landing page design mockup" },
      { "title": "Logo exploration", "caption": "Clean marks + variations", "tag": "Branding", "image_search_query": "logo design sketches minimal" },
      { "title": "Pitch deck templates", "caption": "Reusable slides + layout system", "tag": "Templates", "image_search_query": "presentation template minimal mockup" },
      { "title": "Social kit", "caption": "Consistent posts + stories", "tag": "Templates", "image_search_query": "social media template minimal" },
      { "title": "Packaging direction", "caption": "Modern product presentation", "tag": "Branding", "image_search_query": "packaging mockup minimal modern" },
      { "title": "Case study layout", "caption": "Story-driven project page", "tag": "Web", "image_search_query": "case study web design layout" }
    ]
  },
  "faqs": [
    {
      "question": "Do you work with clients outside my city?",
      "answer": "Yes. Most projects are remote and run smoothly with a structured process and clear milestones."
    },
    {
      "question": "What do you need from me to start?",
      "answer": "A short description of your business, your audience, and a few examples of sites you like. If you don‚Äôt have them, I‚Äôll infer a strong starting direction."
    },
    {
      "question": "How many revisions are included?",
      "answer": "You‚Äôll get focused refinement rounds on the core sections. The goal is clarity and polish‚Äîwithout endless back-and-forth."
    },
    {
      "question": "Can you match an existing brand?",
      "answer": "Yes. I can align with your current style, or refine it into a more consistent, premium system."
    },
    {
      "question": "What if I don‚Äôt have photos yet?",
      "answer": "No problem. We can start with clean placeholders and swap in your images later without breaking the layout."
    }
  ],
  "contact": {
    "headline": "Let‚Äôs build something premium",
    "subheadline": "Tell me what you do, who it‚Äôs for, and what ‚Äúsuccess‚Äù looks like. I‚Äôll reply with the best next step and a simple plan.",
    "email": "hello@novalanestudio.com",
    "phone": "215-555-0147",
    "email_recipient": "hello@novalanestudio.com",
    "button_text": "Request a Quote",
    "office_address": ""
  }
}
</file>

<file path="clients/testbrand-detailing/business.updates.json">
{}
</file>

<file path="public/_headers">
/*
  X-Frame-Options: DENY
  X-Content-Type-Options: nosniff
  Referrer-Policy: strict-origin-when-cross-origin
</file>

<file path="public/favicon.svg">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 128 128">
    <path d="M50.4 78.5a75.1 75.1 0 0 0-28.5 6.9l24.2-65.7c.7-2 1.9-3.2 3.4-3.2h29c1.5 0 2.7 1.2 3.4 3.2l24.2 65.7s-11.6-7-28.5-7L67 45.5c-.4-1.7-1.6-2.8-2.9-2.8-1.3 0-2.5 1.1-2.9 2.7L50.4 78.5Zm-1.1 28.2Zm-4.2-20.2c-2 6.6-.6 15.8 4.2 20.2a17.5 17.5 0 0 1 .2-.7 5.5 5.5 0 0 1 5.7-4.5c2.8.1 4.3 1.5 4.7 4.7.2 1.1.2 2.3.2 3.5v.4c0 2.7.7 5.2 2.2 7.4a13 13 0 0 0 5.7 4.9v-.3l-.2-.3c-1.8-5.6-.5-9.5 4.4-12.8l1.5-1a73 73 0 0 0 3.2-2.2 16 16 0 0 0 6.8-11.4c.3-2 .1-4-.6-6l-.8.6-1.6 1a37 37 0 0 1-22.4 2.7c-5-.7-9.7-2-13.2-6.2Z" />
    <style>
        path { fill: #000; }
        @media (prefers-color-scheme: dark) {
            path { fill: #FFF; }
        }
    </style>
</svg>
</file>

<file path="scripts/merge-json.mjs">
import fs from "fs";
import path from "path";

function isObject(v) {
  return v && typeof v === "object" && !Array.isArray(v);
}

function deepMerge(base, updates) {
  if (Array.isArray(base) || Array.isArray(updates)) return updates ?? base; // arrays replace
  if (!isObject(base) || !isObject(updates)) return updates ?? base;

  const out = { ...base };
  for (const [k, v] of Object.entries(updates)) {
    out[k] = k in base ? deepMerge(base[k], v) : v;
  }
  return out;
}

function readJsonIfExists(p) {
  if (!fs.existsSync(p)) return null;
  return JSON.parse(fs.readFileSync(p, "utf-8"));
}

const slug = process.argv[2];
if (!slug) {
  console.error("Usage: node scripts/merge-json.mjs <slug>");
  process.exit(1);
}

const clientDir = path.join(process.cwd(), "clients", slug);
const basePath = path.join(clientDir, "business.base.json");
const updatesPath = path.join(clientDir, "business.updates.json");
const outPath = path.join(clientDir, "business.json");

if (!fs.existsSync(basePath)) {
  console.error(`Missing: ${basePath}`);
  process.exit(1);
}

const base = readJsonIfExists(basePath) ?? {};
const updates = readJsonIfExists(updatesPath) ?? {};
const merged = deepMerge(base, updates);

fs.writeFileSync(outPath, JSON.stringify(merged, null, 2));
console.log(`Wrote: ${outPath}`);
</file>

<file path="scripts/prepare-build.mjs">
import fs from "fs";
import path from "path";

function ensureDir(p) {
  fs.mkdirSync(p, { recursive: true });
}

function rmDirContents(dir) {
  if (!fs.existsSync(dir)) return;
  for (const entry of fs.readdirSync(dir)) {
    const p = path.join(dir, entry);
    fs.rmSync(p, { recursive: true, force: true });
  }
}

function copyDir(src, dest) {
  if (!fs.existsSync(src)) return;
  ensureDir(dest);
  for (const entry of fs.readdirSync(src, { withFileTypes: true })) {
    const s = path.join(src, entry.name);
    const d = path.join(dest, entry.name);
    if (entry.isDirectory()) copyDir(s, d);
    else fs.copyFileSync(s, d);
  }
}

const slug = process.argv[2];
if (!slug) {
  console.error("Usage: node scripts/prepare-build.mjs <slug>");
  process.exit(1);
}

const root = process.cwd();
const clientDir = path.join(root, "clients", slug);

const mergedBusiness = path.join(clientDir, "business.json");
if (!fs.existsSync(mergedBusiness)) {
  console.error(`Missing merged business.json: ${mergedBusiness}`);
  process.exit(1);
}

// Where your app expects these:
const appBusinessPath = path.join(root, "src", "data", "business.json");
const appAssetsImages = path.join(root, "src", "assets", "images");

// Where your client images will live:
const clientImages = path.join(clientDir, "assets", "images");

// 1) Copy JSON
ensureDir(path.dirname(appBusinessPath));
fs.copyFileSync(mergedBusiness, appBusinessPath);
console.log(`Copied business.json -> ${appBusinessPath}`);

// 2) Wipe images to prevent cross-client bleed + dist bloat
ensureDir(appAssetsImages);
rmDirContents(appAssetsImages);
console.log(`Cleared -> ${appAssetsImages}`);

// 3) Copy only this client's images (if any)
copyDir(clientImages, appAssetsImages);
console.log(`Copied images from -> ${clientImages}`);
</file>

<file path="src/components/Fonts.astro">
---
/* Optimized Google Fonts Bundle - The "Quartet" */
const fontURL = "https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,600;1,400&family=Inter:wght@400;700;800&family=JetBrains+Mono:wght@400;700&family=Outfit:wght@300;500;800&display=swap";
---

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href={fontURL} rel="stylesheet">
</file>

<file path="src/components/TrustBar.astro">
---
import { iconLibrary } from '../lib/icons';
const { data } = Astro.props;

/*
  Smart Icon Logic: 
  Checks if the icon string exists in our SVG library. 
  If not, it renders the raw string (ideal for Emojis).
*/
---

<section class="py-8 bg-[var(--bg-color)] border-b border-[var(--border)]">
  <div class="max-w-6xl mx-auto px-6">
    
    {data?.headline && (
      <p class="text-center text-sm uppercase tracking-widest text-[var(--text-secondary)] mb-6">
        {data.headline}
      </p>
    )}

    <ul class="grid grid-cols-2 md:grid-cols-4 gap-6 items-center text-center">
      {data.items.map((item) => (
        <li class="flex flex-col items-center gap-2 group">
          
          <div class="w-10 h-10 flex items-center justify-center">
            {item.icon && iconLibrary[item.icon] ? (
              /* SVG PATH FOUND */
              <svg 
                class="w-8 h-8 text-[var(--accent)]" 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                stroke-width="2" 
                stroke-linecap="round" 
                stroke-linejoin="round"
              >
                <path d={iconLibrary[item.icon]} />
              </svg>
            ) : (
              /* NO SVG FOUND - FALLBACK TO EMOJI */
              <span class="text-2xl">{item.icon}</span>
            )}
          </div>

          <span class="font-bold text-[var(--text-primary)]">
            {item.label}
          </span>

          {item.sublabel && (
            <span class="text-sm text-[var(--text-secondary)]">
              {item.sublabel}
            </span>
          )}
        </li>
      ))}
    </ul>
  </div>
</section>
</file>

<file path="src/content/services/web-design.md">
---
title: "Custom Web Design"
description: "High-performance static sites built for speed."
icon: "layout"
---
# Why Choose Our Web Design?
We don't use clunky builders. We use **Astro and Tailwind** to ensure your site scores a 100 on Lighthouse.

- Mobile First
- SEO Optimized
- AI Assisted Design
</file>

<file path="src/content/config.ts">
import { defineCollection, z } from 'astro:content';

const services = defineCollection({
  type: 'content',
  schema: z.object({
    title: z.string(),
    description: z.string(),
    icon: z.string().default('zap'),
  }),
});

export const collections = { services };
</file>

<file path="src/data/business.jso1">
{
"settings": {
    "vibe": "maestro-classic",
    "primary_color": "#ff5f1f",
    "cta_text": "Schedule Pickup",
    "cta_link": "/contact",
    "menu": [
      { "label": "Home", "path": "/" },
      { "label": "About", "path": "/about" },
      { "label": "Contact", "path": "/contact" }
    ]
  },
  "brand": {
    "name": "AstroIsland Media",
    "logo_text": "AstroIsland",
    "objection_handle": "No-Code Maintenance ‚Äî You own the site, we handle the tech."
  },
  "hero": {
    "headline": "Modern Static Sites Built with AI Precision",
    "subtext": "100/100 Lighthouse scores. Built for your business in hours, not weeks.",
    "image": {
      "src": "hero-main.jpg", 
      "alt": "Modern tech workspace showcasing speed"
    }
  },
  "features": [
    {
      "title": "Hyper-Fast",
      "description": "Static generation means zero lag for your users and instant page loads.",
      "icon_slug": "zap",
      "img_name": "feature-speed.jpg"
    },
    {
      "title": "AI Optimized",
      "description": "Components built with v0 and optimized for modern web standards.",
      "icon_slug": "cpu",
      "img_name": "feature-ai.jpg"
    },
    {
      "title": "SEO Ready",
      "description": "Semantic HTML that search engines love, out of the box.",
      "icon_slug": "search",
      "img_name": "feature-seo.jpg"
    }
  ],
  "processSteps": [
    {
      "title": "Strategy Session",
      "description": "We define your 'Vibe' and business goals via our AI intake process."
    },
    {
      "title": "AI Build Phase",
      "description": "Our engine generates your custom components and optimized copy in hours."
    },
    {
      "title": "Global Deployment",
      "description": "Your site goes live on a global CDN with a perfect 100/100 performance score."
    }
  ],
  "testimonials": [
    {
      "quote": "The speed of this site is incredible. Our conversion rate doubled within a week of launching.",
      "author": "Sarah Jenkins",
      "role": "CEO, TechFlow",
      "avatar": "user-1.jpg"
    },
    {
      "quote": "Finally, a website that actually looks modern and doesn't take 10 seconds to load.",
      "author": "Marcus Thorne",
      "role": "Founder, Thorne Digital",
      "avatar": "user-2.jpg"
    }
  ],
  "faqs": [
    {
      "question": "Do I need to pay for monthly hosting?",
      "answer": "Nope. Because these are static sites, we host them on global CDNs that are free for standard business traffic."
    },
    {
      "question": "Can I update the content myself?",
      "answer": "Yes! We provide a 'Source Vault' service where you can request data updates that go live instantly."
    }
  ]
}
</file>

<file path="src/data/business.jso10">
{
  "intelligence": {
    "industry": "High-End Residential Interior Design",
    "target_persona": "Discerning homeowners in historic districts looking to blend heritage architecture with modern luxury.",
    "tone_of_voice": "Sophisticated, curated, and timeless. Focus on 'quiet luxury'."
  },
  "strategy": {
    "show_trustbar": true,
    "show_about": true,
    "show_features": true,
    "show_process": true,
    "show_testimonials": true,
    "show_comparison": false,
    "show_gallery": true,
    "show_investment": true,
    "show_faqs": true,
    "show_service_area": true
  },
  "settings": {
    "vibe": "Vintage Boutique",
    "primary_color": "#b4a07d",
    "cta_text": "Get Started",
    "cta_link": "https://calendly.com/your-link",
    "cta_type": "external",
    "menu": [
      { "label": "The Studio", "path": "#about" },
      { "label": "Portfolio", "path": "#gallery" },
      { "label": "The Method", "path": "#process" },
      { "label": "Inquire", "path": "#contact" }
    ]
  },
  "brand": {
    "name": "MAISON NOIR",
    "slug": "maison-noir",
    "tagline": "Curating Timeless Sanctuaries.",
    "email": "labs@kineticelite.com",
    "phone": "n/a",
    "office_address": "800 Brickell Ave, Miami, FL",
    "objection_handle": "We manage everything from procurement to white-glove installation, so you never have to lift a finger."
  },
  "trustbar": {
    "headline": "As Seen In & Certified By",
    "logos": [
      { "name": "Architectural Digest", "image_search_query": "architectural digest logo black" },
      { "name": "ASID", "image_search_query": "asid interior design logo" },
      { "name": "Elle Decor", "image_search_query": "elle decor logo" }
    ]
  },
  "hero": {
    "title_line_1": "ELEVATED",
    "title_line_2": "LIVING",
    "subheadline": "Full-service interior design for those who value heritage, texture, and the art of the home. Based in Charleston, serving clients globally.",
    "image": {
      "alt": "Luxury living room with velvet seating, marble fireplace, and ambient lighting",
      "image_search_query": "luxury interior design Charleston style living room vintage boutique"
    }
  },
  "about": {
    "story_text": "Maison Noir began with a simple philosophy: a home should be a reflection of your history and a blueprint for your future. We specialize in sourcing rare antiques and pairing them with cutting-edge bespoke furniture.",
    "founder_note": "Design isn't about filling a room; it's about composing a life.",
    "years_experience": "20"
  },
  "service_area": {
    "main_city": "Charleston",
    "surrounding_cities": ["Mount Pleasant", "Kiawah Island", "Savannah", "Sullivan's Island"],
    "map_search_query": "Interior Design Studios Charleston SC"
  },
  "features": [
    {
      "title": "Bespoke Sourcing",
      "description": "Direct access to exclusive European furniture houses and private antique dealers.",
      "icon_name": "Search"
    },
    {
      "title": "Full Renovation",
      "description": "Complete project management from architectural drafting to final styling.",
      "icon_name": "Home"
    },
    {
      "title": "Color Theory",
      "description": "Scientific lighting and palette analysis to maximize the natural mood of your space.",
      "icon_name": "Palette"
    }
  ],
  "processSteps": [
    {
      "step_number": "01",
      "title": "Discovery Call",
      "description": "Exploring your aesthetic DNA and lifestyle requirements."
    },
    {
      "step_number": "02",
      "title": "The Concept",
      "description": "Full tactile mood boards, 3D renderings, and floor plans."
    },
    {
      "step_number": "03",
      "title": "The Reveal",
      "description": "White-glove installation and final styling of your completed sanctuary."
    }
  ],
  "testimonials": [
    {
      "quote": "They didn't just design a house; they gave our family a place that feels like it has existed for generations.",
      "author": "Eleanor V.",
      "role": "Historic Homeowner"
    }
  ],
  "gallery": [
    { "title": "The Manor Project", "image_search_query": "luxury dining room historic mansion interior" },
    { "title": "Coastal Chic", "image_search_query": "modern luxury beach house bedroom cream tones" },
    { "title": "Art Deco Revived", "image_search_query": "luxury bathroom marble art deco style" }
  ],
  "investment": [
    {
      "tier_name": "CONCIERGE DESIGN",
      "price": "$5,000 min",
      "popular": true,
      "features": ["Room-by-room styling", "Sourcing list", "2D Renderings"]
    },
    {
      "tier_name": "FULL ESTATE",
      "price": "Custom",
      "popular": false,
      "features": ["Architectural oversight", "Global procurement", "Turnkey setup"]
    }
  ],
  "faqs": [
    {
      "question": "Do you work with existing furniture?",
      "answer": "Absolutely. We love integrating cherished family heirlooms into a fresh, elevated context."
    }
  ],
  "contact": {
    "headline": "BEGIN YOUR TRANSFORMATION",
    "subheadline": "Now booking heritage projects for the Fall 2026 season.",
    "email_recipient": "hello@maisonnoir.com",
    "button_text": "Inquire About Your Project",
    "office_address": "88 Broad St, Charleston, SC"
  }
}
</file>

<file path="src/data/business.jso11">
{
  "intelligence": {
    "industry": "Live Music / Event Micro-site",
    "target_persona": "Fans of high-octane rock music looking for immediate tickets",
    "tone_of_voice": "Bold, urgent, and stripped-down"
  },
  "brand": {
    "name": "NEON HAVOC",
    "slug": "neon-havoc-micro",
    "tagline": "The Sound of the 2026 Underground.",
    "email": "tour@neonhavoc.com",
    "phone": "n/a",
    "availability_status": "LTD TICKETS REMAIN",
    "objection_handle": "Final tour date. No second show will be added."
  },
  "strategy": {
    "show_trustbar": false,
    "show_about": false,
    "show_features": true,
    "show_process": false,
    "show_testimonials": true,
    "show_comparison": false,
    "show_gallery": false,
    "show_investment": true,
    "show_faqs": false,
    "show_service_area": false
  },
  "settings": {
    "vibe": "Solar Flare",
    "cta_text": "Get Tickets Now",
    "cta_link": "https://www.eventbrite.com/e/neon-havoc-tickets",
    "cta_type": "external",
    "menu": [
      { "label": "The Lineup", "path": "#features" },
      { "label": "Ticket Tiers", "path": "#investment" }
    ]
  },
  "hero": {
    "headline": "VOLTAGE. VIBRATION. VOID.",
    "subtext": "Neon Havoc live at The Warehouse. Doors at 20:00. This is the only warning.",
    "image": {
      "alt": "High contrast rock concert silhouette with red light",
      "image_search_query": "concert red silhouette strobe"
    }
  },
  "features": [
    {
      "title": "Neon Havoc",
      "description": "Full sensory headline performance.",
      "icon_slug": "music"
    },
    {
      "title": "The Void Theory",
      "description": "Special guest industrial support.",
      "icon_slug": "mic"
    },
    {
      "title": "Voltage Control",
      "description": "Opening modular synth frequencies.",
      "icon_slug": "zap"
    }
  ],
  "testimonials": [
    { "quote": "A visceral sonic assault. Don't miss this.", "author": "Rolling Stone", "role": "Review" }
  ],
  "investment": [
    { 
      "tier_name": "Standard Floor", 
      "price": "55", 
      "popular": true, 
      "features": ["General Admission", "Standing Room Only"] 
    },
    { 
      "tier_name": "VIP Mezzanine", 
      "price": "150", 
      "popular": false, 
      "features": ["Priority Entry", "Private Bar Access"] 
    }
  ]
}
</file>

<file path="src/data/business.jso12">
{
  "intelligence": {
    "industry": "Automotive Detailing",
    "target_persona": "Car and truck owners in Bucks and Montgomery County seeking premium vehicle maintenance.",
    "tone_of_voice": "Professional, meticulous, and reliable"
  },
  "strategy": {
    "show_trustbar": true,
    "show_about": true,
    "show_features": true,
    "show_process": true,
    "show_testimonials": false,
    "show_comparison": true,
    "show_gallery": true,
    "show_investment": true,
    "show_faqs": true,
    "show_service_area": true
  },
  "settings": {
    "vibe": "Legacy Professional",
    "cta_text": "Schedule Your Detail",
    "cta_link": "#contact",
    "cta_type": "anchor",
    "menu": [
      { "label": "Services", "path": "#features" },
      { "label": "Gallery", "path": "#gallery" },
      { "label": "Pricing", "path": "#investment" },
      { "label": "Contact", "path": "#contact" }
    ]
  },
  "brand": {
    "name": "Elite Details",
    "slug": "elite-details",
    "tagline": "Premium Showroom Quality Detailing in Warminster",
    "email": "service@elitedetails-warminster.com",
    "phone": "(215) 555-0123",
    "office_address": "York & County Line Rd, Warminster, PA",
    "objection_handle": "Skilled detailers using top-quality products with a 100% satisfaction guarantee."
  },
  "hero": {
    "headline": "Elite Vehicle Detailing in Warminster",
    "subtext": "From interior deep cleans to full exterior polish, we provide premium care for the vehicles you love with convenient local drop-off and lift service.",
    "image": {
      "alt": "Close up of a luxury car being polished to a high shine",
      "image_search_query": "professional car detailing luxury polish"
    }
  },
  "about": {
    "story_text": "Founded on a passion for automotive excellence, Elite Details has become the premier choice for car and truck owners across Bucks and Montgomery County. Our clean, professional bays and master detailers ensure every vehicle leaves in showroom condition.",
    "founder_note": "We treat every vehicle as if it were our own, using only the highest grade products on the market.",
    "years_experience": "12+ Years of Professional Detailing"
  },
  "features": [
    {
      "title": "Interior Deep Clean",
      "description": "Full sanitization, vacuuming, and leather treatment for a fresh cabin.",
      "icon_slug": "sparkles"
    },
    {
      "title": "Full Exterior Polish",
      "description": "Machine polish and premium wax application for deep shine and protection.",
      "icon_slug": "zap"
    },
    {
      "title": "Wheel & Tire Care",
      "description": "Removal of brake dust and road grime with specialized protective coatings.",
      "icon_slug": "shield"
    }
  ],
  "processSteps": [
    {
      "title": "Professional Drop-off",
      "description": "Drop your vehicle at our Warminster shop and let us give you a lift home."
    },
    {
      "title": "The Detail",
      "description": "Our team executes the chosen package using precision tools and premium chemicals."
    },
    {
      "title": "Final Inspection",
      "description": "A multi-point quality check ensures your vehicle meets the Elite Details standard."
    }
  ],
  "gallery": [
    { "title": "Engine Bay Restoration", "image_search_query": "clean car engine bay" },
    { "title": "Ceramic Coating Finish", "image_search_query": "shiny luxury car ceramic coating" },
    { "title": "Interior Restoration", "image_search_query": "clean car leather interior" }
  ],
  "investment": [
    {
      "tier_name": "Car Essentials",
      "price": "99",
      "popular": false,
      "features": ["Exterior Wash", "Interior Vacuum", "Window Cleaning"]
    },
    {
      "tier_name": "Truck & SUV Essentials",
      "price": "125",
      "popular": true,
      "features": ["Deep Rim Cleaning", "Full Exterior Wash", "Dashboard Treatment"]
    },
    {
      "tier_name": "Elite Full Detail",
      "price": "300",
      "popular": false,
      "features": ["Paint Decontamination", "Machine Polish", "Premium Carnauba Wax", "Steam Cleaning"]
    }
  ],
  "service_area": {
    "main_city": "Warminster",
    "surrounding_cities": ["Doylestown", "Horsham", "Hatboro", "Willow Grove"],
    "map_search_query": "Warminster PA"
  },
  "faqs": [
    {
      "question": "How long does a full detail take?",
      "answer": "A full detail typically takes 4-6 hours depending on the size and condition of the vehicle."
    },
    {
      "question": "Do I need to book in advance?",
      "answer": "Yes, we recommend booking at least 3-5 days in advance to secure your preferred time slot."
    }
  ],
  "contact": {
    "headline": "Ready for a Showroom Finish?",
    "subheadline": "Contact us today to schedule your appointment and experience the Elite Details difference.",
    "email_recipient": "schedule@elitedetails-warminster.com",
    "button_text": "Book My Detail Now",
    "office_address": "York & County Line Rd, Warminster, PA"
  }
}
</file>

<file path="src/data/business.jso13">
{
  "intelligence": {
  "industry": "Residential and small business exterior cleaning",
  "target_persona": "Homeowners and small business owners who want their property to look clean and well-maintained",
  "tone_of_voice": "Professional, trustworthy, and friendly"
  },
  "strategy": {
  "show_trustbar": false,
  "show_about": true,
  "show_features": true,
  "show_process": true,
  "show_testimonials": true,
  "show_comparison": false,
  "show_gallery": true,
  "show_investment": true,
  "show_faqs": true,
  "show_service_area": true
  },
  "settings": {
  "vibe": "Rugged Industrial",
  "cta_text": "Get a Free Quote",
  "cta_link": "#contact",
  "cta_type": "anchor",
  "menu": [
  { "label": "Home", "path": "/" },
  { "label": "Services", "path": "#features" },
  { "label": "Process", "path": "#process" },
  { "label": "Pricing", "path": "#investment" },
  { "label": "Contact", "path": "#contact" }
  ]
  },
  "brand": {
  "name": "Power Wash Clean",
  "slug": "power-wash-clean",
  "tagline": "Professional exterior power washing that makes your property look new again.",
  "email": "[pwc@powerwashclean.com](mailto:pwc@powerwashclean.com)",
  "phone": "215-555-5555",
  "office_address": "Serving Bucks and Montgomery Counties, PA",
  "objection_handle": "Reliable, affordable power washing for homes and small businesses."
  },
  "hero": {
  "headline": "Restore Your Home‚Äôs Exterior Instantly",
  "subtext": "Mobile power washing services for homes and small businesses across Bucks and Montgomery Counties.",
  "image": {
  "alt": "Power washing a residential home exterior",
  "image_search_query": "power washing house exterior"
  }
  },
  "about": {
  "story_text": "Power Wash Clean was built to help homeowners and small business owners maintain the appearance and value of their properties. We focus on safe, effective exterior cleaning that delivers visible results.",
  "founder_note": "We treat every property like it‚Äôs our own and take pride in doing the job right the first time.",
  "years_experience": "5+ years"
  },
  "features": [
  {
  "title": "House Washing",
  "description": "Safely remove dirt, mold, and grime from siding and exterior surfaces.",
  "icon_slug": "home"
  },
  {
  "title": "Driveway & Concrete Cleaning",
  "description": "Deep cleaning for driveways, sidewalks, and patios to restore curb appeal.",
  "icon_slug": "road"
  },
  {
  "title": "Deck & Fence Washing",
  "description": "Gentle cleaning that protects wood while removing buildup.",
  "icon_slug": "layers"
  },
  {
  "title": "Small Business Exteriors",
  "description": "Professional cleaning to keep storefronts and buildings looking their best.",
  "icon_slug": "building"
  }
  ],
  "processSteps": [
  {
  "title": "Request a Quote",
  "description": "Tell us about your property and get a fast, free estimate."
  },
  {
  "title": "Schedule Service",
  "description": "We coordinate a convenient time that works for you."
  },
  {
  "title": "Professional Cleaning",
  "description": "We arrive on-site with professional equipment and deliver outstanding results."
  }
  ],
  "testimonials": [
  {
  "quote": "Our house looks brand new. The difference was incredible.",
  "author": "Sarah M.",
  "role": "Homeowner"
  },
  {
  "quote": "Fast, professional, and very thorough. Highly recommended.",
  "author": "James R.",
  "role": "Small Business Owner"
  }
  ],
  "gallery": [
  {
  "title": "Residential House Washing",
  "image_search_query": "clean house exterior after power washing"
  },
  {
  "title": "Driveway Cleaning",
  "image_search_query": "power washing driveway before after"
  }
  ],
  "investment": [
  {
  "tier_name": "Residential Power Washing",
  "price": "Starting at $300",
  "popular": true,
  "features": [
  "Free on-site quote",
  "Professional equipment",
  "Safe for siding and surfaces"
  ]
  }
  ],
  "faqs": [
  {
  "question": "Is power washing safe for my home?",
  "answer": "Yes. We use the correct pressure and techniques for each surface to prevent damage."
  },
  {
  "question": "How long does a typical job take?",
  "answer": "Most residential jobs are completed within a few hours."
  }
  ],
  "service_area": {
  "main_city": "Bucks County, PA",
  "surrounding_cities": ["Montgomery County, PA", "Doylestown", "Newtown"],
  "map_search_query": "Bucks County PA power washing service"
  },
  "contact": {
  "headline": "Get Your Free Power Washing Quote",
  "subheadline": "Contact us today and see how clean your property can look.",
  "email_recipient": "[pwc@powerwashclean.com](mailto:pwc@powerwashclean.com)",
  "button_text": "Request a Free Quote",
  "office_address": "Serving Bucks and Montgomery Counties, PA"
  }
  }
</file>

<file path="src/data/business.jso15">
{
  "intelligence": {
    "industry": "Mobile car detailing service",
    "target_persona": "Local car owners with sedans and SUVs who want a premium detail at home or work without visiting a shop",
    "tone_of_voice": "Premium, confident, friendly, and appointment-focused"
  },
  "strategy": {
    "show_trustbar": true,
    "show_about": true,
    "show_features": true,
    "show_process": true,
    "show_testimonials": true,
    "show_comparison": false,
    "show_gallery": true,
    "show_investment": false,
    "show_faqs": false,
    "show_service_area": true
  },
  "settings": {
    "vibe": "Luxury Noir",
    "cta_text": "Book an Appointment",
    "cta_link": "#contact",
    "cta_type": "anchor",
    "secondary_cta_text": "Call Now",
    "secondary_cta_link": "tel:12155555555",
    "menu": [
      { "label": "Home", "path": "#home" },
      { "label": "Services", "path": "#features" },
      { "label": "Process", "path": "#process" },
      { "label": "Work", "path": "#gallery" },
      { "label": "Reviews", "path": "#testimonials" },
      { "label": "Service Area", "path": "#service-area" },
      { "label": "Contact", "path": "#contact" }
    ]
  },
  "brand": {
    "name": "Biff-Buff Mobile Detailing",
    "slug": "biff-buff",
    "tagline": "Premium Mobile Car Detailing ‚Äî At Your Home or Work",
    "email": "biff@gmail.com",
    "phone": "215-555-5555",
    "office_address": "Mobile / On-Site Service",
    "objection_handle": "Skip the shop. I bring professional tools and careful technique to your driveway or workplace‚Äîso your vehicle looks its best on your schedule.",
    "logo": {
      "mode": "icon_text",
      "text": "Biff-Buff",
      "icon_slug": "sparkles",
      "image_path": "",
      "alt": "Biff-Buff Mobile Detailing logo"
    }
  },
 "hero": {
    "headline": "Premium Mobile Car Detailing ‚Äî At Your Home or Work",
    "subtext": "High-end interior and exterior detailing for sedans and SUVs. Convenient, careful, and appointment-based ‚Äî serving local owners who want a showroom-clean vehicle without leaving home.",
    "image": {
      "alt": "Professional mobile car detailer washing a luxury SUV in a residential driveway",
      "image_search_query": "car detailing luxury suv driveway"
    }
  },


  "trustbar": {
    "enabled": true,
    "headline": "Trusted by local owners who value a clean, protected vehicle",
    "items": [
      { "icon": "shield", "label": "Paint-Safe", "sublabel": "Careful technique" },
      { "icon": "clock", "label": "On Your Time", "sublabel": "Appointment-based" },
      { "icon": "sparkles", "label": "Premium Finish", "sublabel": "Interior + exterior" },
      { "icon": "map", "label": "Mobile Service", "sublabel": "Home or work" }
    ]
  },

  "about": {
    "story_text": "Biff-Buff Mobile Detailing was built for local owners who care about their vehicles and their time. Instead of waiting at a shop, you get professional-level detailing at your home or workplace ‚Äî with the right tools, products, and a careful process from start to finish.",
    "founder_note": "I treat every vehicle like it‚Äôs my own ‚Äî no rushed wipe-downs, no corner-cutting. My goal is simple: make your car look incredible, and make the process effortless for you.",
    "years_experience": "5"
  },
  "features": [
    {
      "title": "Mobile Convenience",
      "description": "I come to your home or workplace with professional equipment ‚Äî you keep your day moving while your car gets detailed.",
      "icon_slug": "map-pin"
    },
    {
      "title": "Interior Deep Clean",
      "description": "Vacuuming, wipe-downs, and focused interior cleaning to restore a clean, fresh cabin feel ‚Äî without shortcuts.",
      "icon_slug": "sparkles"
    },
    {
      "title": "Exterior Detail Finish",
      "description": "Thorough wash and finishing touches for a crisp, glossy look ‚Äî perfect for daily drivers and weekend cars alike.",
      "icon_slug": "droplets"
    },
    {
      "title": "Care for Nice Cars",
      "description": "Detail-minded approach designed for owners who want careful handling and consistent, high-quality results.",
      "icon_slug": "shield-check"
    }
  ],
  "processSteps": [
    {
      "title": "Request a Time",
      "description": "Send your vehicle type, location, and preferred day/time. I‚Äôll confirm availability quickly."
    },
    {
      "title": "I Arrive Fully Equipped",
      "description": "I show up at your home or workplace with professional products and detailing tools for a premium finish."
    },
    {
      "title": "Detail + Final Touches",
      "description": "Interior and exterior detailed on-site ‚Äî then a quick final walkthrough so you see the results immediately."
    }
  ],
  "testimonials": [
    {
      "quote": "Easiest detail I‚Äôve ever booked ‚Äî the car looked brand new.",
      "author": "Chris M.",
      "role": "Local customer"
    },
    {
      "quote": "On time, professional, and the interior came out amazing. Worth it.",
      "author": "Jamie R.",
      "role": "SUV owner"
    },
    {
      "quote": "Super convenient. I was working from home while my car got detailed outside.",
      "author": "Taylor D.",
      "role": "Busy professional"
    }
  ],
  "service_area": {
    "main_city": "Philadelphia, PA",
    "surrounding_cities": [
      "Cherry Hill, NJ",
      "Haddonfield, NJ",
      "Bala Cynwyd, PA",
      "Ardmore, PA",
      "Conshohocken, PA",
      "King of Prussia, PA",
      "Jenkintown, PA",
      "Media, PA"
    ],
    "travel_note": "Outside these areas? I offer custom quotes for extended travel and special requests.",
    "cta_text": "Request Availability",
    "cta_link": "#contact",
    "map_search_query": "mobile car detailing near Philadelphia PA"
  },
  "gallery": {
    "enabled": true,
    "title": "The Lab",
    "layout": null,
    "show_titles": true,
    "strategy": {
      "primary_goal": "conversion",
      "show_gallery": true
    },
    "image_source": {
      "provider": "unsplash",
      "image_search_query": "professional car detailing before and after interior exterior close-up",
      "filename_pattern": "{brandSlug}-project-{index}.jpg",
      "target_folder": "/src/assets/images/"
    },
    "computed_count": 5,
    "computed_layout": "grid",
    "items": [
      {
        "title": "Paint-Safe Hand Wash",
        "caption": "A careful exterior clean that brings back shine without harsh shortcuts.",
        "tag": "Exterior",
        "image_search_query": "professional hand car wash detailing foam luxury car driveway"
      },
      {
        "title": "Interior Refresh",
        "caption": "Clean, tidy cabin feel ‚Äî the kind you notice immediately when you open the door.",
        "tag": "Interior",
        "image_search_query": "car detailing interior cleaning vacuum seats dashboard close-up"
      },
      {
        "title": "Detail Brush Precision",
        "caption": "Focused work on the small areas that separate a quick wash from a real detail.",
        "tag": "Precision",
        "image_search_query": "car detailing brush cleaning vents badges trim close-up"
      },
      {
        "title": "SUV Ready Finish",
        "caption": "Premium mobile detailing results for SUVs ‚Äî at home or at work.",
        "tag": "SUV",
        "image_search_query": "mobile car detailing luxury suv exterior shine driveway"
      },
      {
        "title": "Gloss & Reflection",
        "caption": "A crisp finish that looks great in sunlight and under street lights.",
        "tag": "Finish",
        "image_search_query": "detailed car paint glossy reflection close-up after detailing"
      }
    ]
  },
  "contact": {
    "headline": "Book Your Mobile Detail",
    "subheadline": "Tell me what you drive and where you‚Äôd like the detail done. I‚Äôll confirm availability and lock in your appointment.",
    "email": "biff@gmail.com",
    "phone": "215-555-5555",
    "email_recipient": "biff@gmail.com",
    "button_text": "Request an Appointment",
    "office_address": "Mobile / On-Site Service"
  }
}
</file>

<file path="src/data/business.jso16">
{
  "intelligence": {
    "industry": "Guided snowboarding trips and on-mountain coaching",
    "target_persona": "Intermediate adult snowboarders who want a fun, confidence-building day with smart terrain choices and coaching at Camelback",
    "tone_of_voice": "Upbeat, confident, friendly, and safety-first‚Äîlike a great coach who keeps it simple and motivating"
  },
  "strategy": {
    "show_trustbar": false,
    "show_about": true,
    "show_features": true,
    "show_process": true,
    "show_testimonials": true,
    "show_comparison": false,
    "show_gallery": true,
    "show_investment": true,
    "show_faqs": true,
    "show_service_area": true
  },
  "settings": {
    "vibe": "Solar Flare",
    "cta_text": "Request Dates",
    "cta_link": "#contact",
    "cta_type": "anchor",
    "secondary_cta_text": "Text Skip",
    "secondary_cta_link": "tel:+12155555555",
    "menu": [
      { "label": "Home", "path": "#home" },
      { "label": "About", "path": "#about" },
      { "label": "What You Get", "path": "#features" },
      { "label": "How It Works", "path": "#process" },
      { "label": "Reviews", "path": "#testimonials" },
      { "label": "Gallery", "path": "#gallery" },
      { "label": "Packages", "path": "#investment" },
      { "label": "FAQs", "path": "#faqs" },
      { "label": "Service Area", "path": "#service-area" },
      { "label": "Contact", "path": "#contact" }
    ]
  },
  "brand": {
    "name": "Skip's Snowboarding Train",
    "slug": "skips-snowboarding-train",
    "tagline": "Guided snowboarding days for intermediate adults‚Äîride smarter, progress faster.",
    "email": "skip@shred.com",
    "phone": "215-555-5555",
    "objection_handle": "Not sure if you're ‚Äúgood enough‚Äù? Perfect. We pick terrain that matches your level, coach the fundamentals that matter most, and keep the day fun and confidence-building."
  },
  "hero": {
    "headline": "Ride better by lunchtime.",
    "subtext": "Guided snowboarding trips at Camelback for intermediate adults. Terrain choice, smart coaching, and a smooth plan‚Äîso you progress faster and have an unforgettable day.",
    "image": {
      "alt": "Snowboarder carving confidently on a groomed slope",
      "image_search_query": "snowboarder carving groomed slope"
    }
  },
  "about": {
    "story_text": "Skip's Snowboarding Train was built for riders who are past the bunny hill but still feel stuck‚Äîcatching edges, hesitating on steeper runs, or not knowing what to practice. Our guided trips combine a great route plan with practical coaching so you get more quality runs, fewer frustrating resets, and real improvement you can feel the same day.",
    "founder_note": "I keep it simple: the right terrain, the right cue at the right moment, and a pace that builds confidence. You‚Äôll ride more, learn more, and actually enjoy the progress.",
    "years_experience": "10+ years"
  },
  "features": [
    {
      "title": "Guided Route Plan (No Wandering)",
      "description": "We choose the best runs for your level and conditions‚Äîso you spend the day riding, not searching.",
      "icon_slug": "map"
    },
    {
      "title": "On-Mountain Coaching That Clicks",
      "description": "Quick, usable cues on edge control, speed management, turns, and confidence‚Äîwithout overthinking.",
      "icon_slug": "cpu"
    },
    {
      "title": "Intermediate-First Terrain Choices",
      "description": "Progressive runs that challenge you safely. No ego runs, no getting in over your head.",
      "icon_slug": "shield"
    },
    {
      "title": "Small-Group Energy",
      "description": "Bring a friend or come solo‚Äîgroups are kept tight for better coaching and a smoother day.",
      "icon_slug": "users"
    },
    {
      "title": "Video Tips (When Helpful)",
      "description": "Optional quick clips to show what‚Äôs happening and what to change‚Äîso adjustments are obvious.",
      "icon_slug": "sparkles"
    },
    {
      "title": "Safety & Flow",
      "description": "Warm-ups, smart breaks, and clear expectations‚Äîso you ride strong all day and finish happy.",
      "icon_slug": "check"
    }
  ],
  "processSteps": [
    {
      "title": "Tell Us Your Level + Goals",
      "description": "Use the form (or text) with your riding level, what feels hard, and your preferred date/time window."
    },
    {
      "title": "Get Matched to the Right Trip",
      "description": "We confirm Camelback timing, group size, and a plan tailored to conditions and your goals."
    },
    {
      "title": "Meet Up + Warm Up",
      "description": "Quick check-in, warm-up lap, and 1‚Äì2 focus points for the day so you start strong."
    },
    {
      "title": "Ride, Coach, Repeat",
      "description": "We guide the route, coach in the moment, and build confidence run by run‚Äîending with a clear next-step plan."
    }
  ],
  "testimonials": [
    {
      "quote": "I‚Äôve been ‚Äúintermediate‚Äù for years. In one day I stopped skidding my turns and finally felt in control on steeper runs. The route plan alone was worth it.",
      "author": "Jason M.",
      "role": "Trip Guest"
    },
    {
      "quote": "Super chill vibe but seriously effective coaching. I learned more in a few hours than a whole season of trial and error.",
      "author": "Erin L.",
      "role": "Trip Guest"
    },
    {
      "quote": "Perfect pace, great terrain choices, and the tips actually stuck. I rode with way more confidence by the end of the session.",
      "author": "Mike D.",
      "role": "Trip Guest"
    }
  ],
  "investment": [
    {
      "tier_name": "Solo Progress Session",
      "price": "From $249",
      "popular": true,
      "features": [
        "Guided riding + coaching for 2 hours",
        "Terrain plan matched to your level",
        "2‚Äì3 focus skills (edge control, turns, speed)",
        "Optional quick video feedback",
        "End-of-session next-step plan"
      ]
    },
    {
      "tier_name": "Half-Day Guided Trip",
      "price": "From $399",
      "features": [
        "Guided riding + coaching for 3.5 hours",
        "Smart route plan for conditions",
        "Skill building across multiple runs",
        "Breaks timed for energy and flow",
        "Perfect for building confidence on steeps"
      ]
    },
    {
      "tier_name": "Small-Group Day (2‚Äì4 riders)",
      "price": "From $549",
      "features": [
        "Guided riding + coaching for 4.5 hours",
        "Bring friends or get matched (when available)",
        "Group-friendly pacing with real coaching",
        "Best-value option for intermediate adults",
        "Clear goals + progress tracking for everyone"
      ]
    }
  ],
  "faqs": [
    {
      "question": "Is this for beginners?",
      "answer": "This is designed for intermediate adult riders‚Äîcomfortable linking turns on green/blue terrain and ready to build confidence, control, and consistency. If you‚Äôre brand new, ask anyway and we‚Äôll point you to the best next step."
    },
    {
      "question": "Do you provide lift tickets or equipment?",
      "answer": "Lift tickets and rentals are not included. You‚Äôll bring your own gear or rent at the resort. If you want quick setup tips, we can help you dial in stance and basics."
    },
    {
      "question": "What if conditions are bad?",
      "answer": "We plan the day around real conditions. If weather or terrain makes the trip unsafe or not worth your time, we‚Äôll reschedule to a better window."
    },
    {
      "question": "How many people are in a group?",
      "answer": "Small groups only. Most trips are 2‚Äì4 riders so coaching stays useful and the day flows smoothly."
    },
    {
      "question": "I‚Äôm nervous about steeper runs‚Äîwill I be pushed?",
      "answer": "No. We progress at your pace. The goal is confidence and control, not ego runs. We choose terrain that challenges you safely."
    },
    {
      "question": "Can I just text to book?",
      "answer": "Yes‚Äîtext is welcome. If you text, include your level, your goals, and a couple date/time options so we can confirm quickly."
    }
  ],
  "gallery": {
    "enabled": true,
    "title": "On-Mountain Vibes",
    "layout": null,
    "show_titles": true,
    "image_source": {
      "provider": "unsplash",
      "image_search_query": "snowboarding carving coaching group mountain",
      "filename_pattern": "skips-snowboarding-train-project-{i}.jpg",
      "target_folder": "public/images"
    },
    "computed_count": 7,
    "computed_layout": "bento",
    "items": [
      {
        "title": "Hero Carve",
        "image_search_query": "snowboarder carving groomed run",
        "filename": "skips-snowboarding-train-hero.jpg",
        "alt": "Snowboarder carving on a groomed slope"
      },
      {
        "title": "Edge Control",
        "image_search_query": "snowboarder edge control turn",
        "filename": "skips-snowboarding-train-project-0.jpg",
        "alt": "Snowboarder making a controlled turn with clean edges"
      },
      {
        "title": "Confidence on Blues",
        "image_search_query": "snowboarder descending blue run",
        "filename": "skips-snowboarding-train-project-1.jpg",
        "alt": "Rider descending a wide blue trail with confidence"
      },
      {
        "title": "Small Group Energy",
        "image_search_query": "snowboarders group riding mountain",
        "filename": "skips-snowboarding-train-project-2.jpg",
        "alt": "Small group of snowboarders riding together on a mountain"
      },
      {
        "title": "Coaching Moment",
        "image_search_query": "snowboard coach talking on slope",
        "filename": "skips-snowboarding-train-project-3.jpg",
        "alt": "Coach giving tips to a snowboarder on the slope"
      },
      {
        "title": "Smooth Turns",
        "image_search_query": "snowboarder linked turns snow",
        "filename": "skips-snowboarding-train-project-4.jpg",
        "alt": "Snowboarder linking smooth turns on packed snow"
      },
      {
        "title": "Mountain Stoke",
        "image_search_query": "snowboarding mountain winter sunshine",
        "filename": "skips-snowboarding-train-project-5.jpg",
        "alt": "Snowboarders enjoying a bright winter day on the mountain"
      }
    ]
  },
  "service_area": {
    "main_city": "Pocono Mountains, PA",
    "surrounding_cities": [
      "Tannersville, PA",
      "Stroudsburg, PA",
      "East Stroudsburg, PA",
      "Mount Pocono, PA",
      "Bartonsville, PA",
      "Swiftwater, PA",
      "Kunkletown, PA",
      "Saylorsburg, PA"
    ],
    "travel_note": "Riding outside these areas? Ask‚Äîextended travel options may be available depending on date and conditions.",
    "cta_text": "Check Availability",
    "cta_link": "#contact",
    "map_search_query": "Guided snowboarding trips near Camelback Pennsylvania"
  },
  "contact": {
    "headline": "Ready to ride better?",
    "subheadline": "Send your level + goals and a couple date options. We‚Äôll confirm the best plan for Camelback.",
    "email": "skip@shred.com",
    "phone": "215-555-5555",
    "email_recipient": "skip@shred.com",
    "button_text": "Request Dates",
    "office_address": "Pennsylvania"
  }
}
</file>

<file path="src/data/business.jso2">
{
  "settings": {
    "vibe": "maestro-classic",
    "primary_color": "#C5A059",
    "cta_text": "Check Availability",
    "cta_link": "/contact",
    "menu": [
      { "label": "The Atelier", "path": "/" },
      { "label": "The Experience", "path": "/about" },
      { "label": "Inquire", "path": "/contact" }
    ]
  },
  "brand": {
    "name": "AstroIsland Fine Art",
    "logo_text": "AstroIsland",
    "objection_handle": "Featured in Vogue | 48-Hour Preview Guarantee"
  },
  "hero": {
    "headline": "Documenting the Quiet Art of Human Connection",
    "subtext": "Fine-art wedding photography for couples who value presence over posing. Timeless imagery delivered with modern speed.",
    "image": {
      "src": "hero-main.jpg", 
      "alt": "Elegant black and white wedding portrait"
    }
  },
  "features": [
    {
      "title": "Natural Aesthetic",
      "description": "True-to-life editing that preserves the genuine atmosphere of your celebration.",
      "icon_slug": "eye"
    },
    {
      "title": "The 48-Hour Preview",
      "description": "Relive the magic while it's still fresh. Your curated preview arrives before your honeymoon.",
      "icon_slug": "zap"
    },
    {
      "title": "Unobtrusive Presence",
      "description": "Capturing the story from the inside out, without the 'movie set' distractions.",
      "icon_slug": "heart"
    }
  ],
  "processSteps": [
    { "title": "Curation Call", "description": "We discuss your vision and the 'unmissable' moments unique to your story." },
    { "title": "The Celebration", "description": "A seamless, stress-free experience where your only job is to be fully present." },
    { "title": "The Archive", "description": "A bespoke digital collection delivered via a private, high-speed gallery." }
  ],
  "testimonials": [
    {
      "quote": "Choosing AstroIsland was the best decision we made. The photos are art, but the experience was even better.",
      "author": "Julianne Moore",
      "role": "Bride, Oct 2025"
    },
    {
      "quote": "The 48-hour preview blew us away. We were looking at our highlights while still on our flight to Italy.",
      "author": "David Chen",
      "role": "Groom, Sept 2025"
    }
  ],
  "faqs": [
    {
      "question": "Do you travel for destination weddings?",
      "answer": "Absolutely. We specialize in destination celebrations and handle all travel logistics internally."
    }
  ],
  "contact": {
  "phone": "555.987.6543",
  "location": "Paris / London / New York",
  "email": "studio@astroisland.com"
},
"gallery": [
  { "src": "/images/shot-1.jpg", "alt": "Bridal Portrait" },
  { "src": "/images/shot-2.jpg", "alt": "Sunset Ceremony" },
  { "src": "/images/shot-3.jpg", "alt": "The Rings" },
  { "src": "/images/shot-4.jpg", "alt": "Reception Dance" }
]
}
</file>

<file path="src/data/business.jso3">
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "settings": {
    "vibe": "classic-heritage", 
    "primary_color": "#4A5D4E",
    "cta_text": "Book a Free Meet & Greet",
    "cta_link": "#contact",
   "menu": [
      { "label": "Services", "path": "#features" },
      { "label": "Process", "path": "#process" },
      { "label": "Reviews", "path": "#testimonials" },
      { "label": "FAQ", "path": "#faqs" }
    ]
  },
  "brand": {
    "name": "Dog Tired",
    "logo_text": "Dog Tired",
    "objection_handle": "We provide the reliability of a professional agency with the heart of a neighbor‚Äîalways on time, always on call."
  },
  "hero": {
    "headline": "A Restored Home Starts with a Contented Canine.",
    "subtext": "Reliable, heart-centered dog walking that channels your pet's energy into calm, preserving your home and their happiness.",
    "image": {
      "src": "hero-main.jpg",
      "alt": "A peaceful dog resting in a warm, sunlit home after an outdoor adventure."
    }
  },
  "investment": [
    {
      "name": "The Basics",
      "price": "$25",
      "description": "Per walk",
      "features": ["30 Minute Walk", "Fresh Water", "Treats Included"]
    },
    {
      "name": "Elite Care",
      "price": "$60",
      "description": "Full Service",
      "features": ["60 Minute Adventure", "Grooming", "Photo Updates", "VIP Priority"]
    }
  ],
  "features": [
    {
      "title": "Real-Time Updates",
      "description": "Direct text updates after every visit so you know exactly how your pup is doing.",
      "icon_slug": "message-circle"
    },
    {
      "title": "Habit Mapping",
      "description": "We take the time to learn your dog's unique personality and triggers for a stress-free walk.",
      "icon_slug": "map"
    },
    {
      "title": "Always Reachable",
      "description": "You have our direct number. Call for any reason‚Äîyour pet's safety is our priority.",
      "icon_slug": "phone-call"
    }
  ],
  "processSteps": [
    {
      "title": "The Meet & Greet",
      "description": "We visit your home to meet you and your dog, ensuring a perfect vibe and comfort level."
    },
    {
      "title": "The Adventure",
      "description": "We execute the walk according to your dog's specific energy needs and habits."
    },
    {
      "title": "The Peace of Mind",
      "description": "You receive a text confirmation and a calm, happy dog waiting for you when you get home."
    }
  ],
  "testimonials": [
    {
      "quote": "I finally stopped worrying about my carpets and started enjoying my dog again.",
      "author": "Sarah J.",
      "role": "Local Pet Owner"
    }
  ],
  "faqs": [
  {
    "question": "Are you available for last-minute walks?",
    "answer": "Yes! Because you have my direct number, you can text for availability anytime. We try our best to accommodate short-notice requests."
  },
  {
    "question": "What happens if it rains?",
    "answer": "We walk rain or shine. If it's particularly messy, we'll ensure your pup is towelled off and comfortable before we leave."
  }
],
  "contact": {
    "phone": "555-0123",
    "location": "Local Service Area",
    "email": "hello@dogtired.com"
  },
  "gallery": [
    {
      "src": "walk-1.jpg",
      "alt": "Happy dog on a trail walk."
    },
    {
      "src": "walk-2.jpg",
      "alt": "Calm dog resting after exercise."
    }
  ],
  "comparison": {
    "headline": "The Zenith Difference",
    "features": [
      { "label": "GPS Tracking", "us": true, "them": false },
      { "label": "Certified Trainers", "us": true, "them": false },
      { "label": "Premium Insurance", "us": true, "them": true },
      { "label": "24/7 Support", "us": true, "them": false }
    ]
  }
}
</file>

<file path="src/data/business.jso4">
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "settings": {
    "vibe": "dark-neo",
    "primary_color": "#6366f1",
    "cta_text": "Reserve Your Ride",
    "cta_link": "#contact",
    "menu": [
      { "label": "Services", "path": "#features" },
      { "label": "The Fleet", "path": "#gallery" },
      { "label": "Pricing", "path": "#investment" },
      { "label": "FAQ", "path": "#faqs" }
    ]
  },
  "brand": {
    "name": "Elite Drive Concierge",
    "logo_text": "EDC",
    "objection_handle": "While apps leave you waiting on the curb, we provide guaranteed punctuality and executive standards."
  },
  "hero": {
    "headline": "Arrive Before You Get There",
    "subtext": "Seamless executive transport and airport transfers for professionals who value time and discretion.",
    "image": {
      "src": "/images/black-car-service.webp",
      "alt": "Sleek black executive sedan at night"
    }
  },
  "comparison": {
    "headline": "Beyond the App",
    "features": [
      { "label": "Pre-Scheduled Guarantee", "us": true, "them": false },
      { "label": "Professional Chauffeurs", "us": true, "them": false },
      { "label": "WiFi & Refreshments", "us": true, "them": false },
      { "label": "Flight Monitoring", "us": true, "them": true }
    ]
  },
  "features": [
    {
      "title": "Airport Transfers",
      "description": "Timed perfectly with your flight data to ensure zero wait time upon arrival.",
      "icon_slug": "plane"
    },
    {
      "title": "Executive Events",
      "description": "Full-day standby service for corporate meetings and high-stakes events.",
      "icon_slug": "briefcase"
    }
  ],
  "processSteps": [
    { "title": "Precision Booking", "description": "Select your vehicle and schedule via our encrypted portal." },
    { "title": "Driver Sync", "description": "Receive chauffeur details and live tracking 30 minutes before pickup." },
    { "title": "Premium Arrival", "description": "Enjoy a quiet, climate-controlled cabin with zero-friction checkout." }
  ],
  "testimonials": [
    {
      "quote": "The only car service I trust for my board members. Punctuality is never a question.",
      "author": "Mark Stevenson",
      "role": "CEO, TechFlow"
    }
  ],
  "investment": [
    {
      "name": "Business Class",
      "price": "$85",
      "description": "Per Hour",
      "features": ["Late Model Sedan", "Real-time Tracking", "Bottled Water"]
    },
    {
      "name": "First Class",
      "price": "$150",
      "description": "Per Hour",
      "features": ["Luxury SUV", "Meet & Greet Service", "In-car WiFi", "Premium Refreshments"]
    }
  ],
  "faqs": [
    { "question": "How far in advance should I book?", "answer": "We recommend at least 12 hours, but we can often accommodate within 2 hours." },
    { "question": "Are your drivers licensed?", "answer": "All chauffeurs undergo rigorous background checks and professional training." }
  ],
  "contact": {
    "phone": "1-800-ELITE-DR",
    "location": "Downtown Executive District",
    "email": "bookings@elitedrive.com"
  },
  "gallery": [
    { "src": "/images/fleet-1.webp", "alt": "Luxury Sedan Interior" },
    { "src": "/images/fleet-2.webp", "alt": "Chauffeur opening door" }
  ]
}
</file>

<file path="src/data/business.jso5">
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "settings": {
    "vibe": "Rugged Industrial",
    "primary_color": "#1F2933",
    "cta_text": "Get a Quote",
    "cta_link": "tel:215-555-5555",
    "menu": [
      { "label": "Services", "path": "#features" },
      { "label": "How It Works", "path": "#process" },
      { "label": "Pricing", "path": "#investment" },
      { "label": "Contact", "path": "#contact" }
    ]
  },
  "brand": {
  "name": "Joe's Junk Removal",
  "logo_text": "JJR",
  "tagline": "Fast. Fair. Gone.",
  "objection_handle": "Fully insured, honest pricing, and on-time service‚Äîyour junk removed the right way, with no surprises.",
  "testimonial_headline": "What Your Neighbors Are Saying",
  "faq_headline": "Clearing the Air (FAQ)",
  "contact_headline": "Ready to clear the clutter?",
  "investment_headline": "Transparent Pricing",
  "availability_status": "Accepting junk removal routes for Monday-Friday."
  },
  "hero": {
    "headline": "Junk Gone. No Excuses. No Surprises.",
    "subtext": "On-time, insured junk removal with honest answers and careful handling‚Äîexactly as promised.",
    "image": {
      "src": "/images/hero-junk-removal.jpg",
      "alt": "Joe standing next to his pickup truck ready for junk removal"
    }
  },
  "comparison": {
    "headline": "The Difference Between a Pro and \"Some Guy With a Truck\"",
    "features": [
      { "label": "Fully insured & legitimate", "us": true, "them": false },
      { "label": "Honest, upfront answers", "us": true, "them": false },
      { "label": "Shows up when scheduled", "us": true, "them": false }
    ]
  },
  "features": [
    {
      "title": "Honest Pricing",
      "description": "Clear pricing before the job starts‚Äîno surprise charges, no pressure.",
      "icon_slug": "dollar-sign"
    },
    {
      "title": "On-Time Service",
      "description": "We show up when we say we will, ready to work.",
      "icon_slug": "clock"
    },
    {
      "title": "Careful Removal",
      "description": "Items are removed cleanly with respect for your home or property.",
      "icon_slug": "shield"
    }
  ],
  "processSteps": [
    {
      "title": "Call or Text for a Quote",
      "description": "Tell us what needs to go and get an honest answer upfront."
    },
    {
      "title": "We Arrive On Time",
      "description": "Fully insured and ready to work‚Äîexactly when scheduled."
    },
    {
      "title": "Junk Is Removed Cleanly",
      "description": "Items are hauled away quickly with no mess and no mistakes."
    }
  ],
  "testimonials": [
    {
      "quote": "The personalized service ensured that the items I needed to 'go away' were removed quickly and cleanly.",
      "author": "Satisfied Customer",
      "role": "Homeowner"
    }
  ],
  "investment": [
    {
      "name": "Single Item Pickup",
      "price": "$100",
      "description": "Ideal for large appliances or single bulky items.",
      "features": [
        "Large appliances and electronics",
        "Item must be fully disconnected and ready for removal",
        "Careful handling with no property damage",
        "Honest confirmation before removal"
      ]
    },
    {
      "name": "Full Pickup Truck Load",
      "price": "$250",
      "description": "Perfect for garages or multiple bulky items.",
      "features": [
        "One full pickup truck load",
        "All items must be ready and accessible",
        "Efficient, on-time service",
        "No surprise fees"
      ]
    },
    {
      "name": "Pickup Truck + Trailer",
      "price": "$400",
      "description": "Maximum hauling capacity for large cleanouts.",
      "features": [
        "Pickup truck plus trailer",
        "Ideal for renovations or estate cleanouts",
        "No unhooking or disassembly of appliances",
        "Fully insured professional service"
      ]
    }
  ],
  "faqs": [
    {
      "question": "Do you take TVs and electronic equipment?",
      "answer": "Yes, we remove TVs and most electronic equipment as long as they are ready for pickup."
    },
    {
      "question": "Are you insured?",
      "answer": "Yes, Joe‚Äôs Junk Removal is fully insured for your peace of mind."
    },
    {
      "question": "Do you unhook or disconnect appliances?",
      "answer": "No. All appliances must be fully disconnected and ready for removal before arrival."
    }
  ],
  "contact": {
    "phone": "215-555-5555",
    "location": "Bucks County and Eastern Montgomery County",
    "email": "joe@example.com"
  },
  "gallery": [
    {
      "src": "/images/hauling-refrigerator.jpg",
      "alt": "Joe hauling a refrigerator from a garage"
    },
    {
      "src": "/images/truck-loaded.jpg",
      "alt": "Pickup truck loaded with junk"
    },
    {
      "src": "/images/before-after-garage.jpg",
      "alt": "Before-and-after garage cleanout"
    },
    {
      "src": "/images/joe-with-truck.jpg",
      "alt": "Joe standing next to his truck in work gear"
    }
  ]
}
</file>

<file path="src/data/business.jso6">
{
  "settings": {
    "vibe": "Zenith Earth",
    "primary_color": "#4f7942",
    "cta_text": "Claim Your Free Estimate",
    "cta_link": "#contact",
    "menu": [
      { "label": "The Story", "path": "#about" },
      { "label": "Services", "path": "#features" },
      { "label": "Process", "path": "#process" },
      { "label": "Investment", "path": "#pricing" }
    ]
  },
  "brand": {
    "name": "Elite Lawns",
    "logo_text": "EL",
    "tagline": "Austin's Premier Organic Turf Care",
    "objection_handle": "100% Pet-Safe. Fully Insured. No Contracts.",
    "availability_status": "Now booking for Spring aeration and seasonal cleanup.",
    "contact_headline": "Ready for a Greener View?",
    "process_headline": "Our Restoration Path",
    "process_icon": "sprout",
    "investment_headline": "Seasonal Care Packages",
    "investment_icon": "tag"
  },
  "hero": {
    "headline": "Transform Your Lawn Into a Private Oasis",
    "subtext": "Luxury landscaping and organic maintenance for Austin homeowners who value precision over price.",
    "image": {
      "src": "/images/hero-landscaping.jpg",
      "alt": "Manicured lawn with sharp edging and healthy green turf"
    }
  },
  "about": {
    "story_headline": "From One Mower to a Managed Fleet",
    "story_text": "George started Elite Lawns with a single goal: to treat every yard like his own backyard. Today, we bring that same meticulous, owner-operated attention to over 400 properties across Austin.",
    "founder_note": "We don't just cut grass; we architect outdoor environments that increase your home's value.",
    "years_experience": "12+",
    "stats": [
      { "value": "450+", "label": "\\leaf Lawns Restored" },
      { "value": "100%", "label": "\\shield Organic Products" }
    ]
  },
  "features": [
    {
      "title": "Precision Edging",
      "description": "Diamond-blade technology for sidewalk lines that look like they were cut with a ruler.",
      "icon_slug": "scissors"
    },
    {
      "title": "Soil Nutrition",
      "description": "Customized organic fertilizer blends tailored specifically for the Central Texas climate.",
      "icon_slug": "leaf"
    },
    {
      "title": "On-Demand Scheduling",
      "description": "Our mobile app lets you skip a mow or add a service with a single tap.",
      "icon_slug": "phone"
    }
  ],
  "processSteps": [
    {
      "title": "Ground Audit",
      "description": "We analyze your soil pH and grass health before the first blade touches the turf."
    },
    {
      "title": "The Deep Cut",
      "description": "Precision mowing and edging performed by our vetted, long-term crew members."
    },
    {
      "title": "Final Walkthrough",
      "description": "Every service ends with a clean-up and a final quality check by the foreman."
    }
  ],
  "investment": [
    {
      "name": "Estate Maintenance",
      "price": "$199",
      "description": "per month",
      "features": [
        "\\leaf Bi-Weekly Mowing",
        "\\scissors Precision Edging",
        "\\check Seasonal Fertilizer",
        "\\check Priority Support"
      ]
    },
    {
      "name": "Elite Restoration",
      "price": "$349",
      "description": "one-time service",
      "features": [
        "\\sprout Aeration & Seeding",
        "\\leaf Soil Treatment",
        "\\check Mulch Refresh",
        "\\shield Irrigation Audit"
      ]
    }
  ],
  "contact": {
    "phone": "512-555-0199",
    "location": "Austin, Texas",
    "email": "hello@elitelawns.com"
  }
}
</file>

<file path="src/data/business.jso7">
{
  "intelligence": {
    "industry": "Beauty & Wellness",
    "target_persona": "Premium clients seeking expert hair care and relaxation",
    "tone_of_voice": "Sophisticated & Welcoming"
  },
  "layout_strategy": {
    "show_events": false,
    "show_testimonials": true,
    "show_comparison": false,
    "show_gallery": true,
    "show_faqs": true,
    "show_process": true,
    "show_investment": true,
    "show_bento_about": true,
    "show_service_area": true,
    "show_trustbar": true
  },
  "settings": {
    "vibe": "Vintage Boutique",
    "primary_color": "#D4AF37",
    "cta_text": "Book Your Transformation",
    "cta_link": "#contact",
    "menu": [
      { "label": "The Experience", "path": "#about" },
      { "label": "Our Process", "path": "#process" },
      { "label": "Investment", "path": "#pricing" },
      { "label": "Gallery", "path": "#gallery" }
    ]
  },
  "brand": {
    "name": "Carol's Salon",
    "slug": "carols-salon",
    "logo_text": "C.S.",
    "tagline": "27 Years of Mastery. Modern Artistry.",
    "objection_handle": "Personalized hair transformation in a contemporary, relaxing environment.",
    "availability_status": "Accepting new clients in Doylestown",
    "testimonial_headline": "The Client Experience"
  },
 "hero": {
    "headline": "Elevate Your Look, Calm Your Mind.",
    "subtext": "...",
    "image": {
      "src": "carols-salon-hero.jpg",
      "alt": "Modern salon interior with vintage gold accents",
      "image_search_query": "luxury boutique hair salon interior gold marble vintage aesthetic cinematic"
    }
  },
  "trustbar": {
    "headline": "Trusted in Doylestown for Nearly Three Decades",
    "items": [
      { "icon": "star", "label": "5-Star Reputation", "sublabel": "Loved by Local Clients" },
      { "icon": "scissors", "label": "27+ Years Experience", "sublabel": "Master Stylist" },
      { "icon": "map", "label": "Doylestown, PA", "sublabel": "Locally Owned" },
      { "icon": "sparkles", "label": "Relaxed Luxury", "sublabel": "Private Boutique Studio" }
    ]
  },
  "about": {
    "story_headline": "Mastery Meets Connection",
    "story_text": "Carol doesn't just cut hair; she knows her clients. With 27 years of experience, we focus on the art of personalized transformation and the science of healthy hair.",
    "founder_note": "Your hair is the crown you never take off.",
    "years_experience": "27",
    "stats": [
      { "value": "27", "label": "Years Active" },
      { "value": "15k+", "label": "Styles Created" }
    ]
  },
  "service_area": {
    "headline": "Conveniently Located in Doylestown",
    "subtext": "Serving premium clients across the heart of Bucks and Montgomery Counties.",
    "locations": [
      { "name": "Doylestown", "wikipedia_link": "https://en.wikipedia.org/wiki/Doylestown,_Pennsylvania" },
      { "name": "New Hope", "wikipedia_link": "https://en.wikipedia.org/wiki/New_Hope,_Pennsylvania" },
      { "name": "Bucks County", "wikipedia_link": "https://en.wikipedia.org/wiki/Bucks_County,_Pennsylvania" },
      { "name": "Montgomery County", "wikipedia_link": "https://en.wikipedia.org/wiki/Montgomery_County,_Pennsylvania" }
    ]
  },
  "processSteps": [
    { "title": "The Consult", "description": "A modern welcome and objective review to tailor the look to your vision." },
    { "title": "Immersive Relaxation", "description": "Enjoy a smoothie or a glass of wine while we begin your treatment." },
    { "title": "The Transformation", "description": "Expert wash, color, and precision cut using premium products." },
    { "title": "The Reveal", "description": "Leave feeling refreshed, confident, and ready for the world." }
  ],
  "features": [
    { "title": "Color Mastery", "description": "Specializing in balayage and corrective color techniques.", "icon_slug": "sparkles" },
    { "title": "Relaxation First", "description": "A high-end, quiet environment designed for your comfort.", "icon_slug": "heart" }
  ],
  "testimonials": [
    { "quote": "Carol is a genius with color. I've been coming here for 10 years and wouldn't go anywhere else.", "author": "Sarah J.", "role": "Doylestown Local" }
  ],
 "gallery": [
    { 
      "src": "carols-salon-gallery-1.jpg", 
      "alt": "Modern styling station with vintage gold mirrors",
      "image_search_query": "aesthetic salon styling station vintage mirror gold detail"
    },
    { 
      "src": "carols-salon-gallery-2.jpg", 
      "alt": "...",
      "image_search_query": "luxury salon wash station organic products minimalist"
    }
  ],
  "investment": [
    {
      "name": "Master Cut & Style",
      "price": "$95+",
      "description": "Our signature precision cutting experience.",
      "features": ["Full Consultation", "Scalp Massage", "Precision Cut", "Blowout"],
      "popular": true
    },
    {
      "name": "Full Color Service",
      "price": "$150+",
      "description": "Complete transformation from root to tip.",
      "features": ["Custom Color Blend", "Deep Conditioning", "Trim", "Style"],
      "popular": false
    }
  ],
  "faqs": [
    { "question": "What premium products do you use?", "answer": "We exclusively use organic, sulfate-free color and care lines to ensure the long-term health of your hair." },
    { "question": "Is a consultation required for new clients?", "answer": "Yes, we include a 15-minute modern consultation with every service to ensure our vision aligns with yours." },
    { "question": "Can I book a specific wine or beverage?", "answer": "Absolutely. Let us know your preference when booking, and we'll have your choice of wine or smoothie ready upon arrival." },
    { "question": "Do you offer corrective color services?", "answer": "Yes, Carol is a Master Colorist. Corrective services require an initial in-person consult to assess hair integrity." }
  ],
  "contact": {
    "phone": "215-555-HAIR",
    "email": "appointments@carolssalon.com",
    "location": "Doylestown, PA"
  }
}
</file>

<file path="src/data/business.jso8">
{
  "intelligence": {
    "industry": "Live Entertainment / Rock Music",
    "target_persona": "Alternative rock fans and concert-goers",
    "tone_of_voice": "Bold, Energetic, and Raw"
  },
  "layout_strategy": {
    "show_events": true,
    "show_testimonials": false,
    "show_comparison": false,
    "show_gallery": true,
    "show_faqs": true,
    "show_process": false,
    "show_investment": true,
    "show_bento_about": true,
    "show_service_area": false,
    "show_trustbar": true
  },
  "settings": {
    "vibe": "Neon Cyber",
    "primary_color": "#00f0ff",
    "cta_text": "GRAB TICKETS NOW",
    "cta_link": "#pricing",
    "menu": [
      { "label": "The Tour", "path": "#features" },
      { "label": "Gallery", "path": "#gallery" },
      { "label": "Tickets", "path": "#pricing" }
    ]
  },
 "brand": {
    "name": "Electric Havoc",
    "slug": "electric-havoc",
    "logo_text": "E.H.",
    "tagline": "The 2026 'Static Storm' World Tour.",
    "gallery_tagline": "Visual highlights from the 2026 North American circuit.",
    "objection_handle": "Final North American dates‚Äîdon't miss the chaos.",
    "availability_status": "Tickets Selling Fast"
  },
  "hero": {
    "headline": "LOUDER THAN THE APOCALYPSE.",
    "subtext": "Experience the raw energy of Electric Havoc live. One night only in Philadelphia. Doors at 7 PM. Pure noise starts at 8.",
    "image": {
      "src": "electric-havoc-hero.jpg",
      "alt": "Rock band performing on stage with blue neon lights and smoke",
      "image_search_query": "rock concert stage blue neon lighting crowd cinematic raw energy"
    }
  },
  "trustbar": {
    "headline": "Sold Out Across 14 Countries",
    "items": [
      { "icon": "star", "label": "Gold Record", "sublabel": "2025 Best Alt Album" },
      { "icon": "users", "label": "2M+ Fans", "sublabel": "Global Community" },
      { "icon": "zap", "label": "Live Power", "sublabel": "High-Voltage Show" }
    ]
  },
  "gallery": [
    { "src": "electric-havoc-1.jpg", "alt": "Lead guitarist solo with neon backlight", "image_search_query": "electric guitar solo stage neon lights" },
    { "src": "electric-havoc-2.jpg", "alt": "Drummer in motion with red stage smoke", "image_search_query": "drummer concert action shot smoke red light" },
    { "src": "electric-havoc-3.jpg", "alt": "Crowd silhouettes with glowing stage", "image_search_query": "concert crowd silhouettes glowing blue stage" },
    { "src": "electric-havoc-4.jpg", "alt": "Vintage rock amplifiers with neon glow", "image_search_query": "stack of guitar amplifiers stage lighting" }
  ],
  "investment": [
    {
      "name": "GA Floor",
      "price": "$45",
      "description": "Get in the pit and feel the bass.",
      "features": ["Standard Entry", "Floor Access", "Merch Access"],
      "popular": true
    },
    {
      "name": "VIP Backstage",
      "price": "$150",
      "description": "The ultimate fan experience.",
      "features": ["Early Entry", "Signed Poster", "Backstage Tour", "Private Bar"],
      "popular": false
    }
  ],
  "faqs": [
    { "question": "Are there age restrictions?", "answer": "This show is 18+ unless accompanied by a legal guardian." },
    { "question": "Can I bring a pro camera?", "answer": "Personal phones are welcome, but professional rigs are prohibited without a press pass." }
  ],
  "contact": {
    "phone": "TOUR-LINE-2026",
    "email": "booking@electrichavoc.com",
    "location": "Philadelphia, PA"
  }
}
</file>

<file path="src/data/business.jso9">
{
  "intelligence": {
    "industry": "AI Automation & High-End Web",
    "target_persona": "Fiverr Pro Clients",
    "tone_of_voice": "Technical, Bold, & Efficient"
  },
  "strategy": {
    "show_features": true,
    "show_process": true,
    "show_testimonials": true,
    "show_comparison": true,
    "show_gallery": true,
    "show_investment": true,
    "show_faqs": true
  },
  "settings": {
    "vibe": "rugged-industrial",
    "primary_color": "#4a5d4e",
    "cta_text": "START YOUR BUILD",
    "cta_link": "#contact",
    "radius": "0.5rem"
  },
  "brand": {
    "name": "Vibe-Engine Studio",
    "slug": "vibe-engine-studio",
    "tagline": "Custom Agency Quality at AI Speed",
    "logo_text": "V/E",
    "objection_handle": "Only 3 development slots remaining for March."
  },
  "menu": [
    { "label": "Services", "path": "#features" },
    { "label": "Protocol", "path": "#process" },
    { "label": "Portfolio", "path": "#gallery" },
    { "label": "Investment", "path": "#investment" }
  ],
  "hero": {
    "headline": "STOP BUILDING. START DEPLOYING.",
    "subtext": "We leverage high-end Astro architecture and AI logic to deliver professional-grade sites in 24 hours."
  },
  "features": [
    { "title": "Astro Logic", "description": "Zero-JS by default for 100/100 Core Web Vitals.", "icon_slug": "zap" },
    { "title": "Vibe-Switch", "description": "Instant aesthetic pivots via our proprietary CSS system.", "icon_slug": "layers" },
    { "title": "AI Integration", "description": "Content and imagery curated by trained LLM models.", "icon_slug": "cpu" }
  ],
  "processSteps": [
    { "title": "Vibe Intake", "description": "Select your visual DNA and core business data." },
    { "title": "AI Synthesis", "description": "Our engine maps your data to high-end Astro components." },
    { "title": "Fast Deploy", "description": "Global edge delivery via Netlify in under 24 hours." }
  ],
  "testimonials": [
    { "name": "Marcus Chen", "role": "Fiverr Pro Client", "content": "I've never seen a turnaround this fast with this level of code quality." }
  ],
  "comparison": {
    "headline": "The Engine vs. The Rest",
    "left_title": "Traditional Freelancer",
    "left_items": ["2-Week Wait Times", "Bloated WordPress Themes", "Manual Content Entry"],
    "right_title": "Vibe-Engine",
    "right_items": ["24-Hour Delivery", "Clean Astro/Tailwind Code", "AI-Powered Precision"]
  },
  "gallery": [
    { "src": "/images/project1.jpg", "alt": "SaaS Platform", "title": "Nexus AI", "category": "Web App" },
    { "src": "/images/project2.jpg", "alt": "Lawn Care", "title": "Elite Turf", "category": "Service Business" }
  ],
  "investment": [
    { "name": "The Sprint", "price": "$295", "features": ["Full Landing Page", "Netlify Hosting", "24h Delivery"], "popular": true }
  ],
  "faqs": [
    { "question": "How is it so fast?", "answer": "We use a pre-engineered component library and AI-driven data mapping." },
    { "question": "Can I edit the code?", "answer": "Yes, you get full access to the GitHub repository." }
  ],
  "contact": {
    "email": "hello@vibe-engine.com",
    "phone": "1-800-VIBE-AI"
  }
}
</file>

<file path="src/pages/services/[...slug].astro">
---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Footer from '../../components/Footer.astro';

// 1. Generate a new path for every service file
export async function getStaticPaths() {
  const serviceEntries = await getCollection('services');
  return serviceEntries.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

// 2. Get the data for the specific service being viewed
const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={entry.data.title}>
  <main class="py-20 px-6 max-w-4xl mx-auto">
    <header class="mb-12 border-b border-[var(--border)] pb-8">
      <h1 class="text-5xl font-extrabold mb-4 text-[var(--text-primary)]">
        {entry.data.title}
      </h1>
      <p class="text-xl text-[var(--text-secondary)] italic">
        {entry.data.description}
      </p>
    </header>

    <article class="prose prose-invert prose-indigo max-w-none">
      <Content />
    </article>
    
    <div class="mt-16">
        <a href="/contact" class="bg-[var(--accent)] text-white px-8 py-4 rounded-[var(--radius)] font-bold">
            Book this Service
        </a>
    </div>
  </main>
  <Footer />
</Layout>

<style is:global>
  /* Quick fix to make Markdown text look good without the Typography plugin */
  article h1 { @apply text-3xl font-bold mt-8 mb-4 text-[var(--text-primary)]; }
  article h2 { @apply text-2xl font-bold mt-8 mb-4 text-[var(--text-primary)]; }
  article p { @apply text-lg text-[var(--text-secondary)] mb-4 leading-relaxed; }
  article ul { @apply list-disc ml-6 mb-4 text-[var(--text-secondary)]; }
  article li { @apply mb-2; }
</style>
</file>

<file path="src/PROCESS.md">
üöÄ Fiverr Gig Delivery Process: AstroIsland Template

1. Project Initialization
[ ] Update src/data/business.json with client details (Name, Hero, Features).

[ ] Choose a vibe: "dark-neo" or "clean-light".

[ ] Drop client images into src/assets/client/.

[ ] Update src/data/business.json image paths to match filenames exactly.

2. Branding & Content
[ ] Update brand.name in JSON (affects Title, Header, and Footer).

[ ] Run npm run dev and check for any "Missing Image" placeholders.

[ ] Check color contrast (Ensure var(--accent) is readable on background).

3. Performance & SEO Check
[ ] Run npm run build locally to ensure no broken image paths.

[ ] Verify FeatureImage.astro is generating .webp versions in the dist folder.

[ ] Check Meta Tags in src/layouts/Layout.astro (Title/Description).

4. Deployment (Netlify)
[ ] Commit and Push to GitHub: git add . && git commit -m "feat: client update" && git push.

[ ] Verify build success in Netlify Dashboard.

[ ] Forms: Go to Netlify -> Forms and ensure the "contact" form is detected.

[ ] Optimization: Enable "Image Optimization" and "Minification" in Netlify build settings.

5. Delivery to Client
[ ] Generate Lighthouse Report (Target: 95-100 across the board).

[ ] Send live URL + Lighthouse Screenshot to client.

[ ] (Optional) Provide instructions for Netlify Form notification settings.

Pro Tip for Fiverr:
When you deliver the order, include the Lighthouse Score screenshot. Clients on Fiverr love seeing that "All Green" circle 100/100; it justifies the price of a modern static site over a slow WordPress site.

Would you like me to help you write a "Technical Specifications" snippet? You can paste it into your Fiverr Gig description to explain why your sites are faster than the competition.
</file>

<file path=".gitignore">
# build output
dist/
# generated types
.astro/

# dependencies
node_modules/

# logs
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*


# environment variables
.env
.env.production

# macOS-specific files
.DS_Store

# jetbrains setting folder
.idea/
</file>

<file path="astro.config.mjs">
import { defineConfig } from 'astro/config';
import react from '@astrojs/react';
import tailwind from '@astrojs/tailwind'; // <--- Must be here

export default defineConfig({
  integrations: [
    react(), 
    tailwind() // <--- Must be here
  ],
});
</file>

<file path="Contact.astro">

</file>

<file path="gen.json">
{"ok":true,"slug":"biff-buff-detailing","plan":{"intelligence":{"industry":"Mobile Car Detailing","target_persona":"Local owners of nice cars seeking premium, convenient car care","tone_of_voice":"premium but friendly"},"strategy":{"show_trustbar":true,"show_about":true,"show_features":true,"show_events":false,"show_process":true,"show_testimonials":true,"show_comparison":true,"show_gallery":true,"show_investment":true,"show_faqs":true,"show_service_area":true},"settings":{"vibe":"Luxury Noir","cta_text":"Get a Quote","cta_link":"#contact","cta_type":"anchor","menu":[{"label":"Home","path":"#home"},{"label":"About","path":"#about"},{"label":"Features","path":"#features"},{"label":"Process","path":"#process"},{"label":"Testimonials","path":"#testimonials"},{"label":"Comparison","path":"#comparison"},{"label":"Gallery","path":"#gallery"},{"label":"Investment","path":"#investment"},{"label":"FAQs","path":"#faqs"},{"label":"Service Area","path":"#service-area"},{"label":"Contact","path":"#contact"}]}},"business_json":{"intelligence":{"industry":"Mobile Car Detailing","target_persona":"Local owners of nice cars seeking premium, convenient car care","tone_of_voice":"premium but friendly"},"strategy":{"show_trustbar":true,"show_about":true,"show_features":true,"show_events":false,"show_process":true,"show_testimonials":true,"show_comparison":true,"show_gallery":true,"show_investment":true,"show_faqs":true,"show_service_area":true},"settings":{"vibe":"Luxury Noir","cta_text":"Get a Quote","cta_link":"#contact","cta_type":"anchor","secondary_cta_text":"","secondary_cta_link":"","menu":[{"label":"Home","path":"#home"},{"label":"About","path":"#about"},{"label":"Features","path":"#features"},{"label":"Process","path":"#process"},{"label":"Testimonials","path":"#testimonials"},{"label":"Comparison","path":"#comparison"},{"label":"Gallery","path":"#gallery"},{"label":"Investment","path":"#investment"},{"label":"FAQs","path":"#faqs"},{"label":"Service Area","path":"#service-area"},{"label":"Contact","path":"#contact"}]},"brand":{"name":"Biff-Buff Detailing","slug":"biff-buff-detailing","tagline":"Premium Mobile Car Detailing at Your Doorstep","email":"biff@gmail.com","phone":"215-555-5555","office_address":"Philadelphia, PA","objection_handle":"We come to you, saving you time while delivering a flawless finish that protects your investment."},"hero":{"headline":"Luxury Mobile Detailing That Comes To You","subtext":"Experience a premium finish without leaving your home or office.","image":{"alt":"Premium car detailing service with luxury finish","image_search_query":"premium mobile car detailing service luxury finish"}},"about":{"story_text":"Biff-Buff Detailing was founded to bring top-tier car care directly to your doorstep. We understand the value of your time and your vehicle, offering expert detailing that fits your schedule.","founder_note":"As a car enthusiast, I wanted to create a service that combines convenience with impeccable quality. Your car deserves the best, wherever you are.","years_experience":"Newly launched"},"features":[{"title":"Convenient Mobile Service","description":"We come to your home or office, saving you time and hassle.","icon_slug":"car"},{"title":"Premium Quality Finish","description":"Using only the highest-grade products for a flawless shine.","icon_slug":"sparkles"},{"title":"Eco-Friendly Products","description":"Safe for your car and the environment.","icon_slug":"leaf"},{"title":"Experienced Detailers","description":"Skilled professionals dedicated to perfection.","icon_slug":"user-check"},{"title":"Flexible Scheduling","description":"Book at a time that suits your busy lifestyle.","icon_slug":"calendar-alt"}],"contact":{"headline":"Get Your Premium Detailing Quote Today","subheadline":"Contact us to schedule your mobile car detailing service.","email_recipient":"biff@gmail.com","button_text":"Request a Quote","email":"biff@gmail.com","phone":"215-555-5555","office_address":"Philadelphia, PA"},"service_area":{"headline":"Our Service Area","description":"Proudly serving Philadelphia and surrounding neighborhoods with premium mobile car detailing.","locations":["Philadelphia","Nearby Suburbs"]}}}
</file>

<file path="netlify.toml">
[build]
  command = "npm run build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "22"

[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"
</file>

<file path="PROCESS.md">

</file>

<file path="README.md">
# Astro Starter Kit: Minimal

```sh
npm create astro@latest -- --template minimal
```

> üßë‚ÄçüöÄ **Seasoned astronaut?** Delete this file. Have fun!

## üöÄ Project Structure

Inside of your Astro project, you'll see the following folders and files:

```text
/
‚îú‚îÄ‚îÄ public/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ pages/
‚îÇ       ‚îî‚îÄ‚îÄ index.astro
‚îî‚îÄ‚îÄ package.json
```

Astro looks for `.astro` or `.md` files in the `src/pages/` directory. Each page is exposed as a route based on its file name.

There's nothing special about `src/components/`, but that's where we like to put any Astro/React/Vue/Svelte/Preact components.

Any static assets, like images, can be placed in the `public/` directory.

## üßû Commands

All commands are run from the root of the project, from a terminal:

| Command                   | Action                                           |
| :------------------------ | :----------------------------------------------- |
| `npm install`             | Installs dependencies                            |
| `npm run dev`             | Starts local dev server at `localhost:4321`      |
| `npm run build`           | Build your production site to `./dist/`          |
| `npm run preview`         | Preview your build locally, before deploying     |
| `npm run astro ...`       | Run CLI commands like `astro add`, `astro check` |
| `npm run astro -- --help` | Get help using the Astro CLI                     |

## üëÄ Want to learn more?

Feel free to check [our documentation](https://docs.astro.build) or jump into our [Discord server](https://astro.build/chat).
</file>

<file path="tailwind.config.mjs">
/** @type {import('tailwindcss').Config} */
export default {
    // This tells Tailwind to scan your Astro and React files for classes
    content: ['./src/**/*.{astro,html,js,jsx,md,mdx,svelte,ts,tsx,vue}'],
    theme: {
      extend: {
        // Your Vibe System handles colors, but you can add custom logic here later
      },
    },
    plugins: [],
  }
</file>

<file path="tsconfig.json">
{
  "extends": "astro/tsconfigs/strict",
  "include": [".astro/types.d.ts", "**/*"],
  "exclude": ["dist"]
}
</file>

<file path="apps/intake/functions/api/submit.js">
export async function onRequest(context) {
  const { request, env } = context;

  if (request.method !== "POST") {
    return new Response(JSON.stringify({ ok: false, error: "Use POST /api/submit" }), {
      status: 405,
      headers: { "content-type": "application/json" },
    });
  }

  try {
    const body = await request.json();

    const url = env.APPS_SCRIPT_WEBAPP_URL;
    const factoryKey = env.FACTORY_KEY;

    if (!url) throw new Error("Missing APPS_SCRIPT_WEBAPP_URL env var");
    if (!factoryKey) throw new Error("Missing FACTORY_KEY env var");

    const payload = {
      factory_key: factoryKey,
      business_json: body.business_json,
      client_email: body.client_email || body.business_json?.brand?.email || ""
    };

    const res = await fetch(url, {
      method: "POST",
      headers: { "content-type": "application/json" },
      body: JSON.stringify(payload)
    });

    const text = await res.text();
    if (!res.ok) throw new Error(`Apps Script error ${res.status}: ${text}`);

    return new Response(text, { headers: { "content-type": "application/json" } });
  } catch (err) {
    return new Response(JSON.stringify({ ok: false, error: String(err?.message || err) }), {
      status: 500,
      headers: { "content-type": "application/json" }
    });
  }
}
</file>

<file path="scripts/fetch-unsplash-images.mjs">
import fs from "fs";
import path from "path";
import axios from "axios";

const slug = process.argv[2];
if (!slug) {
  console.error("Usage: node scripts/fetch-unsplash-images.mjs <client_slug>");
  process.exit(1);
}

const ACCESS_KEY = process.env.UNSPLASH_ACCESS_KEY;
if (!ACCESS_KEY) {
  console.error("Missing UNSPLASH_ACCESS_KEY env var.");
  process.exit(1);
}

const root = process.cwd();
const clientDir = path.join(root, "clients", slug);
const businessPath = path.join(clientDir, "business.json");
const clientAssetsDir = path.join(clientDir, "assets", "images");

if (!fs.existsSync(businessPath)) {
  console.error(`Missing ${businessPath} (run merge-json first)`);
  process.exit(1);
}

const data = JSON.parse(fs.readFileSync(businessPath, "utf-8"));

if (!fs.existsSync(clientAssetsDir)) {
  fs.mkdirSync(clientAssetsDir, { recursive: true });
}

const brandSlug =
  data.brand?.slug ||
  (data.brand?.name || "brand")
    .toLowerCase()
    .replace(/'/g, "")        // MATCH Hero.astro
    .replace(/[^a-z0-9]/g, "-"); // MATCH Hero.astro

async function searchUnsplashPhoto(query) {
  const res = await axios.get("https://api.unsplash.com/search/photos", {
    params: { query, orientation: "landscape", per_page: 1 },
    headers: { Authorization: `Client-ID ${ACCESS_KEY}` },
    timeout: 30000
  });
  const first = res.data?.results?.[0];
  // Use "regular" as you did; could switch to "full" if you want higher res.
  return first?.urls?.regular || null;
}

function buildFallbackQueries(query, industryFallback) {
  const q = (query || "").trim();
  const fallbacks = [];

  if (q) fallbacks.push(q);

  if (q) {
    fallbacks.push(
      q
        .replace(/\b(close-up|closeup|professional|premium|luxury|high-end|highend)\b/gi, "")
        .replace(/\s+/g, " ")
        .trim()
    );
  }

  if (q) {
    const tokens = q.split(/\s+/).filter(Boolean);
    fallbacks.push(tokens.slice(0, 4).join(" "));
    fallbacks.push(tokens.slice(0, 2).join(" "));
  }

  if (industryFallback) fallbacks.push(industryFallback);

  // last safe defaults
  fallbacks.push("modern service business");
  fallbacks.push("professional team at work");
  fallbacks.push("clean minimal office");

  return [...new Set(fallbacks)].filter(Boolean);
}

async function fetchUnsplashImage(query, filename) {
  const filePath = path.join(clientAssetsDir, filename);

  if (fs.existsSync(filePath)) {
    console.log(`- Skipping ${filename} (already exists)`);
    return;
  }

  const fallbacks = buildFallbackQueries(query, data?.intelligence?.industry);

  let downloadUrl = null;
  for (const q of fallbacks) {
    console.log(`üîç Unsplash: "${q}"`);
    try {
      downloadUrl = await searchUnsplashPhoto(q);
      if (downloadUrl) break;
    } catch (e) {
      const msg = e?.response?.data?.errors?.[0] || e.message;
      console.log(`  ‚Ü≥ search error: ${msg}`);
    }
  }

  if (!downloadUrl) {
    console.log(`! No results for: ${query}`);
    return;
  }

  const res = await axios({ url: downloadUrl, method: "GET", responseType: "arraybuffer", timeout: 60000 });
  fs.writeFileSync(filePath, Buffer.from(res.data));
  console.log(`‚úÖ Saved ${filename}`);
}

function ensureGallerySlots(dataObj, desiredCount = 6) {
  // If gallery is missing/empty, generate placeholder items so preview looks premium.
  if (!dataObj.gallery) {
    dataObj.gallery = { enabled: true, items: [] };
  }

  const g = dataObj.gallery;
  const isLegacyArray = Array.isArray(g);
  if (isLegacyArray) return dataObj; // leave legacy alone

  if (!Array.isArray(g.items)) g.items = [];
  while (g.items.length < desiredCount) {
    g.items.push({
      alt: "Project photo",
      image_search_query: ""
    });
  }

  if (typeof g.computed_count !== "number") g.computed_count = desiredCount;
  if (!g.image_source) g.image_source = {};
  return dataObj;
}

async function run() {
  console.log(`üöÄ Image Factory (CI): ${brandSlug}`);

  // Ensure gallery has some slots for premium preview (optional but recommended)
  ensureGallerySlots(data, 6);
  fs.writeFileSync(businessPath, JSON.stringify(data, null, 2));

  // HERO
  const heroQuery = data?.hero?.image?.image_search_query || data?.hero?.image?.alt || data?.intelligence?.industry;
  if (heroQuery) {
    await fetchUnsplashImage(heroQuery, `${brandSlug}-hero.jpg`);
  } else {
    console.log("‚ö†Ô∏è No hero query/alt/industry found.");
  }

  // GALLERY
  const galleryObj = data.gallery;
  const isLegacyArray = Array.isArray(galleryObj);
  const galleryEnabled = isLegacyArray ? true : galleryObj?.enabled !== false;
  const galleryItems = isLegacyArray ? galleryObj : (galleryObj?.items || []);

  if (galleryEnabled && galleryItems.length > 0) {
    const desiredCount =
      (!isLegacyArray && typeof galleryObj?.computed_count === "number")
        ? galleryObj.computed_count
        : galleryItems.length;

    const itemsToProcess = galleryItems.slice(0, Math.max(0, desiredCount));
    const globalQuery =
      (!isLegacyArray && galleryObj?.image_source?.image_search_query)
        ? galleryObj.image_source.image_search_query
        : "";

    for (const [index, item] of itemsToProcess.entries()) {
      const q =
        item?.image_search_query ||
        globalQuery ||
        item?.alt ||
        data?.intelligence?.industry ||
        "professional services";

      await fetchUnsplashImage(q, `${brandSlug}-project-${index}.jpg`);
    }
  } else {
    console.log("‚ÑπÔ∏è Gallery disabled or empty.");
  }

  console.log("‚úÖ Images ready under:", clientAssetsDir);
}

run().catch((e) => {
  console.error("Fatal:", e);
  process.exit(1);
});
</file>

<file path="src/components/Events.astro">
---
const { events = [], headline = "Upcoming Events", settings = {} } = Astro.props;

const defaultHref = settings?.cta_link || "#contact";
const defaultButtonText = settings?.events_button_text || "Info";

const isExternal = (href = "") => /^https?:\/\//i.test(href);
---

<section id="events" class="py-24 px-6 bg-[var(--bg-color)]">
  <div class="max-w-4xl mx-auto">
    <h2 class="text-4xl font-bold mb-12 text-center tracking-tight text-[var(--text-primary)]">
      {headline}
    </h2>

    <div class="space-y-4">
      {events.map((event) => {
        const href = event?.link || defaultHref;
        const btn = event?.button_text || defaultButtonText;
        const external = isExternal(href);

        return (
          <div class="flex flex-col md:flex-row items-center justify-between p-6 rounded-[var(--radius)] border border-[var(--border)] bg-[var(--bg-card)] hover:border-[var(--accent)] transition-colors group">
            <div class="flex items-center gap-8 text-center md:text-left">
              <div class="text-2xl font-black text-[var(--accent)] uppercase w-20">
                {event.date}
              </div>
              <div>
                <h3 class="text-xl font-bold text-[var(--text-primary)]">{event.venue}</h3>
                <p class="text-[var(--text-secondary)]">{event.location}</p>
              </div>
            </div>

            <a
              href={href}
              target={external ? "_blank" : undefined}
              rel={external ? "noopener noreferrer" : undefined}
              class="mt-4 md:mt-0 px-6 py-2 bg-[var(--text-primary)] text-[var(--bg-color)] rounded-full font-bold hover:scale-105 transition-transform"
            >
              {btn}
            </a>
          </div>
        );
      })}
    </div>
  </div>
</section>
</file>

<file path="src/components/VibeSwitcher.astro">
---
/* VibeSwitcher: Updated to the Full 8-Vibe Catalog */
const vibes = [
  { id: 'zenith-earth', label: 'Zenith Earth', icon: 'üåø' },
  { id: 'midnight-tech', label: 'Midnight Tech', icon: 'üíé' },
  { id: 'rugged-industrial', label: 'Rugged Industrial', icon: 'üöß' },
  { id: 'maestro-classic', label: 'Maestro Classic', icon: 'üéª' },
  { id: 'neon-cyber', label: 'Neon Cyber', icon: 'üïπÔ∏è' },
  { id: 'clinical-minimal', label: 'Clinical Minimal', icon: 'üè•' },
  { id: 'solar-flare', label: 'Solar Flare', icon: '‚ö°' },
  { id: 'vintage-boutique', label: 'Vintage Boutique', icon: 'üè∫' }
];
---

<div id="vibe-switcher-container" class="fixed bottom-6 left-6 z-[9999] group print:hidden">
  <button 
    id="vibe-master-btn" 
    class="w-14 h-14 bg-black text-white rounded-full shadow-[0_0_20px_rgba(0,0,0,0.5)] flex items-center justify-center hover:scale-110 transition-all duration-300 border border-white/20 active:scale-90"
    title="Switch Brand Vibe"
  >
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
    </svg>
  </button>

  <div 
    id="vibe-menu" 
    class="absolute bottom-16 left-0 flex flex-col gap-1 p-2 bg-black/95 backdrop-blur-2xl rounded-2xl border border-white/10 shadow-2xl scale-90 opacity-0 pointer-events-none transition-all duration-300 origin-bottom-left max-h-[70vh] overflow-y-auto"
  >
    <p class="text-[9px] font-black uppercase tracking-[0.2em] text-white/40 px-3 py-2 border-b border-white/5 mb-1">Brand Catalog</p>
    {vibes.map((vibe) => (
      <button 
        class="vibe-option flex items-center gap-3 px-4 py-2.5 rounded-xl hover:bg-white/10 text-white transition-colors text-left whitespace-nowrap"
        data-vibe-id={vibe.id}
      >
        <span class="text-base">{vibe.icon}</span>
        <span class="text-[10px] font-bold uppercase tracking-widest">{vibe.label}</span>
      </button>
    ))}
  </div>
</div>

<style>
  /* Custom scrollbar for the menu if it gets too tall */
  #vibe-menu::-webkit-scrollbar { width: 4px; }
  #vibe-menu::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }

  #vibe-switcher-container.active #vibe-menu {
    scale: 1;
    opacity: 1;
    pointer-events: auto;
  }

  #vibe-switcher-container.active #vibe-master-btn {
    background-color: #ffffff;
    color: #000000;
  }
</style>

<script>
  const container = document.getElementById('vibe-switcher-container');
  const masterBtn = document.getElementById('vibe-master-btn');
  const options = document.querySelectorAll('.vibe-option');
  const html = document.documentElement;

  masterBtn?.addEventListener('click', (e) => {
    e.stopPropagation();
    container?.classList.toggle('active');
  });

  document.addEventListener('click', () => {
    container?.classList.remove('active');
  });

  options.forEach(button => {
    button.addEventListener('click', () => {
      const selectedVibe = button.getAttribute('data-vibe-id');
      if (selectedVibe) {
        html.setAttribute('data-vibe', selectedVibe);
        // This persists the demo choice across local sessions
        localStorage.setItem('preferred-vibe', selectedVibe);
      }
    });
  });

  // Load saved vibe on boot
  const savedVibe = localStorage.getItem('preferred-vibe');
  if (savedVibe) {
    html.setAttribute('data-vibe', savedVibe);
  }
</script>
</file>

<file path="src/data/business.jso14">
{
  "intelligence": {
    "industry": "Mobile car detailing service",
    "target_persona": "Local car owners with well-maintained sedans and SUVs who want a premium detail at home or work",
    "tone_of_voice": "Premium, confident, friendly, and appointment-focused"
  },
  "strategy": {
    "show_trustbar": false,
    "show_about": true,
    "show_features": true,
    "show_process": false,
    "show_testimonials": false,
    "show_comparison": false,
    "show_gallery": true,
    "show_investment": false,
    "show_faqs": false,
    "show_service_area": true
  },
  "settings": {
    "vibe": "Luxury Noir",
    "cta_text": "Book an Appointment",
    "cta_link": "#contact",
    "cta_type": "anchor",
    "secondary_cta_text": "Call Now",
    "secondary_cta_link": "tel:2155555555",
    "menu": [
      { "label": "Home", "path": "/" },
      { "label": "Services", "path": "#services" },
      { "label": "Work", "path": "#gallery" },
      { "label": "Contact", "path": "#contact" }
    ]
  },
  "brand": {
    "name": "Biff-Buff",
    "slug": "biff-buff",
    "tagline": "Premium Mobile Car Detailing ‚Äî At Your Home or Work",
    "email": "biff@gmail.com",
    "phone": "215-555-5555",
    "objection_handle": "You don‚Äôt have to drive or wait at a shop. I bring professional tools and careful technique to your driveway or workplace, so your vehicle looks its best on your schedule."
  },
  "hero": {
    "headline": "Premium Mobile Car Detailing ‚Äî At Your Home or Work",
    "subtext": "High-end interior and exterior detailing for sedans and SUVs. Convenient, careful, and appointment-based ‚Äî serving local owners who want their vehicle looking showroom-clean without leaving home.",
    "image": {
      "alt": "A luxury SUV being professionally detailed on a driveway",
      "image_search_query": "mobile car detailing professional working on luxury suv driveway close-up"
    }
  },
  "about": {
    "story_text": "Biff-Buff is a mobile detailing service built for local owners who care about their vehicles. Instead of wasting time at a shop, you get professional-level detailing at your home or workplace ‚Äî with the tools, products, and attention to detail your car deserves.",
    "founder_note": "I treat every vehicle like it‚Äôs my own ‚Äî from the first rinse to the final wipe-down. My goal is simple: make your car look incredible, and make the process effortless for you.",
    "years_experience": "5"
  },
  "features": [
    {
      "title": "Mobile Convenience",
      "description": "I come to your home or workplace with professional equipment ‚Äî you keep your day moving while your car gets detailed.",
      "icon_slug": "map-pin"
    },
    {
      "title": "Interior Deep Clean",
      "description": "Vacuuming, wipe-downs, and focused interior cleaning to restore a clean, fresh cabin feel without shortcuts.",
      "icon_slug": "sparkles"
    },
    {
      "title": "Exterior Detail Finish",
      "description": "Thorough wash and finish for a crisp, glossy look ‚Äî perfect for daily drivers and weekend cars alike.",
      "icon_slug": "droplets"
    },
    {
      "title": "Care for Nice Cars",
      "description": "Detail-minded approach designed for owners who want careful handling and consistent, high-quality results.",
      "icon_slug": "shield-check"
    }
  ],
  "gallery": {
    "enabled": true,
    "title": "The Lab",
    "layout": null,
    "show_titles": true,
    "strategy": {
      "primary_goal": "conversion",
      "show_gallery": true
    },
    "image_source": {
      "provider": "unsplash",
      "image_search_query": "professional car detailing before and after interior exterior close-up",
      "filename_pattern": "{brandSlug}-project-{index}.jpg",
      "target_folder": "/src/assets/images/"
    },
    "computed_count": 5,
    "computed_layout": "grid",
    "items": [
      {
        "title": "Paint-Safe Hand Wash",
        "caption": "A careful exterior clean that brings back shine without harsh shortcuts.",
        "tag": "Exterior",
        "image_search_query": "professional hand car wash detailing foam luxury car driveway"
      },
      {
        "title": "Interior Refresh",
        "caption": "Clean, tidy cabin feel ‚Äî the kind you notice immediately when you open the door.",
        "tag": "Interior",
        "image_search_query": "car detailing interior cleaning vacuum seats dashboard close-up"
      },
      {
        "title": "Detail Brush Precision",
        "caption": "Focused work on the small areas that separate a quick wash from a real detail.",
        "tag": "Precision",
        "image_search_query": "car detailing brush cleaning vents badges trim close-up"
      },
      {
        "title": "SUV Ready Finish",
        "caption": "Premium mobile detailing results for SUVs ‚Äî at home or at work.",
        "tag": "SUV",
        "image_search_query": "mobile car detailing luxury suv exterior shine driveway"
      },
      {
        "title": "Gloss & Reflection",
        "caption": "A crisp finish that looks great in sunlight and under street lights.",
        "tag": "Finish",
        "image_search_query": "detailed car paint glossy reflection close-up after detailing"
      }
    ]
  },
  "service_area": {
    "main_city": "Philadelphia, PA",
    "surrounding_cities": [
      "Bala Cynwyd",
      "Manayunk",
      "Roxborough",
      "Ardmore",
      "Bryn Mawr",
      "Haverford",
      "Conshohocken",
      "King of Prussia"
    ],
    "travel_note": "Outside these areas? I can often accommodate extended travel with a custom quote.",
    "cta_text": "Check Availability",
    "cta_link": "#contact",
    "map_search_query": "mobile car detailing Philadelphia PA"
  },
  "contact": {
    "headline": "Book Your Mobile Detail",
    "subheadline": "Tell me what you drive and where you‚Äôd like the detail done. I‚Äôll confirm availability and lock in your appointment.",
    "email": "biff@gmail.com",
    "phone": "215-555-5555",
    "email_recipient": "biff@gmail.com",
    "button_text": "Request an Appointment"
  }
}
</file>

<file path="src/lib/icons.js">
/* ICON DICTIONARY 
  High-performance, single-path SVGs for the Vibe System.
  Standardized for 2026 AI-Ready Templates.
*/

export const iconLibrary = {
  // --- AI & High-Tech (Vibe-Engine Core) ---
  zap: "M13 2L3 14h9l-1 8 10-12h-9l1-8z",
  cpu: "M4 7a2 2 0 012-2h12a2 2 0 012 2v10a2 2 0 01-2 2H6a2 2 0 01-2-2V7z M9 5V3 M15 5V3 M9 21v-2 M15 21v-2 M21 9h2 M21 15h2 M1 9h2 M1 15h2 M9 9h6v6H9z",
  layers: "M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5",
  rocket: "M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.4 1.22-1.3 1.22-1.3l2-2-5-5-2 2s-.9.51-1.22 1.22z M15 3l-4 4 6 6 4-4-6-6z M19 9l-3 3",

  // --- Nature & Garden (Elite Lawns / Landscaping) ---
  leaf: "M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z M2 21c0-3 1.85-5.36 5.08-6",
  sprout: "M12 22V8M5 12c0-3.3 2.7-6 6-6s6 2.7 6 6M5 12a6 6 0 0 1 0-12",
  sun: "M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0 M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41",
  scissors: "M3 7l8.445 8.5a2.5 2.5 0 1 1-3.5 3.5L3 14 M21 7l-8.445 8.5a2.5 2.5 0 1 0 3.5 3.5L21 14 M12 12v.01",

  // --- Trades & Logistics (Joe's Junk / Construction / Auto) ---
  truck: "M1 14h15V4H1v10zm15 0h3l3 3v2h-6v-5zm-2 5a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm10 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z",
  hammer: "M14.5 12.5L21 6l-4.5-4.5L10 8l4.5 4.5zm-4 4l-4 4L2 16l4-4 4 4z",
  wrench: "M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",
  trash: "M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",
  
  // --- Wellness & Specialized (Salons / Cleaners / Home) ---
  sparkles: "M12 3l1.912 5.813a2 2 0 001.275 1.275L21 12l-5.813 1.912a2 2 0 00-1.275 1.275L12 21l-1.912-5.813a2 2 0 00-1.275-1.275L3 12l5.813-1.912a2 2 0 001.275-1.275L12 3z",
  heart: "M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z",
  award: "M12 15l-2 5L9 9l11 4-5 2zm0 0l2 5 3-11-11 4 5 2z",
  users: "M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2 M9 7a4 4 0 1 0 0-8 4 4 0 0 0 0 8z M23 21v-2a4 4 0 0 0-3-3.87 M16 3.13a4 4 0 0 1 0 7.75",
  map: "M1 6v16l7-4 8 4 7-4V2l-7 4-8-4-7 4zm7-4v16m8-12v16",

  // --- Business & Trust ---
  shield: "M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",
  star: "M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z",
  check: "M20 6L9 17l-5-5",
  coins: "M12 1v22M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",
  briefcase: "M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",
  clock: "M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm0-16v6l4 2",
  phone: "M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
};
</file>

<file path="apps/intake/netlify/functions/generate.mjs">
function normalizeSlug(s) {
    return String(s || "")
      .toLowerCase()
      .replace(/'/g, "")
      .replace(/[^a-z0-9]/g, "-")
      .replace(/-+/g, "-")
      .replace(/^-|-$/g, "");
  }
  
  function must(obj, keys) {
    for (const k of keys) if (!(k in obj)) throw new Error(`Missing key: ${k}`);
  }
  
  async function openaiJson({ model, messages, temperature = 0.3 }) {
    const apiKey = process.env.OPENAI_API_KEY;
    if (!apiKey) throw new Error("Missing OPENAI_API_KEY env var");
  
    const res = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        Authorization: `Bearer ${apiKey}`,
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        model,
        temperature,
        response_format: { type: "json_object" },
        messages,
      }),
    });
  
    const text = await res.text();
    if (!res.ok) throw new Error(`OpenAI error ${res.status}: ${text}`);
  
    const data = JSON.parse(text);
    const content = data?.choices?.[0]?.message?.content;
    if (!content) throw new Error("OpenAI returned no content");
    return JSON.parse(content);
  }
  
  /* =========================
     Schema adapter (fixes key names + required fields)
  ========================= */
  
  function toMenuObjects(menuPaths) {
    const labelMap = {
      "#home": "Home",
      "#about": "About",
      "#features": "Services",
      "#events": "Schedule",
      "#process": "Process",
      "#testimonials": "Reviews",
      "#comparison": "Compare",
      "#gallery": "Gallery",
      "#investment": "Pricing",
      "#faqs": "FAQ",
      "#service-area": "Service Area",
      "#contact": "Contact",
    };
  
    return (menuPaths || [])
      .filter(Boolean)
      .map((p) => ({ label: labelMap[p] || "Section", path: p }));
  }
  
  function ensureStrategyBooleans(strategy = {}) {
    const out = {
      show_trustbar: false,
      show_about: true,
      show_features: true,
      show_events: false,
      show_process: true,
      show_testimonials: true,
      show_comparison: false,
      show_gallery: false,
      show_investment: false,
      show_faqs: true,
      show_service_area: true,
      ...strategy,
    };
    for (const k of Object.keys(out)) out[k] = Boolean(out[k]);
    return out;
  }
  
  function adaptToSchema({ draft, input, plan }) {
    const site_for = input.site_for || "";
    const tone_hint = input.tone_hint || "";
    const goal = input.goal || "Contact";
  
    // Menu paths may be strings from older outputs; prefer plan.settings.menu then plan.strategy.menu
    const menuPaths =
      plan?.settings?.menu ||
      plan?.strategy?.menu ||
      draft?.settings?.menu ||
      draft?.strategy?.menu ||
      ["#home", "#about", "#features", "#process", "#faqs", "#service-area", "#contact"];
  
    // Settings CTA
    let cta_link = "#contact";
    let cta_type = "anchor";
    let cta_text =
      goal === "Call" ? "Call Now" : goal === "Quote" ? "Request a Quote" : goal === "Book" ? "Book Now" : "Contact Us";
  
    // If you later support booking URLs in intake, set cta_type="external" and cta_link=<url>.
    // For now, always anchor to contact.
    if (goal === "Call" && !(draft?.brand?.phone || input.phone)) {
      cta_text = "Contact Us";
      cta_link = "#contact";
      cta_type = "anchor";
    }
  
    // Intelligence (required by schema)
    const industry =
      draft?.intelligence?.industry ||
      (site_for.toLowerCase().includes("detailing")
        ? "mobile car detailing"
        : site_for
        ? site_for
        : "local services");
  
    const target_persona =
      draft?.intelligence?.target_persona ||
      "Local customers who want a reliable, high-quality service";
  
    const tone_of_voice =
      draft?.intelligence?.tone_of_voice ||
      (tone_hint ? tone_hint : "Professional, friendly, and clear");
  
    const settings = {
      vibe: draft?.settings?.vibe || plan?.settings?.vibe || "Modern Minimal",
      cta_text,
      cta_link,
      cta_type,
      menu: toMenuObjects(menuPaths),
    };
  
    // Strategy booleans (required by engine logic)
    const strategy = ensureStrategyBooleans(draft?.strategy || plan?.strategy || {});
  
    // Brand (schema-required: name, tagline, email)
    const brand = {
      name: draft?.brand?.name || input.business_name || "Your Business",
      slug: draft?.brand?.slug || "",
      tagline:
        draft?.brand?.tagline ||
        `Trusted ${industry}${input.main_city ? ` in ${input.main_city}` : ""}`,
      email: draft?.brand?.email || input.email || "",
      phone: draft?.brand?.phone || input.phone || "",
      office_address: draft?.brand?.office_address || "",
      objection_handle: draft?.brand?.objection_handle || "",
    };
  
    // Hero (schema-required: headline, subtext, image)
    const hero = {
      headline: draft?.hero?.headline || "Premium service, made easy",
      subtext:
        draft?.hero?.subtext ||
        draft?.hero?.subheadline ||
        draft?.hero?.subheadline ||
        "Fast, simple, and professional from first contact to completion.",
      image: draft?.hero?.image || {
        alt: "Service professional at work",
        image_search_query: "service professional working outdoors",
      },
    };
  
    // About (schema-required: story_text, founder_note, years_experience)
    const aboutText =
      draft?.about?.story_text ||
      draft?.about?.content ||
      "We‚Äôre built around quality work, clear communication, and a great customer experience.";
  
    const about = {
      story_text: aboutText,
      founder_note: draft?.about?.founder_note || "Owner-led, detail-focused, and committed to doing it right.",
      years_experience: draft?.about?.years_experience || "Newly launched",
    };
  
    // Features (schema critical: array of items with title/description/icon_slug)
    let features = Array.isArray(draft?.features) ? draft.features : [];
    if (features.length < 3) {
      features = [
        ...features,
        { title: "Easy scheduling", description: "Fast replies and simple booking.", icon_slug: "clock" },
        { title: "Quality-first work", description: "Careful, consistent results you can trust.", icon_slug: "check" },
        { title: "Friendly support", description: "Clear communication from start to finish.", icon_slug: "phone" },
      ].slice(0, 3);
    }
  
    // Contact (schema required: headline, subheadline, email_recipient, button_text)
    const contact = {
      headline: draft?.contact?.headline || "Get in touch",
      subheadline: draft?.contact?.subheadline || "Tell us what you need and we‚Äôll respond shortly.",
      email_recipient: draft?.contact?.email_recipient || brand.email,
      button_text: draft?.contact?.button_text || settings.cta_text,
      email: draft?.contact?.email || brand.email,
      phone: draft?.contact?.phone || brand.phone,
      office_address: draft?.contact?.office_address || brand.office_address,
    };
  
    // Optional service area (only if strategy says so)
    const out = {
      intelligence: { industry, target_persona, tone_of_voice },
      strategy,
      settings,
      brand,
      hero,
      about,
      features,
      contact,
    };
  
    if (strategy.show_service_area) {
      out.service_area = {
        main_city: input.main_city || "Our Region",
        surrounding_cities: [],
        travel_note: "Outside these areas? We offer custom quotes for extended travel.",
        cta_text: settings.cta_text,
        cta_link: settings.cta_link,
      };
    }
  
    // Optional events (only if enabled and we have 3+ items)
    if (strategy.show_events && Array.isArray(draft?.events) && draft.events.length >= 3) {
      out.events = draft.events;
    } else {
      // Ensure show_events can't be true without events
      out.strategy.show_events = false;
    }
  
    return out;
  }
  
  /* =========================
     Netlify Function
  ========================= */
  
  export default async (req) => {
    try {
      const input = await req.json();
  
      const site_for = input.site_for || "";
      const business_name = input.business_name || "";
      const email = input.email || "";
      const phone = input.phone || "";
      const main_city = input.main_city || "";
      const goal = input.goal || "Contact";
      const tone_hint = input.tone_hint || "";
  
      // Pass A: Architect
      const plan = await openaiJson({
        model: "gpt-4.1-mini",
        temperature: 0.3,
        messages: [
          {
            role: "user",
            content: `
  You are SiteForge "Architect".
  Return JSON ONLY with keys: intelligence, strategy, settings.
  
  Rules:
  - settings.vibe must be one of:
    "Midnight Tech","Zenith Earth","Vintage Boutique","Rugged Industrial","Modern Minimal","Luxury Noir","Legacy Professional","Solar Flare"
  - settings.menu must be a list of anchor paths from:
    #home,#about,#features,#events,#process,#testimonials,#comparison,#gallery,#investment,#faqs,#service-area,#contact
  - Always include #home and #contact.
  - show_events only if you can populate 3+ events items later; otherwise false.
  
  User input:
  site_for: ${JSON.stringify(site_for)}
  business_name: ${JSON.stringify(business_name)}
  goal: ${JSON.stringify(goal)}
  tone_hint: ${JSON.stringify(tone_hint)}
  main_city: ${JSON.stringify(main_city)}
            `.trim(),
          },
        ],
      });
  
      must(plan, ["intelligence", "strategy", "settings"]);
  
      // Pass B: Builder (draft may not match schema exactly ‚Äî adapter fixes)
      const draft = await openaiJson({
        model: "gpt-4.1-mini",
        temperature: 0.4,
        messages: [
          {
            role: "user",
            content: `
  You are SiteForge "Builder".
  Return ONE JSON object that includes these keys:
  intelligence, strategy, settings, brand, hero, about, features, contact
  
  Hard rules:
  - Do NOT invent awards/certs/years/pricing unless user provided.
  - features: 3‚Äì8 items with title, description, icon_slug.
    icon_slug must be one of:
    zap,cpu,layers,rocket,leaf,sprout,sun,scissors,truck,hammer,wrench,trash,sparkles,heart,award,users,map,shield,star,check,coins,briefcase,clock,phone
  - hero.image: alt + image_search_query (4‚Äì8 words: subject action context).
  - contact must include headline, subheadline, email_recipient, button_text.
  
  Plan (must follow):
  ${JSON.stringify(plan)}
  
  Authoritative facts from user:
  business_name: ${JSON.stringify(business_name)}
  email: ${JSON.stringify(email)}
  phone: ${JSON.stringify(phone)}
  main_city: ${JSON.stringify(main_city)}
  goal: ${JSON.stringify(goal)}
  site_for: ${JSON.stringify(site_for)}
  
  JSON ONLY. No markdown.
            `.trim(),
          },
        ],
      });
  
      must(draft, ["intelligence", "strategy", "settings", "brand", "hero", "about", "features", "contact"]);
  
      // Lock slug and adapt to CURRENT master schema
      const slug = normalizeSlug(draft?.brand?.slug || draft?.brand?.name || business_name || "brand");
      const business_json = adaptToSchema({ draft, input, plan });
      business_json.brand.slug = slug;
  
      // Ensure email/phone are present in brand if provided
      if (email && !business_json.brand.email) business_json.brand.email = email;
      if (phone && !business_json.brand.phone) business_json.brand.phone = phone;
  
      return new Response(JSON.stringify({ ok: true, slug, plan, business_json }), {
        headers: { "content-type": "application/json" },
      });
    } catch (err) {
      return new Response(JSON.stringify({ ok: false, error: String(err?.message || err) }), {
        status: 500,
        headers: { "content-type": "application/json" },
      });
    }
  };
</file>

<file path="apps/intake/netlify/functions/submit.mjs">
export default async (req) => {
    try {
      const body = await req.json();
  
      const url = process.env.APPS_SCRIPT_WEBAPP_URL || globalThis.APPS_SCRIPT_WEBAPP_URL;
      const factoryKey = process.env.FACTORY_KEY || globalThis.FACTORY_KEY;
      
  
      if (!url) throw new Error("Missing APPS_SCRIPT_WEBAPP_URL env var");
      if (!factoryKey) throw new Error("Missing FACTORY_KEY env var");
  
      const payload = {
        factory_key: factoryKey,
        business_json: body.business_json,
        client_email: body.client_email || body.business_json?.brand?.email || ""
      };
  
      const res = await fetch(url, {
        method: "POST",
        headers: { "content-type": "application/json" },
        body: JSON.stringify(payload)
      });
  
      const text = await res.text();
      if (!res.ok) throw new Error(`Apps Script error ${res.status}: ${text}`);
  
      return new Response(text, {
        headers: { "content-type": "application/json" }
      });
    } catch (err) {
      return new Response(JSON.stringify({ ok: false, error: String(err?.message || err) }), {
        status: 500,
        headers: { "content-type": "application/json" }
      });
    }
  };
</file>

<file path="clients/biff-buff-detailing/business.base.json">
{"intelligence":{"business_name":"Biff-Buff Detailing","site_for":"A mobile car detailing service that comes to homes and offices. Customers are local owners of nice cars who want a premium finish without wasting time.","goal":"Quote","tone_hint":"premium but friendly","main_city":"Philadelphia, PA"},"strategy":{"menu":["#home","#about","#features","#process","#testimonials","#investment","#faqs","#service-area","#contact"],"show_events":false},"settings":{"vibe":"Luxury Noir","menu":["#home","#about","#features","#process","#testimonials","#investment","#faqs","#service-area","#contact"]},"brand":{"logo_text":"Biff-Buff Detailing","tagline":"Premium Mobile Car Detailing at Your Doorstep","colors":{"primary":"#1a1a1a","secondary":"#c0a060","accent":"#ffffff"},"font_family":"Montserrat, sans-serif","slug":"biff-buff-detailing","email":"biff@gmail.com","phone":"215-555-5555"},"hero":{"headline":"Experience Luxury Mobile Car Detailing","subheadline":"We bring the showroom shine right to your home or office.","button_text":"Get a Quote","image":{"alt":"Professional detailing technician polishing luxury car","image_search_query":"professional detailing technician polishing luxury car outdoors"}},"about":{"headline":"About Biff-Buff Detailing","content":"Biff-Buff Detailing is dedicated to providing premium mobile car detailing services with convenience and care. We specialize in delivering a flawless finish to luxury vehicles at your home or workplace, saving you time without compromising quality."},"features":[{"title":"Premium Mobile Service","description":"We come to you, whether at home or office, providing top-tier detailing without disrupting your schedule.","icon_slug":"truck"},{"title":"Expert Care for Luxury Cars","description":"Our experienced technicians use the finest products and techniques to protect and enhance your vehicle‚Äôs finish.","icon_slug":"shield"},{"title":"Eco-Friendly Products","description":"We use environmentally safe cleaning solutions that are tough on dirt but gentle on your car and the planet.","icon_slug":"leaf"},{"title":"Flexible Scheduling","description":"Book appointments that fit your busy lifestyle with easy online scheduling and prompt service.","icon_slug":"clock"},{"title":"Comprehensive Detailing Packages","description":"From exterior wash to interior deep cleaning, choose the package that suits your car‚Äôs needs.","icon_slug":"layers"}],"contact":{"headline":"Get in Touch","subheadline":"Ready for your car‚Äôs premium shine? Contact us today!","email_recipient":"biff@gmail.com","button_text":"Request a Quote"},"service_area":{"main_city":"Philadelphia, PA","surrounding_cities":["Conshohocken","King of Prussia","Cherry Hill","Bryn Mawr","Media","Lansdale"]}}
</file>

<file path="src/components/Comparison.astro">
---
// src/components/Comparison.astro
const { comparison, intelligence } = Astro.props;

// Defensive check: ensure comparison and comparison.items exist
const items = comparison?.items || [];
const title = comparison?.title || "The Competition";
---

<section id="comparison" class="py-24 px-6 bg-[var(--bg-card)]">
  <div class="max-w-4xl mx-auto">
    <h2 class="text-4xl font-black mb-12 text-center text-[var(--text-primary)]">
      {title}
    </h2>
    
    <div class="overflow-hidden rounded-[var(--radius)] border border-[var(--border)]">
      <table class="w-full text-left border-collapse">
        <thead>
          <tr class="bg-[var(--bg-color)] border-b border-[var(--border)]">
            <th class="p-6 text-[var(--text-secondary)] font-medium">Feature</th>
            <th class="p-6 text-[var(--accent)] font-bold">Our Standard</th>
            <th class="p-6 text-[var(--text-secondary)]">The Others</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-[var(--border)]">
          {items.length > 0 ? items.map((item) => (
            <tr class="hover:bg-[var(--bg-color)] transition-colors">
              <td class="p-6 font-bold text-[var(--text-primary)]">{item.label}</td>
              <td class="p-6 text-[var(--accent)] font-black">{item.us}</td>
              <td class="p-6 text-[var(--text-secondary)]">{item.them}</td>
            </tr>
          )) : (
            <tr>
              <td colspan="3" class="p-6 text-center text-[var(--text-secondary)]">No comparison data provided.</td>
            </tr>
          )}
        </tbody>
      </table>
    </div>
  </div>
</section>
</file>

<file path="src/components/ServiceArea.astro">
---
const { service_area, intelligence } = Astro.props;

// 1. SAFE FALLBACKS
const mainCity = service_area?.main_city || "Our Region";
const neighbors = service_area?.surrounding_cities || [];
const industry = intelligence?.industry || "Services";

// 2. MERGE FOR DISPLAY
const allLocations = [mainCity, ...neighbors];

if (!service_area) return null;
---
<section id="service-area" class="py-20 bg-[var(--bg-card)] border-y border-[var(--border)]">
  <div class="max-w-6xl mx-auto px-6">
    <div class="grid md:grid-cols-2 gap-12 items-center">
      <div>
        <h2 class="text-4xl font-bold text-[var(--text-primary)] mb-4 tracking-tight uppercase">
          Serving <span class="text-[var(--accent)]">{mainCity}</span> & Beyond
        </h2>
        <p class="text-[var(--text-secondary)] mb-8 text-lg leading-relaxed">
          Providing elite {industry} expertise across the following regions. We ensure rapid deployment and local compliance for every project.
        </p>
        
        <div class="grid grid-cols-2 gap-y-4 gap-x-2">
          {allLocations.map((location) => (
            <div class="flex items-center gap-3 text-[var(--text-primary)] group">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-[var(--accent)] opacity-70 group-hover:opacity-100 transition-opacity">
                <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/>
              </svg>
              <span class="text-sm font-medium tracking-wide uppercase">
                {location}
              </span>
            </div>
          ))}
        </div>
      </div>

      <div class="bg-[var(--bg-color)] p-10 rounded-[var(--radius)] border border-[var(--border)] text-center shadow-sm relative overflow-hidden">
        {/* Background Accent for Vibe */}
        <div class="absolute top-0 right-0 w-32 h-32 bg-[var(--accent)] opacity-5 blur-3xl -mr-16 -mt-16"></div>
        
        <div class="inline-block p-3 rounded-full bg-[var(--accent)]/10 mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-[var(--accent)]"><circle cx="12" cy="12" r="10"/><path d="m16 12-4-4-4 4"/><path d="M12 16V8"/></svg>
        </div>
        <p class="text-xs uppercase tracking-[0.2em] text-[var(--text-secondary)] mb-3">Logistics</p>
        <p class="text-xl font-bold mb-8 text-[var(--text-primary)] leading-snug">
            Outside these areas? We offer custom quotes for extended travel.
        </p>
        <a href="#contact" class="inline-block w-full py-4 bg-[var(--accent)] text-black font-bold uppercase tracking-widest text-xs transition-transform hover:scale-[1.02] rounded-[var(--radius)]">
          Inquire Now
        </a>
      </div>
    </div>
  </div>
</section>
</file>

<file path="src/pages/success.astro">
---
import Layout from '../layouts/Layout.astro';
import data from '../data/business.json';

// 1. SAFE DESTRUCTURING - Following the new 2026 Standard
const { brand, settings, intelligence } = data;

const brandName = brand?.name || "The Studio";
const isTech = intelligence?.industry?.toLowerCase().includes('tech') || 
               intelligence?.industry?.toLowerCase().includes('ai');

// Industry-aware messaging
const statusMessage = isTech 
  ? "Neural handshake complete. Data logged." 
  : "Request received. We're sharpening the tools.";
---

<Layout title={`Success | ${brandName}`} settings={settings}>
  <main class="flex items-center justify-center min-h-[90vh] px-6 bg-[var(--bg-color)]">
    <div class="max-w-xl w-full text-center relative">
      
      {/* BACKGROUND VIBE DECOR */}
      <div class="absolute inset-0 -z-10 bg-[radial-gradient(circle_at_center,var(--accent)_0%,transparent_70%)] opacity-[0.03] blur-3xl"></div>

      {/* 2. THE SUCCESS ICON */}
      <div class="mb-12 flex justify-center">
        <div class="w-24 h-24 rounded-2xl border border-[var(--border)] flex items-center justify-center bg-[var(--bg-card)] rotate-3 hover:rotate-0 transition-transform duration-500 shadow-2xl">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-[var(--accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
      </div>

      {/* 3. DYNAMIC HEADLINE */}
      <h1 class="text-5xl md:text-7xl font-black uppercase tracking-tighter text-[var(--text-primary)] mb-6">
        INBOUND <span class="text-[var(--accent)]">CONFIRMED</span>
      </h1>
      
      <p class="text-[var(--text-secondary)] uppercase tracking-[0.3em] text-[10px] mb-12 leading-loose max-w-sm mx-auto font-medium">
        {statusMessage} <br/> 
        Deployment window: <span class="text-[var(--text-primary)]">24 Business Hours.</span>
      </p>

      {/* 4. RETURN BUTTON */}
      <a 
        href="/" 
        class="inline-block bg-[var(--text-primary)] text-[var(--bg-color)] px-10 py-5 rounded-[var(--radius)] text-[10px] font-black uppercase tracking-[0.4em] transition-all hover:bg-[var(--accent)] hover:text-black hover:scale-105 active:scale-95 border border-transparent"
      >
        Return to Home
      </a>
      
      {/* 5. SYSTEM LOG (The Professional Touch) */}
      <div class="mt-20 pt-10 border-t border-[var(--border)] flex flex-col md:flex-row justify-between items-center gap-4 opacity-40">
        <span class="text-[9px] font-mono tracking-[0.2em] text-[var(--text-secondary)] uppercase italic">
          // SIGNAL_STRENGTH: 100%
        </span>
        <span class="text-[9px] font-mono tracking-[0.2em] text-[var(--text-secondary)] uppercase">
          LOG_ID: {Math.random().toString(36).toUpperCase().substring(2, 12)}
        </span>
      </div>
    </div>
  </main>
</Layout>
</file>

<file path=".github/workflows/build-client.yml">
name: Build Client Dist

on:
  workflow_dispatch:
    inputs:
      client_slug:
        description: "Client slug (folder name under clients/)"
        required: true
        type: string

run-name: build-${{ inputs.client_slug }}

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Setup Node (22)
        uses: actions/setup-node@v4
        with:
          node-version: 22
          cache: npm
          cache-dependency-path: package-lock.json

      - name: Install deps
        run: npm ci

      # 1) Merge base + updates -> clients/<slug>/business.json
      - name: Merge JSON (base + updates -> business.json)
        run: node scripts/merge-json.mjs "${{ inputs.client_slug }}"

      # DEBUG: show the brand slug and expected filenames (helps confirm the exact naming)
      # NOTE: Avoid backticks/template literals here because bash will eat them.
      - name: Debug - show brand.slug + expected image filenames
        continue-on-error: true
        run: |
          node -e "const fs=require('fs'); const slug='${{ inputs.client_slug }}'; const p='clients/'+slug+'/business.json'; const d=JSON.parse(fs.readFileSync(p,'utf8')); const brandSlug=(d && d.brand && d.brand.slug) ? d.brand.slug : ((d && d.brand && d.brand.name) ? d.brand.name : 'brand').toLowerCase().replace(/'/g,'').replace(/[^a-z0-9]/g,'-'); console.log('path:', p); console.log('brand.slug:', d?.brand?.slug); console.log('derived brandSlug:', brandSlug); console.log('expected hero:', brandSlug + '-hero.jpg'); console.log('expected gallery sample:', brandSlug + '-project-0.jpg');"

      # 2) Fetch premium preview images into clients/<slug>/assets/images/*
      - name: Fetch Unsplash images (premium preview)
        run: node scripts/fetch-unsplash-images.mjs "${{ inputs.client_slug }}"
        env:
          UNSPLASH_ACCESS_KEY: ${{ secrets.UNSPLASH_ACCESS_KEY }}

      # DEBUG: verify images were downloaded into the client folder
      - name: Debug - list client downloaded images
        run: |
          echo "=== clients/${{ inputs.client_slug }}/assets/images ==="
          ls -la "clients/${{ inputs.client_slug }}/assets/images" || true

      # 3) Prepare build: copy clients/<slug>/business.json -> src/data/business.json
      #    and copy clients/<slug>/assets/images -> src/assets/images (clearing first)
      - name: Prepare build (copy JSON + images into app)
        run: node scripts/prepare-build.mjs "${{ inputs.client_slug }}"

      # DEBUG: verify src/assets/images contains only this client‚Äôs images (post-prepare)
      - name: Debug - list src/assets/images after prepare-build
        run: |
          echo "=== src/assets/images ==="
          ls -la src/assets/images || true

      # 4) Build Astro
      - name: Build Astro
        run: npm run build

      # DEBUG: verify built output contains images referenced/hashed
      - name: Debug - find images in dist
        run: |
          echo "=== dist image-ish files ==="
          find dist -maxdepth 6 -type f | egrep -i "\.(jpg|jpeg|png|webp|gif|svg)$" || true
          echo "=== dist paths mentioning hero/project/images/assets ==="
          find dist -maxdepth 8 -type f | egrep -i "hero|project|images|assets" || true

      # 5) Zip dist
      - name: Zip dist
        run: zip -r dist.zip dist

      # DEBUG: show zip contents (top-level + a few image entries)
      - name: Debug - list dist.zip contents (sample)
        run: |
          echo "=== dist.zip listing (first 200 lines) ==="
          unzip -l dist.zip | head -n 200

      # 6) Upload artifact
      - name: Upload dist artifact
        uses: actions/upload-artifact@v4
        with:
          name: dist-${{ inputs.client_slug }}
          path: dist.zip
          if-no-files-found: error
          retention-days: 7
</file>

<file path="apps/intake/functions/api/generate.js">
function normalizeSlug(s) {
  return String(s || "")
    .toLowerCase()
    .replace(/'/g, "")
    .replace(/[^a-z0-9]/g, "-")
    .replace(/-+/g, "-")
    .replace(/^-|-$/g, "");
}

function must(obj, keys) {
  for (const k of keys) if (!(k in obj)) throw new Error(`Missing key: ${k}`);
}

function isObj(v) {
  return v && typeof v === "object" && !Array.isArray(v);
}

function labelForAnchor(a) {
  return (
    (a === "#home" && "Home") ||
    (a === "#about" && "About") ||
    (a === "#features" && "Services") ||
    (a === "#events" && "Schedule") ||
    (a === "#process" && "Process") ||
    (a === "#testimonials" && "Reviews") ||
    (a === "#comparison" && "Compare") ||
    (a === "#gallery" && "Gallery") ||
    (a === "#investment" && "Pricing") ||
    (a === "#faqs" && "FAQ") ||
    (a === "#service-area" && "Service Area") ||
    (a === "#contact" && "Contact") ||
    "Link"
  );
}

function normalizeMenu(menuLike) {
  // schema requires [{label,path}]
  if (!menuLike) return null;

  if (Array.isArray(menuLike) && menuLike.length > 0) {
    const first = menuLike[0];

    // already objects
    if (isObj(first) && "label" in first && "path" in first) {
      return menuLike.map((m) => ({
        label: String(m.label || labelForAnchor(m.path)),
        path: String(m.path),
      }));
    }

    // anchor strings
    if (typeof first === "string") {
      return menuLike.map((a) => ({ label: labelForAnchor(a), path: a }));
    }
  }

  return null;
}

function normalizeOutputToSchema(raw, input) {
  // Fix common drift fields so components always get what they expect.
  const out = { ...(raw || {}) };

  // intelligence
  if (raw?.intelligence && !raw.intelligence.industry) {
    out.intelligence = {
      industry: raw.intelligence.business_type || raw.intelligence.industry || input.site_for || "service business",
      target_persona: raw.intelligence.target_audience || raw.intelligence.target_persona || "local customers",
      tone_of_voice: raw.intelligence.tone || raw.intelligence.tone_of_voice || input.tone_hint || "professional",
    };
  }

  // settings.menu normalize
  if (raw?.settings) {
    out.settings = { ...raw.settings };
    const nm = normalizeMenu(raw.settings.menu) || normalizeMenu(raw?.strategy?.menu);
    if (nm) out.settings.menu = nm;
  }

  // hero subheadline -> subtext
  if (raw?.hero) {
    out.hero = { ...raw.hero };
    if (!out.hero.subtext && out.hero.subheadline) out.hero.subtext = out.hero.subheadline;
    delete out.hero.subheadline;
  }

  // about content/headline -> required keys
  if (raw?.about) {
    out.about = { ...raw.about };
    if (!out.about.story_text && (out.about.content || out.about.story)) out.about.story_text = out.about.content || out.about.story;
    if (!out.about.founder_note) out.about.founder_note = "Owner-led and detail-focused.";
    if (!out.about.years_experience) out.about.years_experience = "Newly launched";
    delete out.about.headline;
    delete out.about.content;
  }

  // contact: ensure schema keys exist
  if (raw?.contact) {
    out.contact = { ...raw.contact };
    if (!out.contact.subheadline && out.contact.subtext) out.contact.subheadline = out.contact.subtext;
    delete out.contact.subtext;
  }

  // service_area key name
  if (raw?.serviceArea && !raw?.service_area) {
    out.service_area = raw.serviceArea;
    delete out.serviceArea;
  }

  return out;
}

async function openaiJson({ apiKey, model, messages, temperature = 0.3 }) {
  if (!apiKey) throw new Error("Missing OPENAI_API_KEY env var");

  const res = await fetch("https://api.openai.com/v1/chat/completions", {
    method: "POST",
    headers: {
      Authorization: `Bearer ${apiKey}`,
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      model,
      temperature,
      response_format: { type: "json_object" },
      messages,
    }),
  });

  const text = await res.text();
  if (!res.ok) throw new Error(`OpenAI error ${res.status}: ${text}`);

  const data = JSON.parse(text);
  const content = data?.choices?.[0]?.message?.content;
  if (!content) throw new Error("OpenAI returned no content");
  return JSON.parse(content);
}

export async function onRequest(context) {
  const { request, env } = context;

  if (request.method !== "POST") {
    return new Response(JSON.stringify({ ok: false, error: "Use POST /api/generate" }), {
      status: 405,
      headers: { "content-type": "application/json" },
    });
  }

  try {
    const input = await request.json();

    const site_for = input.site_for || "";
    const business_name = input.business_name || "";
    const email = input.email || "";
    const phone = input.phone || "";
    const main_city = input.main_city || "";
    const goal = input.goal || "Contact";
    const tone_hint = input.tone_hint || "";

    // Pass A: Architect (force MASTER schema shape)
    const plan = await openaiJson({
      apiKey: env.OPENAI_API_KEY,
      model: "gpt-4.1-mini",
      temperature: 0.2,
      messages: [
        {
          role: "user",
          content: `
You are SiteForge "Architect".
Return JSON ONLY with keys: intelligence, strategy, settings.

MASTER SCHEMA SHAPES (MUST MATCH):
- intelligence: { "industry": string, "target_persona": string, "tone_of_voice": string }
- strategy: include ALL booleans:
  show_trustbar,show_about,show_features,show_events,show_process,show_testimonials,show_comparison,show_gallery,show_investment,show_faqs,show_service_area
- settings: { vibe, cta_text, cta_link, cta_type, menu }
  menu MUST be an array of objects: [{ "label": string, "path": anchor }]
  path MUST be one of:
  #home,#about,#features,#events,#process,#testimonials,#comparison,#gallery,#investment,#faqs,#service-area,#contact

Rules:
- vibe must be one of:
  "Midnight Tech","Zenith Earth","Vintage Boutique","Rugged Industrial","Modern Minimal","Luxury Noir","Legacy Professional","Solar Flare"
- Always include #home and #contact in menu.
- show_events only if you can populate 3+ events later; otherwise false.
- cta_type should be "anchor" unless you have a real external booking URL.

User input:
site_for: ${JSON.stringify(site_for)}
business_name: ${JSON.stringify(business_name)}
goal: ${JSON.stringify(goal)}
tone_hint: ${JSON.stringify(tone_hint)}
main_city: ${JSON.stringify(main_city)}
          `.trim(),
        },
      ],
    });

    must(plan, ["intelligence", "strategy", "settings"]);

    // Pass B: Builder (force EXACT master schema output)
    const raw = await openaiJson({
      apiKey: env.OPENAI_API_KEY,
      model: "gpt-4.1-mini",
      temperature: 0.35,
      messages: [
        {
          role: "user",
          content: `
You are SiteForge "Builder".
Return ONE JSON object that matches the MASTER SCHEMA EXACTLY.

REQUIRED top-level keys:
intelligence, strategy, settings, brand, hero, about, features, contact

OPTIONAL keys (only if relevant):
service_area (include ONLY if strategy.show_service_area is true)

MASTER SCHEMA (MUST MATCH):
- intelligence: { industry, target_persona, tone_of_voice }
- strategy: include ALL show_* booleans listed in plan.strategy
- settings: { vibe, cta_text, cta_link, cta_type, secondary_cta_text, secondary_cta_link, menu }
  menu MUST be [{label, path}] not strings
- brand: { name, slug, tagline, email, phone, office_address, objection_handle }
- hero: { headline, subtext, image:{alt,image_search_query} }
  image_search_query must be 4‚Äì8 words, DO NOT include city names
- about: { story_text, founder_note, years_experience }
  Do NOT invent years; if unknown use "Newly launched"
- features: 3‚Äì8 items { title, description, icon_slug } using allowed icon slugs
- contact: { headline, subheadline, email_recipient, button_text, email, phone, office_address }

Hard rules:
- Do NOT invent awards/certs/pricing.
- Use user-provided email/phone.
- Keep copy "premium but friendly" when appropriate.
- JSON ONLY. No markdown.

Architect plan:
${JSON.stringify(plan)}

Authoritative facts:
business_name: ${JSON.stringify(business_name)}
email: ${JSON.stringify(email)}
phone: ${JSON.stringify(phone)}
main_city: ${JSON.stringify(main_city)}
goal: ${JSON.stringify(goal)}
site_for: ${JSON.stringify(site_for)}
          `.trim(),
        },
      ],
    });

    const business_json = normalizeOutputToSchema(raw, {
      site_for,
      business_name,
      email,
      phone,
      main_city,
      goal,
      tone_hint,
    });

    must(business_json, ["intelligence", "strategy", "settings", "brand", "hero", "about", "features", "contact"]);

    // Lock slug
    const slug = normalizeSlug(business_json?.brand?.slug || business_json?.brand?.name || business_name || "brand");
    business_json.brand = business_json.brand || {};
    business_json.brand.slug = slug;

    // Ensure email/phone are present in brand if provided
    if (email && !business_json.brand.email) business_json.brand.email = email;
    if (phone && !business_json.brand.phone) business_json.brand.phone = phone;

    // If show_service_area true but missing, add a minimal one
    if (business_json?.strategy?.show_service_area && !business_json.service_area) {
      business_json.service_area = {
        main_city: main_city || "Our Region",
        surrounding_cities: [],
        travel_note: "Outside these areas? We offer custom quotes for extended travel.",
        cta_text: business_json.settings?.cta_text || "Contact Us",
        cta_link: "#contact",
        map_search_query: "",
      };
    }

    return new Response(JSON.stringify({ ok: true, slug, plan, business_json }), {
      headers: { "content-type": "application/json" },
    });
  } catch (err) {
    return new Response(JSON.stringify({ ok: false, error: String(err?.message || err) }), {
      status: 500,
      headers: { "content-type": "application/json" },
    });
  }
}
</file>

<file path="src/components/BentoAbout.astro">
---
/**
 * COMPONENT: BentoAbout
 * Logic: Asymmetric brand story grid.
 * Fix: Properly receives intelligence prop and uses Vibe Engine variables.
 */
 const { brand, about, intelligence } = Astro.props; 

// 1. DATA SAFETY - Prevents "undefined" crashes if the AI didn't provide data
if (!about && !brand) return null;

// Fallback logic to ensure boxes aren't empty
const story = about?.story_text || brand?.tagline || "Redefining the standard of excellence.";
const founderNote = about?.founder_note || brand?.objection_handle || "Precision in every detail.";
const years = about?.years_experience || "10+";
const industry = intelligence?.industry || "Premium Services";

// TEXT LOGIC - Splits the brand name for that high-end 2-tone look
const brandName = brand?.name || "Our Brand";
const brandParts = brandName.split(' ');
const firstWord = brandParts[0];
const restOfName = brandParts.slice(1).join(' ');
---

<section id="about" class="py-24 px-6 bg-[var(--bg-color)] scroll-mt-20">
  <div class="max-w-6xl mx-auto">
    
    <div class="grid grid-cols-1 md:grid-cols-12 gap-4 auto-rows-fr">
      
      <div class="md:col-span-8 md:row-span-2 min-h-[400px] p-8 md:p-12 bg-[var(--bg-card)] rounded-[var(--radius)] flex flex-col justify-end relative border border-[var(--border)] group overflow-hidden">
        
        <div class="absolute -top-24 -left-24 w-64 h-64 bg-[var(--accent)] opacity-[0.03] blur-[80px] group-hover:opacity-10 transition-opacity"></div>
        
        <div class="relative z-10">
            <span class="text-[10px] font-bold uppercase tracking-[0.4em] text-[var(--accent)] mb-4 block">// THE_MISSION</span>
            <h2 class="text-5xl md:text-7xl font-black uppercase tracking-tighter text-[var(--text-primary)] mb-6 leading-[0.85]">
                {firstWord} <span class="text-[var(--accent)] block">{restOfName}</span>
            </h2>
            <p class="text-[var(--text-secondary)] text-sm md:text-lg leading-relaxed max-w-xl font-medium">
                {story}
            </p>
        </div>
      </div>

      <div class="md:col-span-4 p-8 border border-[var(--border)] rounded-[var(--radius)] flex flex-col justify-center bg-[var(--bg-color)] relative group">
        <span class="text-6xl absolute -top-2 left-4 text-[var(--accent)] opacity-10 font-serif group-hover:opacity-30 transition-opacity">‚Äú</span>
        <p class="text-[var(--text-secondary)] text-sm italic relative z-10 pt-4 leading-relaxed">
            {founderNote}
        </p>
        <div class="mt-6 text-[10px] font-black uppercase tracking-[0.2em] text-[var(--text-primary)]">
            ‚Äî {brandName} Strategy
        </div>
      </div>

      <div class="md:col-span-4 p-8 border border-[var(--border)] rounded-[var(--radius)] flex flex-col justify-center bg-[var(--text-primary)] text-[var(--bg-color)] hover:scale-[1.02] transition-transform">
         <div class="flex flex-col">
            <span class="text-xs uppercase tracking-widest font-bold opacity-60 mb-1">Track Record</span>
            <div class="flex items-baseline gap-2">
                <span class="text-5xl font-black tracking-tighter">{years}</span>
                <span class="text-lg font-bold uppercase text-[var(--accent)]">Years</span>
            </div>
            <p class="text-[9px] uppercase tracking-[0.1em] mt-4 opacity-50 font-bold">Sector: {industry}</p>
         </div>
      </div>

    </div>
  </div>
</section>
</file>

<file path="src/components/FAQ.astro">
---
/**
 * COMPONENT: FAQ
 * Logic: Simple accordion or list-style answers.
 */
 const { faqs } = Astro.props;

if (!faqs || faqs.length === 0) return null;
---

<section id="faqs" class="py-24 bg-[var(--bg-card)] border-y border-[var(--border)] scroll-mt-24">
  <div class="container mx-auto px-6 max-w-4xl">
    <div class="text-center mb-16">
      <h2 class="text-xs font-bold tracking-[0.3em] uppercase text-[var(--accent)] mb-4">Inquiries</h2>
      <h3 class="text-4xl md:text-6xl font-black uppercase tracking-tighter text-[var(--text-primary)]">
        Common <span class="text-[var(--accent)]">Questions</span>
      </h3>
    </div>

    <div class="space-y-4">
      {faqs.map((faq: any) => (
        <details class="group border border-[var(--border)] rounded-[var(--radius)] bg-[var(--bg-color)] p-6 cursor-pointer">
          <summary class="list-none flex justify-between items-center text-sm font-bold uppercase tracking-widest text-[var(--text-primary)]">
            {faq.question}
            <span class="text-[var(--accent)] transition-transform group-open:rotate-45">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
            </span>
          </summary>
          <p class="mt-6 text-sm leading-relaxed text-[var(--text-secondary)] opacity-80 border-t border-[var(--border)] pt-6">
            {faq.answer}
          </p>
        </details>
      ))}
    </div>
  </div>
</section>
</file>

<file path="src/components/Process.astro">
---
/**
 * COMPONENT: Process
 * Logic: Industry-aware step-by-step methodology.
 */
 import { iconLibrary } from '../lib/icons.js';

interface Step {
  title: string;
  description: string;
}

interface Props {
  id?: string;
  steps: Step[];
  intelligence?: any;
}

const { id = "process", steps, intelligence } = Astro.props;

// Context Check: Is this a tech/creative service or home service?
const isTech = intelligence?.industry?.toLowerCase().includes('tech') || 
               intelligence?.industry?.toLowerCase().includes('design') ||
               intelligence?.industry?.toLowerCase().includes('ai');

// Default Icon Logic: Zap for tech, Sprout for home services, Layers for general.
const sectionIconPath = isTech ? iconLibrary.zap : iconLibrary.layers;
---

<section id={id} class="py-24 px-6 bg-[var(--bg-color)] border-t border-[var(--border)] scroll-mt-24">
  <div class="max-w-6xl mx-auto">
    <div class="text-center mb-20">
      <div class="inline-flex items-center justify-center w-14 h-14 rounded-full border border-[var(--border)] mb-6 text-[var(--accent)] bg-[var(--bg-color)] shadow-[0_0_20px_rgba(var(--accent-rgb),0.1)]">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d={sectionIconPath} />
        </svg>
      </div>
      
      <h2 class="text-4xl md:text-7xl font-black uppercase tracking-tighter text-[var(--text-primary)]">
        {isTech ? "The Protocol" : "How It Works"}
      </h2>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-12 md:gap-20">
      {steps && steps.map((step, index) => (
        <div class="relative group">
          <div class="text-7xl md:text-9xl font-black text-[var(--accent)] opacity-5 mb-[-2.5rem] md:mb-[-3.5rem] select-none group-hover:opacity-15 transition-opacity duration-500 font-mono">
            {index + 1}
          </div>
          
          <div class="relative pt-4">
            <h3 class="text-xl font-bold text-[var(--text-primary)] mb-4 uppercase tracking-tighter">
              {step.title}
            </h3>
            <p class="text-[var(--text-secondary)] leading-relaxed text-sm md:text-base opacity-80">
              {step.description}
            </p>
          </div>
          
          {index < steps.length - 1 && (
            <div class="hidden md:block absolute top-[40%] -right-10 w-20 border-t border-dashed border-[var(--border)] opacity-20" />
          )}
        </div>
      ))}
    </div>
  </div>
</section>
</file>

<file path="src/components/Testimonials.astro">
---
/**
 * COMPONENT: Testimonials (Avatar-Free Version)
 * Logic: Focuses on text-based authority to ensure 0% asset failure.
 */
 const { testimonials } = Astro.props;

if (!testimonials || testimonials.length === 0) return null;
---

<section id="testimonials" class="py-24 bg-[var(--bg-card)] border-y border-[var(--border)]">
  <div class="container mx-auto px-6">
    <div class="text-center mb-16">
      <h2 class="text-xs font-bold tracking-[0.3em] uppercase text-[var(--accent)] mb-4">Social Proof</h2>
      <h3 class="text-4xl md:text-6xl font-black uppercase tracking-tighter text-[var(--text-primary)]">
        Client <span class="text-[var(--accent)]">Intel</span>
      </h3>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {testimonials.map((t: any) => (
        <div class="bg-[var(--bg-color)] border border-[var(--border)] p-8 rounded-[var(--radius)] relative overflow-hidden flex flex-col justify-between">
          <div class="relative z-10">
            <p class="text-[var(--text-secondary)] text-lg leading-relaxed italic opacity-90 mb-8">
              "{t.quote}"
            </p>
          </div>
          
          <div class="relative z-10 pt-6 border-t border-[var(--border)]/50">
            <h4 class="text-sm font-bold uppercase tracking-widest text-[var(--text-primary)]">
              {t.author}
            </h4>
            <p class="text-[10px] uppercase tracking-widest text-[var(--accent)] font-bold">
              {t.role}
            </p>
          </div>
          
          {/* Stylized Quote Icon */}
          <div class="absolute -top-2 -right-2 text-8xl font-serif text-[var(--accent)] opacity-5 select-none pointer-events-none">
            &ldquo;
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
</file>

<file path="master-schema.json">
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Vibe-Engine Master Manifest 2026",
  "description": "AI-driven interview, strategy, and build contract for automated Astro static websites.",
  "type": "object",
  "required": [
    "intelligence",
    "strategy",
    "settings",
    "brand",
    "hero",
    "about",
    "features",
    "contact"
  ],
  "properties": {
    "definitions": {
      "iconToken": {
        "description": "Icon key from iconLibrary OR short emoji/symbol fallback.",
        "anyOf": [
          {
            "type": "string",
            "enum": [
              "zap",
              "cpu",
              "layers",
              "rocket",
              "leaf",
              "sprout",
              "sun",
              "scissors",
              "truck",
              "hammer",
              "wrench",
              "trash",
              "sparkles",
              "heart",
              "award",
              "users",
              "map",
              "shield",
              "star",
              "check",
              "coins",
              "briefcase",
              "clock",
              "phone"
            ]
          },
          {
            "type": "string",
            "minLength": 1,
            "maxLength": 4,
            "description": "Emoji fallback (ex: \"‚≠ê\", \"üõ°Ô∏è\", \"üìç\"). Keep it short."
          }
        ]
      }
    },

    "intelligence": {
      "type": "object",
      "ai:priority": "critical",
      "ai:purpose": "Establish foundational context so AI can behave like a web strategist.",
      "ai:questions": [
        "What is this website for?",
        "Who is the ideal customer?",
        "How should the brand sound to visitors?"
      ],
      "required": ["industry", "target_persona", "tone_of_voice"],
      "properties": {
        "industry": { "type": "string" },
        "target_persona": { "type": "string" },
        "tone_of_voice": { "type": "string" }
      }
    },
    "strategy": {
      "type": "object",
      "ai:priority": "critical",
      "ai:purpose": "Determine which site components should render based on business needs.",
      "ai:inference_rules": {
        "show_about": "true for founder-led, story-driven, or mission-based brands",
        "show_features": "true for most businesses offering services or products",
        "show_events": "true when the business has a schedule, sessions, classes, workshops, tours, appointment slots, or any time-based offerings; only set true if you can populate events[] with 3+ items; otherwise false",
        "show_process": "true for consultative or multi-step services",
        "show_testimonials": "true when trust, credibility, or proof is important",
        "show_comparison": "true when buyers compare alternatives",
        "show_gallery": "true for visual, portfolio-based, or physical work",
        "show_investment": "true when pricing tiers are standardized",
        "show_faqs": "true when customer objections are common",
        "show_service_area": "true for location-based businesses"
      },
      "properties": {
        "show_trustbar": { "type": "boolean" },
        "show_about": { "type": "boolean" },
        "show_features": { "type": "boolean" },
        "show_events": { "type": "boolean" },
        "show_process": { "type": "boolean" },
        "show_testimonials": { "type": "boolean" },
        "show_comparison": { "type": "boolean" },
        "show_gallery": { "type": "boolean" },
        "show_investment": { "type": "boolean" },
        "show_faqs": { "type": "boolean" },
        "show_service_area": { "type": "boolean" }
      }
    },
    "settings": {
      "type": "object",
      "ai:priority": "critical",
      "ai:purpose": "Control global UI, branding vibe, and navigation behavior.",
      "ai:inference_rules": {
        "vibe": {
          "Midnight Tech": "SaaS, AI, fintech, cybersecurity",
          "Zenith Earth": "wellness, eco-friendly, sustainability",
          "Vintage Boutique": "handcrafted, artisanal, lifestyle brands",
          "Rugged Industrial": "construction, manufacturing, trades",
          "Modern Minimal": "consultants, startups, professional services",
          "Luxury Noir": "premium, high-end, exclusive brands",
          "Legacy Professional": "law, finance, healthcare",
          "Solar Flare": "creative, bold, entertainment, youth-focused"
        }
      },
      "required": ["vibe", "menu", "cta_text", "cta_link", "cta_type"],
      "properties": {
        "vibe": {
          "type": "string",
          "enum": [
            "Midnight Tech",
            "Zenith Earth",
            "Vintage Boutique",
            "Rugged Industrial",
            "Modern Minimal",
            "Luxury Noir",
            "Legacy Professional",
            "Solar Flare"
          ]
        },
        "cta_text": { "type": "string" },
        "cta_link": { "type": "string" },
        "cta_type": { "type": "string", "enum": ["anchor", "external"] },
        "secondary_cta_text": { "type": "string" },
        "secondary_cta_link": { "type": "string" },
        "menu": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["label", "path"],
            "properties": {
              "label": { "type": "string" },
              "path": { "type": "string",
                        "enum": [
                          "#home",
                          "#about",
                          "#features",
                          "#events",
                          "#process",
                          "#testimonials",
                          "#comparison",
                          "#gallery",
                          "#investment",
                          "#faqs",
                          "#service-area",
                          "#contact"
                        ],
                        "description": "Must match an existing section id. Use only these anchors to prevent broken nav links."
                      }
            }
          }
        }
      }
    },
    "brand": {
      "type": "object",
      "ai:priority": "critical",
      "ai:purpose": "Define the public-facing identity of the business.",
      "ui:component": "BrandMeta",
      "ai:questions": [
        "What is the business name?",
        "Do you have a tagline or positioning statement?",
        "What email should customers contact?"
      ],
      "required": ["name", "tagline", "email"],
      "properties": {
        "name": { "type": "string" },
        "slug": { "type": "string" },
        "tagline": { "type": "string" },
        "email": { "type": "string" },
        "phone": { "type": "string" },
        "office_address": { "type": "string" },
        "objection_handle": { "type": "string" }
      }
    },
    "hero": {
      "type": "object",
      "ai:priority": "critical",
      "ai:purpose": "Immediately communicate the core value proposition.",
      "ui:component": "Hero.astro",
      "ai:inference_rules": {
        "image_query_format": "Use 4‚Äì8 words: {subject} {action} {context}. Avoid locations and overly specific adjectives.",
        "image_query_subject": "Derive from intelligence.industry (ex: 'car detailing', 'mobile car wash').",
        "image_query_action": "Prefer visual actions: 'washing', 'polishing', 'interior cleaning', 'vacuuming'.",
        "image_query_context": "Use broad contexts: 'driveway', 'garage', 'luxury car', 'SUV'.",
        "image_query_fallbacks": [
          "car detailing",
          "car interior cleaning",
          "car wash foam",
          "polishing car paint"
        ]
      },
      "required": ["headline", "subtext", "image"],
      "properties": {
        "headline": { "type": "string" },
        "subtext": { "type": "string" },
        "image": {
          "type": "object",
          "required": ["alt", "image_search_query"],
          "properties": {
            "alt": { "type": "string" },
            "image_search_query": { "type": "string" }
          }
        }
      }
    },
    "about": {
      "type": "object",
      "ai:priority": "recommended",
      "ai:purpose": "Build emotional connection and credibility through story.",
      "ui:component": "About.astro",
      "ai:questions": [
        "How did the business start?",
        "What makes you different?",
        "How long have you been doing this?"
      ],
      "required": ["story_text", "founder_note", "years_experience"],
      "properties": {
        "story_text": { "type": "string" },
        "founder_note": { "type": "string" },
        "years_experience": { "type": "string" }
      }
    },
    "trustbar": {
      "type": "object",
      "ai:priority": "optional",
      "ai:purpose": "Add quick trust signals near the hero (badges, stats, guarantees) to improve conversion.",
      "ui:component": "Trustbar.astro",
      "required": ["enabled", "items"],
      "properties": {
        "enabled": { "type": "boolean" },
        "headline": { "type": "string" },
        "items": {
          "type": "array",
          "minItems": 2,
          "maxItems": 8,
          "items": {
            "type": "object",
            "required": ["label", "icon"],
            "properties": {
              "icon": { "$ref": "#/definitions/iconToken" },
              "label": { "type": "string" },
              "sublabel": { "type": "string" }
            }
          }
        }
      }
    },
    
    "events": {
      "type": "array",
      "ai:priority": "optional",
      "ai:purpose": "Display a schedule of classes, sessions, workshops, tours, or upcoming events.",
      "ai:inference_rules": {
        "when_to_use": "Use when strategy.show_events is true and time-based offerings exist.",
        "count_rule": "Provide 3‚Äì10 items. If the client is unsure of exact times, assume a simple weekly starter schedule.",
        "copy_rules": "Keep each field short and scannable. Use link '#contact' unless a real booking URL exists."
      },
      "items": {
        "type": "object",
        "required": ["date", "venue", "location", "link"],
        "properties": {
          "date": { "type": "string", "description": "Short time label (e.g., 'Mon 7:00a', 'Sat 10:00a')." },
          "venue": { "type": "string", "description": "Event/class/session name." },
          "location": { "type": "string", "description": "Short descriptor (duration/level/address/notes)." },
          "link": { "type": "string", "description": "Usually '#contact' or an external booking link." }
        }
      }
    },

    "service_area": {
      "type": "object",
      "ai:priority": "optional",
      "ai:purpose": "Local SEO and trust section. Shows the primary city served plus nearby locations to increase relevance and conversions for local search visitors.",
      "ui:component": "ServiceArea.astro",
      "ai:questions": [
        "What is your primary city/town and state you serve?",
        "List 3‚Äì8 nearby towns/neighborhoods you also serve (optional).",
        "Do you offer travel outside these areas? If yes, how should we phrase it?"
      ],
      "ai:fallbacks": {
        "main_city": "Use the client‚Äôs city/state from intake; if unknown, use 'Our Region'.",
        "surrounding_cities": "If unknown, provide 4‚Äì6 nearby areas based on the main city.",
        "travel_note": "Outside these areas? We offer custom quotes for extended travel."
      },
      "ai:inference_rules": {
        "enabled_when": "strategy.show_service_area is true OR the business is location-based (mobile services, contractors, clinics, local pros)",
        "use_when_missing": "If the client is unsure of exact towns, infer nearby communities rather than leaving it empty"
      },
      "required": ["main_city", "surrounding_cities"],
      "properties": {
        "main_city": {
          "type": "string",
          "description": "Primary city/town + state (recommended) shown in the headline."
        },
        "surrounding_cities": {
          "type": "array",
          "description": "Nearby cities/towns/neighborhoods displayed as coverage locations.",
          "items": { "type": "string" },
          "minItems": 0,
          "maxItems": 12
        },
        "travel_note": {
          "type": "string",
          "description": "Short line about service outside the listed areas (used in the logistics card)."
        },
        "cta_text": {
          "type": "string",
          "description": "Optional override for the service area CTA button text."
        },
        "cta_link": {
          "type": "string",
          "description": "Optional override for the service area CTA link (usually '#contact')."
        },
        "map_search_query": {
          "type": "string",
          "description": "Optional query for map/embed integrations (e.g., 'Mobile detailing near Cherry Hill NJ')."
        }
      }
    },
    "features": {
      "type": "array",
      "ai:priority": "critical",
      "ai:purpose": "Explain what the business offers and why it matters.",
      "ui:component": "FeaturesGrid.astro",
      "ai:questions": [
        "What services or features do you want to highlight?",
        "What problems do they solve?"
      ],
      "items": {
        "type": "object",
        "required": ["title", "description", "icon_slug"],
        "properties": {
          "title": { "type": "string" },
          "description": { "type": "string" },
          "icon_slug": { "type": "string" }
        }
      }
    },
    "processSteps": {
      "type": "array",
      "ai:priority": "optional",
      "ai:purpose": "Explain the workflow in clear steps to reduce friction and increase conversions.",
      "ui:component": "Process.astro",
      "ai:questions": [
        "Do you have a typical workflow? List 3‚Äì5 steps from inquiry to completion."
      ],
      "items": {
        "type": "object",
        "required": ["title", "description"],
        "properties": {
          "title": { "type": "string" },
          "description": { "type": "string" }
        }
      }
    },
    "testimonials": {
      "type": "array",
      "ai:priority": "recommended",
      "ai:purpose": "Reduce risk and increase trust with social proof.",
      "ui:component": "Testimonials.astro",
      "ai:questions": ["Do you have customer reviews or testimonials?"],
      "items": {
        "type": "object",
        "required": ["quote", "author", "role"],
        "properties": {
          "quote": { "type": "string" },
          "author": { "type": "string" },
          "role": { "type": "string" }
        }
      }
    },
    "comparison": {
      "type": "object",
      "ai:priority": "optional",
      "ai:purpose": "Help buyers decide by comparing your offer to common alternatives.",
      "ui:component": "Comparison.astro",
      "required": ["title", "items"],
      "properties": {
        "title": { "type": "string" },
        "items": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["label", "us", "them"],
            "properties": {
              "label": { "type": "string" },
              "us": { "type": "string" },
              "them": { "type": "string" }
            }
          }
        }
      }
    },
    "investment": {
      "type": "array",
      "ai:priority": "optional",
      "ai:purpose": "Clarify pricing expectations and qualify leads.",
      "ui:component": "PricingTiers.astro",
      "ai:questions": ["Do you offer standardized pricing or packages?"],
      "items": {
        "type": "object",
        "required": ["tier_name", "price", "features"],
        "properties": {
          "tier_name": { "type": "string" },
          "price": { "type": "string" },
          "popular": { "type": "boolean" },
          "features": {
            "type": "array",
            "items": { "type": "string" }
          }
        }
      }
    },
    "faqs": {
      "type": "array",
      "ai:priority": "optional",
      "ai:purpose": "Answer common objections and increase conversion confidence.",
      "ui:component": "FAQ.astro",
      "ai:questions": [
        "What are the top 3‚Äì6 questions customers ask before booking?"
      ],
      "items": {
        "type": "object",
        "required": ["question", "answer"],
        "properties": {
          "question": { "type": "string" },
          "answer": { "type": "string" }
        }
      }
    },
    "gallery": {
      "type": "object",
      "ai:priority": "recommended",
      "ai:purpose": "Render and size a visual gallery using AI inference based on industry, vibe, strategy, and branding goals.",
      "ui:component": "Gallery.astro",
      "required": ["enabled", "items"],
      "properties": {
        "enabled": { "type": "boolean" },
        "title": { "type": "string" },
        "layout": {
          "type": ["string", "null"],
          "enum": ["grid", "masonry", "bento", null],
          "description": "Optional manual override. If null, AI will choose the best layout using inference rules."
        },
        "show_titles": { "type": "boolean" },
        "strategy": {
          "type": "object",
          "properties": {
            "primary_goal": { "type": "string" },
            "show_gallery": { "type": "boolean" }
          }
        },
        "image_source": {
          "type": "object",
          "required": ["image_search_query"],
          "properties": {
            "provider": { "type": "string" },
            "image_search_query": { "type": "string" },
            "filename_pattern": { "type": "string" },
            "target_folder": { "type": "string" }
          }
        },
        "ai:inference": {
          "type": "object",
          "properties": {
            "archetype_map": {
              "type": "object",
              "additionalProperties": { "type": "string" }
            },
            "archetype_rules": {
              "type": "object",
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "min": { "type": "integer" },
                  "max": { "type": "integer" }
                },
                "required": ["min", "max"]
              }
            },
            "boost_rules": {
              "type": "object",
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "add": { "type": "integer" },
                  "prefer_max": { "type": "boolean" }
                }
              }
            },
            "prefer_min_when": {
              "type": "array",
              "items": { "type": "string" }
            },
            "fallback": {
              "type": "object",
              "properties": {
                "min": { "type": "integer" },
                "max": { "type": "integer" }
              },
              "required": ["min", "max"]
            },
            "layout_rules": {
              "type": "object",
              "properties": {
                "prefer_masonry_when": {
                  "type": "array",
                  "items": { "type": "string" }
                },
                "prefer_bento_when": {
                  "type": "array",
                  "items": { "type": "string" }
                },
                "prefer_grid_when": {
                  "type": "array",
                  "items": { "type": "string" }
                },
                "fallback": {
                  "type": "string",
                  "enum": ["grid", "masonry", "bento"]
                }
              },
              "required": ["fallback"]
            }
          }
        },
        "computed_count": {
          "type": ["integer", "null"],
          "description": "Final gallery image count chosen by AI after applying inference rules."
        },
        "computed_layout": {
          "type": ["string", "null"],
          "enum": ["grid", "masonry", "bento"],
          "description": "Final gallery layout chosen by AI after evaluating layout inference rules."
        },
        "items": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["title", "image_search_query"],
            "properties": {
              "title": { "type": "string" },
              "caption": { "type": "string" },
              "tag": { "type": "string" },
              "image_search_query": { "type": "string" }
            }
          }
        }
      }
    },
    "contact": {
      "type": "object",
      "required": ["headline", "subheadline", "email_recipient", "button_text"],
      "description": "Contact section and form configuration.",
      "properties": {
        "headline": { "type": "string" },
        "subheadline": { "type": "string" },
        "email": {
          "type": "string",
          "description": "Public email shown on the page (optional override of brand.email)."
        },
        "phone": {
          "type": "string",
          "description": "Public phone number shown on the page (optional override of brand.phone)."
        },
        "email_recipient": {
          "type": "string",
          "description": "Where form submissions are sent."
        },
        "button_text": { "type": "string" },
        "office_address": { "type": "string" }
      }
    }
  }
}
</file>

<file path="package.json">
{
  "name": "agency-v4",
  "type": "module",
  "version": "0.0.1",
  "scripts": {
    "dev": "astro dev",
    "build": "astro build",
    "preview": "astro preview",
    "astro": "astro"
  },
  "dependencies": {
    "@astrojs/check": "^0.9.6",
    "@astrojs/react": "^4.4.2",
    "@astrojs/tailwind": "^6.0.2",
    "astro": "^5.16.7",
    "axios": "^1.13.2",
    "dotenv": "^17.2.3",
    "lucide-react": "^0.562.0",
    "openai": "^6.21.0",
    "react": "^19.2.3",
    "react-dom": "^19.2.3",
    "tailwindcss": "^3.4.17",
    "typescript": "^5.9.3"
  }
}
</file>

<file path="scripts/setup-site.js">
import fs from 'fs';
import path from 'path';
import axios from 'axios';
import dotenv from 'dotenv';
// Using 'with' for Node v22 compatibility
import data from '../src/data/business.json' with { type: 'json' };

dotenv.config();

const ACCESS_KEY = process.env.UNSPLASH_ACCESS_KEY;
const ASSETS_DIR = path.resolve('./src/assets/images');

// Ensure assets directory exists
if (!fs.existsSync(ASSETS_DIR)) {
  fs.mkdirSync(ASSETS_DIR, { recursive: true });
}

/**
 * 1. SLUG GENERATION
 * Prioritize the JSON slug, fallback to name-based generation.
 */
const brandSlug =
  data.brand?.slug ||
  (data.brand?.name || 'brand')
    .toLowerCase()
    .replace(/'/g, '')
    .replace(/[^a-z0-9]/g, '-');

const brandName = data.brand?.name || 'brand';

/**
 * 2. IMAGE DOWNLOADER
 * Downloads from Unsplash and saves with the brand-specific prefix.
 */
async function searchUnsplashPhoto(query) {
  const res = await axios.get('https://api.unsplash.com/search/photos', {
    params: {
      query,
      orientation: 'landscape',
      per_page: 1
    },
    headers: {
      Authorization: `Client-ID ${ACCESS_KEY}`
    }
  });

  const first = res.data?.results?.[0];
  return first?.urls?.regular || null;
}

function buildFallbackQueries(query, industryFallback) {
  const q = (query || '').trim();
  const fallbacks = [];

  if (q) fallbacks.push(q);

  // soften common ‚Äúover-specific‚Äù words
  if (q) {
    fallbacks.push(
      q.replace(/\b(close-up|closeup|professional|premium|luxury)\b/gi, '').replace(/\s+/g, ' ').trim()
    );
  }

  // take first 2‚Äì3 main tokens
  if (q) {
    const tokens = q.split(/\s+/).filter(Boolean);
    fallbacks.push(tokens.slice(0, 4).join(' '));
    fallbacks.push(tokens.slice(0, 2).join(' '));
  }

  // industry fallback
  if (industryFallback) fallbacks.push(industryFallback);

  // final safe defaults
  fallbacks.push('car detailing');
  fallbacks.push('car interior cleaning');

  // unique + non-empty
  return [...new Set(fallbacks)].filter(Boolean);
}

async function fetchUnsplashImage(query, filename) {
  const filePath = path.join(ASSETS_DIR, filename);

  if (fs.existsSync(filePath)) {
    console.log(`- Skipping ${filename} (Already exists)`);
    return;
  }

  const fallbacks = buildFallbackQueries(query, data?.intelligence?.industry);

  try {
    let downloadUrl = null;

    for (const q of fallbacks) {
      console.log(`üîç Searching Unsplash for: "${q}"...`);
      downloadUrl = await searchUnsplashPhoto(q);
      if (downloadUrl) break;
    }

    if (!downloadUrl) {
      console.error(`! Unsplash: No results for "${query}" (and fallbacks)`);
      return;
    }

    const response = await axios({ url: downloadUrl, method: 'GET', responseType: 'stream' });
    const writer = fs.createWriteStream(filePath);
    response.data.pipe(writer);

    return new Promise((resolve, reject) => {
      writer.on('finish', resolve);
      writer.on('error', reject);
    });
  } catch (error) {
    const errorMsg = error.response?.data?.errors?.[0] || error.message;
    console.error(`! Unsplash Error for ${filename}:`, errorMsg);
  }
}


/**
 * 3. RUNNER
 * Orchestrates the Hero and Gallery image naming/downloading.
 */
async function run() {
  if (!ACCESS_KEY) {
    console.error('‚ùå Error: UNSPLASH_ACCESS_KEY not found in .env file.');
    return;
  }

  console.log(`üöÄ Starting Image Factory: ${brandName}`);

  // --- TASK 1: THE HERO ---
  const heroQuery = data?.hero?.image?.image_search_query;
  if (heroQuery) {
    const heroFilename = `${brandSlug}-hero.jpg`;
    await fetchUnsplashImage(heroQuery, heroFilename);
  } else {
    console.log('‚ö†Ô∏è Skipping hero image (missing data.hero.image.image_search_query)');
  }

  // --- TASK 2: THE GALLERY ---
  // Naming Convention: brand-slug-project-0.jpg

  const galleryObj = data.gallery;

  // Support BOTH shapes:
  // A) legacy: data.gallery = [ ... ]
  // B) elite:  data.gallery = { enabled, computed_count, image_source, items: [ ... ] }
  const isLegacyArray = Array.isArray(galleryObj);
  const galleryEnabled = isLegacyArray ? true : (galleryObj?.enabled !== false);
  const galleryItems = isLegacyArray ? galleryObj : (galleryObj?.items || []);

  if (galleryEnabled && galleryItems.length > 0) {
    const desiredCount =
      (!isLegacyArray && typeof galleryObj?.computed_count === 'number')
        ? galleryObj.computed_count
        : galleryItems.length;

    const itemsToProcess = galleryItems.slice(0, Math.max(0, desiredCount));

    console.log(`üì∏ Processing ${itemsToProcess.length} Gallery Slots...`);

    const globalQuery =
      (!isLegacyArray && galleryObj?.image_source?.image_search_query)
        ? galleryObj.image_source.image_search_query
        : '';

    for (const [index, item] of itemsToProcess.entries()) {
      const galleryQuery =
        item?.image_search_query ||
        globalQuery ||
        item?.alt ||
        data.intelligence?.industry ||
        'professional services';

      const galleryFilename = `${brandSlug}-project-${index}.jpg`;
      await fetchUnsplashImage(galleryQuery, galleryFilename);
    }
  } else {
    console.log('‚ÑπÔ∏è No gallery items to process (gallery disabled or empty).');
  }

  console.log('\n‚úÖ Factory Complete. Assets ready in src/assets/images/');
  console.log(`üí° Assets prefixed with: ${brandSlug}-`);
}

run();
</file>

<file path="src/components/Contact.astro">
---
/**
 * COMPONENT: Contact
 * Standards: 2026 AI-Ready / Netlify Form Integration
 * Logic: Fully dynamic headlines with automatic last-word accenting.
 */
 const { brand, contact, settings } = Astro.props;

const businessName = brand?.name || "Our Studio";
const email = contact?.email || brand?.email || "";
const phone = contact?.phone || brand?.phone || "";
const handle = brand?.objection_handle || "Ready to start your project?";
const cta_text = settings?.cta_text || "Send Message";

// Dynamic Headline Logic: Splits the headline to color the last word with the accent variable
const rawHeadline = contact?.headline || "Let's Build Something";
const words = rawHeadline.split(' ');
const lastWord = words.pop();
const firstPart = words.join(' ');

// 2026 Standard: Redirect to a custom success page
const successPath = "/success"; 
---

<section id="contact" class="py-24 bg-[var(--bg-color)] border-t border-[var(--border)] scroll-mt-24">
  <div class="container mx-auto px-6">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
      
      {/* Branding Side */}
      <div>
        <h2 class="text-xs font-bold tracking-[0.3em] uppercase text-[var(--accent)] mb-4">Connect</h2>
        
        <h3 class="text-5xl md:text-7xl font-black uppercase tracking-tighter text-[var(--text-primary)] mb-8">
          {firstPart} <span class="text-[var(--accent)]">{lastWord}</span>.
        </h3>

        <p class="text-[var(--text-secondary)] mb-12 max-w-md leading-relaxed opacity-80">
          {handle}
        </p>

        <div class="space-y-8">
          {email && (
            <div class="flex flex-col">
              <span class="text-[10px] uppercase tracking-widest text-[var(--accent)] font-bold mb-1">Email</span>
              <a href={`mailto:${email}`} class="text-xl md:text-2xl font-bold text-[var(--text-primary)] hover:text-[var(--accent)] transition-colors italic break-all">
                {email}
              </a>
            </div>
          )}
          {phone && (
            <div class="flex flex-col">
              <span class="text-[10px] uppercase tracking-widest text-[var(--accent)] font-bold mb-1">Phone</span>

              <a
                href={`tel:+${phone.replace(/[^\d]/g, "")}`}
                class="text-xl md:text-2xl font-bold text-[var(--text-primary)] hover:text-[var(--accent)] transition-colors no-underline"
              >
                {phone}
              </a>
            </div>
          )}
        </div>
      </div>

      {/* Form Side: Netlify Optimized */}
      <div class="p-8 md:p-12 bg-[var(--bg-card)] border border-[var(--border)] rounded-[var(--radius)] relative overflow-hidden shadow-2xl">
        <h4 class="text-2xl font-black uppercase tracking-tighter mb-8 border-b border-[var(--border)] pb-4">
            {businessName} <span class="text-[var(--accent)]">Inquiry</span>
        </h4>
        
        <form 
          name="contact" 
          method="POST" 
          data-netlify="true" 
          action={successPath}
          netlify-honeypot="bot-field"
          class="space-y-4"
        >
          {/* Netlify Hidden Fields */}
          <input type="hidden" name="form-name" value="contact" />
          <p class="hidden">
            <label>Don't fill this out if you're human: <input name="bot-field" /></label>
          </p>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <input type="text" name="name" placeholder="NAME" required class="w-full bg-[var(--bg-color)] border border-[var(--border)] p-4 text-[10px] font-bold uppercase tracking-widest text-[var(--text-primary)] focus:border-[var(--accent)] outline-none transition-colors" />
            <input type="email" name="email" placeholder="EMAIL" required class="w-full bg-[var(--bg-color)] border border-[var(--border)] p-4 text-[10px] font-bold uppercase tracking-widest text-[var(--text-primary)] focus:border-[var(--accent)] outline-none transition-colors" />
          </div>
          
          <textarea name="message" rows="4" placeholder="PROJECT DETAILS" required class="w-full bg-[var(--bg-color)] border border-[var(--border)] p-4 text-[10px] font-bold uppercase tracking-widest text-[var(--text-primary)] focus:border-[var(--accent)] outline-none transition-colors"></textarea>
          
          <button type="submit" class="w-full bg-[var(--accent)] text-black py-5 font-black uppercase tracking-[0.3em] text-[10px] hover:bg-white transition-colors">
            {cta_text}
          </button>
        </form>
      </div>

    </div>
  </div>
</section>
</file>

<file path="src/components/Features.astro">
---
import { iconLibrary } from '../lib/icons.js';
const { features, intelligence } = Astro.props;

// AI-Speed Headline Logic
const isService = intelligence?.industry?.toLowerCase().includes('service') || 
                  intelligence?.industry?.toLowerCase().includes('landscaping');
                  
const headline = isService ? "Our Core Services" : "System Capabilities";
---

<section id="features" class="py-24 bg-[var(--bg-color)] border-t border-[var(--border)] scroll-mt-24">
  <div class="container mx-auto px-6">
    <div class="mb-16">
      <h2 class="text-xs font-bold tracking-[0.3em] uppercase text-[var(--accent)] mb-4">Features</h2>
      <h3 class="text-4xl md:text-6xl font-black uppercase tracking-tighter text-[var(--text-primary)]">
        {headline}<span class="text-[var(--accent)]">.</span>
      </h3>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      {features.map((item) => (
        <div class="p-8 border border-[var(--border)] rounded-[var(--radius)] bg-[var(--bg-card)] hover:border-[var(--accent)] transition-all group">
          <div class="w-12 h-12 mb-6 text-[var(--accent)] group-hover:scale-110 transition-transform">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d={iconLibrary[item.icon_slug] || iconLibrary.layers} />
            </svg>
          </div>
          <h4 class="text-xl font-bold uppercase tracking-tight text-[var(--text-primary)] mb-4">
            {item.title}
          </h4>
          <p class="text-[var(--text-secondary)] text-sm leading-relaxed opacity-80">
            {item.description}
          </p>
        </div>
      ))}
    </div>
  </div>
</section>
</file>

<file path="src/components/Footer.astro">
---
/**
 * FOOTER COMPONENT
 * Part of the "Perfect Site" Engine
 * Standards: Zero-friction deployment, Dynamic Vibe-based styling.
 */
 const { brand, settings, contact } = Astro.props;

const currentYear = new Date().getFullYear();
// We use a simple boolean from settings to decide if your agency credit shows
// Defaults to true unless explicitly set to false in business.json
const showCredit = settings?.show_agency_credit !== false; 
---

<footer class="bg-[var(--bg-card)] border-t border-[var(--border)] pt-20 pb-10">
  <div class="container mx-auto px-6">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-16">
      
      {/* 1. BRAND IDENTITY */}
      <div class="md:col-span-2">
        <h2 class="text-2xl font-black uppercase tracking-tighter text-[var(--text-primary)] mb-4">
          {brand?.name || "Our Studio"}
        </h2>
        <p class="text-[var(--text-secondary)] text-sm max-w-xs leading-relaxed opacity-70">
          {brand?.tagline || "Professional services delivered with precision and quality."}
        </p>
      </div>

      {/* 2. DYNAMIC SITEMAP */}
      <div>
        <h3 class="text-[10px] font-black uppercase tracking-[0.2em] text-[var(--text-primary)] mb-6">Sitemap</h3>
        <ul class="space-y-4">
          {settings?.menu?.map((item: any) => (
            <li>
              <a href={item.path} class="text-sm text-[var(--text-secondary)] hover:text-[var(--accent)] transition-colors">
                {item.label}
              </a>
            </li>
          ))}
        </ul>
      </div>

     {/* 3. OFFICIAL BRAND CONTACT (With Safe-Check Logic) */}
     <div>
      <h3 class="text-[10px] font-black uppercase tracking-[0.2em] text-[var(--text-primary)] mb-6">Connect</h3>
      <ul class="space-y-3">
        {/* EMAIL SAFE-CHECK */}
        {brand?.email && brand.email.toLowerCase() !== 'n/a' && (
          <li>
            <a 
              href={`mailto:${brand.email}`} 
              class="text-sm text-[var(--text-secondary)] hover:text-[var(--accent)] transition-colors underline decoration-[var(--accent)]/30 underline-offset-8"
            >
              {brand.email}
            </a>
          </li>
        )}

        {/* PHONE SAFE-CHECK */}
        {brand?.phone && brand.phone.toLowerCase() !== "n/a" && (
          <li class="text-sm text-[var(--text-secondary)] flex items-center gap-2">
            <span class="opacity-50">T:</span>
            <a
              href={`tel:+${brand.phone.replace(/[^\d]/g, "")}`}
              class="text-[var(--text-secondary)] hover:text-[var(--accent)] transition-colors no-underline"
            >
              {brand.phone}
            </a>
          </li>
        )}


        {/* ADDRESS SAFE-CHECK */}
        {brand?.office_address && brand.office_address.toLowerCase() !== 'n/a' && (
          <li class="text-xs text-[var(--text-secondary)] opacity-70 leading-relaxed max-w-[200px] pt-2">
            {brand.office_address}
          </li>
        )}
      </ul>
    </div>

    {/* 4. BOTTOM BAR & AGENCY CREDIT */}
    <div class="pt-8 border-t border-[var(--border)] flex flex-col md:flex-row justify-between items-center gap-6">
      <p class="text-[10px] font-medium text-[var(--text-secondary)] opacity-50 uppercase tracking-widest text-center md:text-left">
        &copy; {currentYear} {brand?.name || "The Studio"}. All Rights Reserved.
      </p>
      
      {showCredit && (
        <p class="text-[9px] font-bold uppercase tracking-[0.3em] text-[var(--text-secondary)] opacity-30">
          Built with Vibe Engine
        </p>
      )}
    </div>
  </div>
</footer>
</file>

<file path="src/components/Investment.astro">
---
/**
 * COMPONENT: Investment
 * Logic: Tiered pricing cards.
 */
 const { tiers, brand } = Astro.props;
---

<section id="investment" class="py-24 bg-[var(--bg-color)] scroll-mt-24">
  <div class="container mx-auto px-6">
    <div class="mb-16 text-center">
      <h2 class="text-xs font-bold tracking-[0.3em] uppercase text-[var(--accent)] mb-4">Investment</h2>
      <h3 class="text-4xl md:text-7xl font-black uppercase tracking-tighter text-[var(--text-primary)]">
        Choose Your <span class="text-[var(--accent)]">Plan</span>
      </h3>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
      {tiers.map((tier: any) => (
        <div class={`p-10 border ${tier.popular ? 'border-[var(--accent)]' : 'border-[var(--border)]'} rounded-[var(--radius)] bg-[var(--bg-card)] flex flex-col relative`}>
          {tier.popular && (
            <div class="absolute -top-4 left-1/2 -translate-x-1/2 bg-[var(--accent)] text-black px-4 py-1 text-[10px] font-black uppercase tracking-widest rounded-full">
              Most Popular
            </div>
          )}
          <h4 class="text-2xl font-black uppercase tracking-tighter mb-2">{tier.name}</h4>
          <div class="text-4xl font-black text-[var(--accent)] mb-6">{tier.price}</div>
          <p class="text-[var(--text-secondary)] text-sm mb-8 min-h-[3rem]">{tier.description}</p>
          
          <ul class="space-y-4 mb-10 flex-grow">
            {tier.features.map((feat: string) => (
              <li class="text-xs uppercase tracking-wide flex items-center">
                <span class="w-1.5 h-1.5 bg-[var(--accent)] rounded-full mr-3"></span>
                {feat}
              </li>
            ))}
          </ul>

          <a href="#contact" class={`text-center py-4 rounded-[var(--radius)] font-bold uppercase text-[10px] tracking-widest transition-all ${tier.popular ? 'bg-[var(--accent)] text-black hover:scale-105' : 'border border-[var(--border)] text-[var(--text-primary)] hover:bg-[var(--border)]'}`}>
            Select Plan
          </a>
        </div>
      ))}
    </div>
  </div>
</section>
</file>

<file path="src/components/Gallery.astro">
---
import { Image } from 'astro:assets';
const { gallery, brand } = Astro.props;

// 1. ASSET DISCOVERY
const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/images/*.{jpeg,jpg,png,gif,webp}');

// 2. THE SLUG HANDSHAKE
const brandSlug =
  brand?.slug ||
  (brand?.name || 'brand')
    .toLowerCase()
    .replace(/'/g, '')
    .replace(/[^a-z0-9]/g, '-');

// 3. ELITE MODE GUARD
if (!gallery || !gallery.enabled || !gallery.items || gallery.items.length === 0) return null;

// 4. ELITE MODE OUTPUTS
const items = gallery.items;
const title = gallery.title || 'The Lab';
const layout = gallery.computed_layout || gallery.layout || 'grid';
const showTitles = gallery.show_titles !== false;

// Optional: honor computed_count if provided
const maxItems = typeof gallery.computed_count === 'number' ? gallery.computed_count : items.length;
const visibleItems = items.slice(0, Math.max(0, maxItems));

// Layout class helpers (no Tailwind plugins required)
const wrapperClass =
  layout === 'masonry'
    ? 'columns-1 md:columns-2 gap-8 [column-fill:_balance]'
    : layout === 'bento'
      ? 'grid grid-cols-1 md:grid-cols-6 gap-8'
      : 'grid grid-cols-1 md:grid-cols-2 gap-8';

const cardBase =
  'group relative overflow-hidden rounded-[var(--radius)] bg-[var(--bg-card)] border border-[var(--border)]';

// Bento: a simple pattern that feels designed without needing client decisions
function bentoSpan(i: number) {
  // repeats every 6 items
  const k = i % 6;
  if (k === 0) return 'md:col-span-4 md:row-span-2';
  if (k === 1) return 'md:col-span-2 md:row-span-1';
  if (k === 2) return 'md:col-span-2 md:row-span-1';
  if (k === 3) return 'md:col-span-3 md:row-span-1';
  if (k === 4) return 'md:col-span-3 md:row-span-1';
  return 'md:col-span-6 md:row-span-1';
}

// Height/aspect per layout
function aspectClass(i: number) {
  if (layout === 'bento') {
    // Let spans create variety; keep minimum height stable
    const k = i % 6;
    return k === 0 ? 'min-h-[420px]' : 'min-h-[220px]';
  }
  if (layout === 'masonry') {
    // Vary heights subtly to create masonry feel without needing image metadata
    return i % 3 === 0 ? 'min-h-[360px]' : i % 3 === 1 ? 'min-h-[260px]' : 'min-h-[300px]';
  }
  // grid default
  return 'aspect-video';
}
---

<section id="gallery" class="py-24 bg-[var(--bg-color)]">
  <div class="container mx-auto px-6 mb-12 text-center">
    <h2 class="text-4xl font-black uppercase text-[var(--text-primary)]">
      {title.split(' ').slice(0, -1).join(' ') || title}{' '}
      <span class="text-[var(--accent)]">{title.split(' ').slice(-1)[0]}</span>
    </h2>
  </div>

  <div class={`container mx-auto px-6 ${wrapperClass}`}>
    {visibleItems.map((item: any, index: number) => {
      // Generate filename to match your external pipeline output
      const expectedFilename = `${brandSlug}-project-${index}.jpg`;
      const imagePath = `/src/assets/images/${expectedFilename}`;
      const hasImage = images[imagePath];

      const bentoClass = layout === 'bento' ? bentoSpan(index) : '';
      const sizeClass = aspectClass(index);

      // Masonry needs inline-block + break-inside avoidance
      const masonryCardExtras =
        layout === 'masonry' ? 'mb-8 inline-block w-full break-inside-avoid' : '';

      return (
        <div class={`${layout === 'bento' ? bentoClass : ''} ${masonryCardExtras}`}>
          <div class={`${cardBase} ${sizeClass}`}>
            {hasImage ? (
              <Image
                src={images[imagePath]()}
                alt={item.title || 'Gallery Image'}
                width={1200}
                height={800}
                class="object-cover w-full h-full transition-transform duration-700 group-hover:scale-105"
              />
            ) : (
              <div class="flex flex-col items-center justify-center h-full bg-slate-900 p-4">
                <span class="text-red-500 font-mono text-xs mb-2">Missing: {expectedFilename}</span>
                <span class="text-[10px] text-white/30 uppercase">Check src/assets/images/</span>
              </div>
            )}

            {showTitles && (
              <div class="absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/90 to-transparent">
                <p class="text-white font-bold uppercase tracking-widest text-sm">
                  {item.title}
                </p>
              </div>
            )}
          </div>
        </div>
      );
    })}
  </div>
</section>
</file>

<file path="src/components/Hero.astro">
---
/**
 * COMPONENT: Hero
 * Standards: 2026 Vibe-Engine / Dynamic Asset Discovery
 * Logic: Updated with Strict CTA Enum and "n/a" Fallback Safety
 */
 import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

const { brand, hero, settings } = Astro.props;

// 1. SLUG LOGIC - Must match scripts/setup-site.js exactly
const brandSlug = brand?.slug || 
                 (brand?.name || 'brand')
                    .toLowerCase()
                    .replace(/'/g, '') 
                    .replace(/[^a-z0-9]/g, '-');

// 2. IMAGE DISCOVERY
const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/images/*.{jpeg,jpg,png,gif,webp}');
const expectedFilename = `${brandSlug}-hero.jpg`;
const cleanPath = `/src/assets/images/${expectedFilename}`;
const imageExists = images[cleanPath];

// 3. SAFE CONTENT DEFAULTS
const headline = hero?.headline || brand?.tagline || "Quality at AI Speed";
const subtext = hero?.subtext || "Professional Astro architecture delivered in 24 hours.";

// 4. PRIMARY CTA LOGIC (Safe-Check & Enum Support)
const rawCtaLink = settings?.cta_link || "#contact";
const isCtaDisabled = rawCtaLink.toLowerCase() === 'n/a';

// Fallback to #contact if AI didn't provide a link or set it to 'n/a'
const finalCtaLink = isCtaDisabled ? "#contact" : rawCtaLink;
const finalCtaType = isCtaDisabled ? "anchor" : (settings?.cta_type || "anchor");

const isPrimaryExternal = finalCtaType === 'external' && finalCtaLink.startsWith('http');
const ctaText = settings?.cta_text || "Get Started";

// 5. SECONDARY CTA LOGIC
const hasSecondary = settings?.secondary_cta_text && settings?.secondary_cta_link && settings.secondary_cta_link.toLowerCase() !== 'n/a';
const isSecondaryExternal = settings?.secondary_cta_link?.startsWith('http');
---

<section id="home" class="relative min-h-[90vh] flex items-center justify-center overflow-hidden bg-[var(--bg-color)]">
  
  {/* BACKGROUND LAYER: Dynamic Image or Gradient Fallback */}
  <div class="absolute inset-0 z-0">
    {imageExists ? (
      <Image 
        src={images[cleanPath]()} 
        alt={hero?.image?.alt || brand?.name || "Hero Background"} 
        width={1920} 
        height={1080} 
        class="w-full h-full object-cover opacity-30 md:opacity-40"
        loading="eager"
        fetchpriority="high"
      />
    ) : (
      <div class="w-full h-full opacity-20 bg-[radial-gradient(circle_at_top_right,var(--accent)_0%,transparent_60%)]"></div>
    )}
    <div class="absolute inset-0 bg-gradient-to-b from-[var(--bg-color)]/20 via-[var(--bg-color)]/40 to-[var(--bg-color)]"></div>
  </div>

  {/* CONTENT LAYER */}
  <div class="container relative z-10 px-6 mx-auto text-center">
    
    <div class="flex items-center justify-center gap-3 mb-8">
       <span class="h-[1px] w-4 bg-[var(--accent)]"></span>
       <p class="text-[10px] font-bold tracking-[0.4em] uppercase text-[var(--accent)]">
        {brand?.availability_status || brand?.name || "System Active"}
       </p>
       <span class="h-[1px] w-4 bg-[var(--accent)]"></span>
    </div>
    
    <h1 class="text-5xl sm:text-6xl md:text-7xl lg:text-8xl font-black uppercase tracking-tighter leading-[0.85] text-[var(--text-primary)] mb-8">
        {headline}
    </h1>

    <p class="max-w-2xl mx-auto mb-12 text-lg md:text-xl text-[var(--text-secondary)] leading-relaxed font-medium opacity-80">
      {subtext}
    </p>

    <div class="flex flex-col items-center gap-10">
      <div class="flex flex-col sm:flex-row items-center gap-4">
        {/* PRIMARY CTA - Enhanced with Target/Rel logic */}
        <a 
          href={finalCtaLink} 
          target={isPrimaryExternal ? "_blank" : "_self"}
          rel={isPrimaryExternal ? "noopener noreferrer" : ""}
          class="w-full sm:w-auto bg-[var(--accent)] px-12 py-5 text-[10px] font-black uppercase tracking-[0.2em] transition-all hover:scale-105 active:scale-95 rounded-[var(--radius)] inline-block text-black shadow-xl shadow-[var(--accent)]/10"
        >
          {ctaText}
        </a>

        {/* SECONDARY CTA */}
        {hasSecondary && (
          <a 
            href={settings.secondary_cta_link}
            target={isSecondaryExternal ? "_blank" : "_self"}
            rel={isSecondaryExternal ? "noopener noreferrer" : ""}
            class="w-full sm:w-auto border border-[var(--border)] bg-white/5 backdrop-blur-sm px-12 py-5 text-[10px] font-black uppercase tracking-[0.2em] transition-all hover:bg-[var(--text-primary)] hover:text-[var(--bg-color)] rounded-[var(--radius)] inline-block text-[var(--text-primary)]"
          >
            {settings.secondary_cta_text}
          </a>
        )}
      </div>
      
      {brand?.objection_handle && (
        <span class="text-[10px] uppercase tracking-[0.25em] opacity-50 flex items-center gap-4 text-[var(--text-primary)] font-bold italic">
          {brand.objection_handle}
        </span>
      )}
    </div>
  </div>
</section>
</file>

<file path="src/components/Navbar.astro">
---
/**
 * Navbar Component - Vibe-Engine & Smart CTA Edition (Mobile Drawer Upgrade)
 * Goals:
 * - Cleaner mobile UX (drawer + backdrop, scroll lock, ESC to close, click-outside)
 * - Keep Lighthouse 100/100 friendly (tiny vanilla JS, no deps)
 * - Preserve existing props + active-section observer
 */
 const { brand, menu, settings } = Astro.props;

// Pull CTA data from settings
const cta_text = settings?.cta_text;
const cta_link = settings?.cta_link;

// Helper to determine if CTA is external URL
const isExternal = !!cta_link && (cta_link.startsWith("http://") || cta_link.startsWith("https://"));

// Brand display (supports your newer brand.logo object, but falls back safely)
const brandText =
  brand?.logo?.text ||
  brand?.logo_text ||
  brand?.name ||
  "Agency";
---

<nav class="sticky top-0 z-[100] w-full border-b border-[var(--border)] bg-[var(--bg-color)]/80 backdrop-blur-md transition-all duration-300">
  <div class="container mx-auto px-6 py-4 flex items-center justify-between relative z-[120]">
    {/* BRAND */}
    <a href="#top" class="text-xl font-black uppercase tracking-tighter text-[var(--text-primary)] hover:opacity-70 transition-opacity">
      {brandText}
    </a>

    {/* MOBILE TOGGLE */}
    <button
      id="menu-toggle"
      class="md:hidden text-[var(--text-primary)] relative z-[130] p-2 focus:outline-none"
      aria-label="Toggle Menu"
      aria-controls="mobile-menu"
      aria-expanded="false"
      type="button"
    >
      <svg id="menu-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path id="menu-path" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16" />
      </svg>
    </button>

    {/* DESKTOP NAV */}
    <div class="hidden md:flex items-center gap-8">
      {menu && menu.map((item: any) => (
        <a
          href={item.path}
          class="nav-link text-[10px] font-bold uppercase tracking-widest text-[var(--text-secondary)] hover:text-[var(--accent)] transition-colors"
        >
          {item.label}
        </a>
      ))}

      {/* CTA */}
      {cta_text && (
        <a
          href={cta_link || "#contact"}
          target={isExternal ? "_blank" : "_self"}
          rel={isExternal ? "noopener noreferrer" : undefined}
          class="px-6 py-2 text-[10px] font-bold uppercase tracking-[0.2em] border border-[var(--accent)] text-[var(--accent)] hover:bg-[var(--accent)] hover:text-[var(--bg-color)] transition-all rounded-[var(--radius)]"
        >
          {cta_text}
        </a>
      )}
    </div>
  </div>

  {/* MOBILE BACKDROP (click to close) */}
  <div
    id="mobile-backdrop"
    class="fixed inset-0 bg-black/50 opacity-0 pointer-events-none transition-opacity duration-200 md:hidden"
    aria-hidden="true"
  ></div>

  {/* MOBILE DRAWER */}
  <aside
    id="mobile-menu"
    class="fixed top-0 right-0 h-screen w-[86%] max-w-sm bg-[var(--bg-color)] border-l border-[var(--border)]
           translate-x-full opacity-100 transition-transform duration-200 md:hidden z-[120]
           motion-reduce:transition-none"
    role="dialog"
    aria-modal="true"
    aria-label="Mobile navigation"
  >
    {/* Drawer header */}
    <div class="px-6 py-5 flex items-center justify-between border-b border-[var(--border)]">
      <div class="text-sm font-black uppercase tracking-widest text-[var(--text-primary)]">
        Menu
      </div>

      <button
        id="menu-close"
        type="button"
        class="p-2 rounded-[var(--radius)] border border-[var(--border)] text-[var(--text-primary)] hover:border-[var(--accent)] transition-colors"
        aria-label="Close Menu"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    {/* Drawer links */}
    <div class="px-6 py-6">
      <div class="flex flex-col">
        {menu && menu.map((item: any) => (
          <a
            href={item.path}
            class="mobile-link py-4 text-base font-black uppercase tracking-[0.25em] text-[var(--text-primary)]
                   border-b border-[var(--border)] last:border-0 hover:text-[var(--accent)] transition-colors"
          >
            {item.label}
          </a>
        ))}
      </div>

      {/* Drawer CTA */}
      {cta_text && (
        <div class="mt-8">
          <a
            href={cta_link || "#contact"}
            target={isExternal ? "_blank" : "_self"}
            rel={isExternal ? "noopener noreferrer" : undefined}
            class="mobile-link inline-flex w-full items-center justify-center px-8 py-4 bg-[var(--accent)] text-black
                   text-[10px] font-black uppercase tracking-[0.35em] rounded-[var(--radius)] shadow-lg
                   active:scale-95 transition-transform motion-reduce:transition-none"
          >
            {cta_text}
          </a>
          <p class="mt-3 text-[10px] uppercase tracking-widest text-[var(--text-secondary)] opacity-70 text-center">
            Tap a link to close
          </p>
        </div>
      )}
    </div>
  </aside>
</nav>

<script>
  const btn = document.getElementById('menu-toggle');
  const closeBtn = document.getElementById('menu-close');
  const drawer = document.getElementById('mobile-menu');
  const backdrop = document.getElementById('mobile-backdrop');
  const iconPath = document.getElementById('menu-path');
  const links = document.querySelectorAll('.mobile-link');
  const navLinks = document.querySelectorAll('.nav-link');

  function openMenu() {
    drawer?.classList.remove('translate-x-full');
    backdrop?.classList.remove('pointer-events-none');
    backdrop?.classList.add('opacity-100');
    backdrop?.classList.remove('opacity-0');
    document.body.style.overflow = 'hidden';
    btn?.setAttribute('aria-expanded', 'true');
    iconPath?.setAttribute('d', 'M6 18L18 6M6 6l12 12');
  }

  function closeMenu() {
    drawer?.classList.add('translate-x-full');
    backdrop?.classList.add('pointer-events-none');
    backdrop?.classList.add('opacity-0');
    backdrop?.classList.remove('opacity-100');
    document.body.style.overflow = '';
    btn?.setAttribute('aria-expanded', 'false');
    iconPath?.setAttribute('d', 'M4 8h16M4 16h16');
  }

  function toggleMenu() {
    const isClosed = drawer?.classList.contains('translate-x-full');
    if (isClosed) openMenu();
    else closeMenu();
  }

  btn?.addEventListener('click', toggleMenu);
  closeBtn?.addEventListener('click', closeMenu);
  backdrop?.addEventListener('click', closeMenu);
  links.forEach(link => link.addEventListener('click', closeMenu));

  // ESC to close
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeMenu();
  });

  // Active Section Observer (desktop link highlighting)
  const observerOptions = {
    root: null,
    rootMargin: '-20% 0px -70% 0px',
    threshold: 0
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const id = entry.target.getAttribute('id');
        navLinks.forEach(link => {
          if (link.getAttribute('href') === `#${id}`) {
            link.classList.add('text-[var(--accent)]');
            link.classList.remove('text-[var(--text-secondary)]');
          } else {
            link.classList.remove('text-[var(--accent)]');
            link.classList.add('text-[var(--text-secondary)]');
          }
        });
      }
    });
  }, observerOptions);

  document.querySelectorAll('section[id]').forEach((section) => observer.observe(section));
</script>
</file>

<file path="src/layouts/Layout.astro">
---
/**
 * Main Layout - 2026 High-Performance Vibe Engine
 * Strategy: Hybrid (CSS Structure + JS Variable Injection)
 * Goal: Custom Agency Quality at AI Speed
 */
 import data from '../data/business.json';
 import Footer from '../components/Footer.astro';
import '../styles/vibe-system.css';

interface Props {
    title?: string;
    vibeOverride?: string;
}

const { title, vibeOverride } = Astro.props;

// 1. VIBE NORMALIZATION (Maintains your established slug system)
const rawVibe = vibeOverride || data.settings?.vibe || 'midnight-tech';
const activeVibe = rawVibe.toLowerCase().replace(/\s+/g, '-');

// 2. THE VIBE LIBRARY (Agency-Grade Presets)
const vibeLibrary = {
  'midnight-tech': {
    accent: '#00f2ff',      // Neon Cyan
    bg: '#020617',          // Deep Space Navy
    text: '#f8fafc',        // Ghost White
    radius: '4px',
    font: "'JetBrains Mono', monospace"
  },
  'zenith-earth': {
    accent: '#10b981',      // Emerald Green
    bg: '#f0fdf4',          // Mint Cream
    text: '#064e3b',        // Deep Forest
    radius: '24px',
    font: "'Outfit', sans-serif"
  },
  'vintage-boutique': {
    accent: '#b45309',      // Polished Gold
    bg: '#fffbeb',          // Warm Ivory
    text: '#451a03',        // Espresso
    radius: '12px',
    font: "'Cormorant Garamond', serif"
  },
  'rugged-industrial': {
    accent: '#f97316',      // Safety Orange
    bg: '#000000',          // Pure Black
    text: '#ffffff',
    radius: '0px',
    font: "'Inter', sans-serif"
  },
  'modern-minimal': {
    accent: '#6366f1',      // Indigo
    bg: '#ffffff',          // Pure White
    text: '#1e293b',        // Slate
    radius: '8px',
    font: "'Inter', sans-serif"
  },
  'luxury-noir': {
    accent: '#D4AF37',      // Metallic Gold
    bg: '#050505',          // Pure Rich Black
    text: '#ffffff',        // White
    radius: '2px',          // Sharp, premium edges
    font: "'Cormorant Garamond', serif"
  },
  'legacy-professional': {
    accent: '#1e40af',      // Trust Blue (Deep Navy)
    bg: '#ffffff',          // Pure White
    text: '#0f172a',        // Slate 900
    radius: '6px',          // Professional, stable rounding
    font: "'Inter', sans-serif"
  },
  'solar-flare': {
    accent: '#fbbf24',      // Amber/Electric Yellow
    bg: '#0f172a',          // Dark Slate (High contrast for energy)
    text: '#f8fafc',        // Off-white
    radius: '16px',         // Friendly, high-energy rounding
    font: "'Outfit', sans-serif"
  }
};

const config = vibeLibrary[activeVibe] || vibeLibrary['midnight-tech'];

const { brand, settings, contact, intelligence } = data;

// 3. SEO & SCHEMA (Untouched to prevent breaking your metadata)
const seoTitle = title || `${data.brand.name} | ${data.brand.tagline}`;
const ldJson = {
  "@context": "https://schema.org",
  "@type": data.intelligence?.industry?.includes('Music') ? "EventVenue" : "LocalBusiness",
  "name": data.brand.name,
  "description": data.brand.tagline,
  "image": `/images/${data.hero?.image?.src}`
};
---

<!doctype html>
<html lang="en" data-vibe={activeVibe}>
    <head>
        <meta charset="UTF-8" />
        <meta name="description" content={data.brand.objection_handle} />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <title>{seoTitle}</title>

        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link 
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=JetBrains+Mono:wght@400;800&family=Cormorant+Garamond:ital,wght@0,400;0,700;1,700&family=Outfit:wght@400;900&display=swap" 
            rel="stylesheet" 
        />

        <script type="application/ld+json" set:html={JSON.stringify(ldJson)} />

        <style define:vars={{ 
            'v-accent': config.accent,
            'v-bg': config.bg,
            'v-text': config.text,
            'v-radius': config.radius,
            'v-font': config.font
        }}>
            :root {
                --accent: var(--v-accent);
                --bg-color: var(--v-bg);
                --text-primary: var(--v-text);
                --radius: var(--v-radius);
                --font-main: var(--v-font);
                
                /* Computed variables: 90/10 mix removes the "Gray" feeling */
                --bg-card: color-mix(in srgb, var(--bg-color) 90%, var(--accent));
                --border: color-mix(in srgb, var(--accent) 25%, transparent);
                --text-secondary: color-mix(in srgb, var(--text-primary) 70%, transparent);
            }
        </style>
    </head>
    <body class="bg-[var(--bg-color)] text-[var(--text-primary)] font-[var(--font-main)] transition-colors duration-500 selection:bg-[var(--accent)] selection:text-[var(--bg-color)]">
        <slot />

        {/* GLOBAL FOOTER EXECUTION */}
        <Footer 
            brand={brand} 
            settings={settings} 
            contact={contact} 
            intelligence={intelligence} 
        />
        
        <style is:global>
            html { scroll-behavior: smooth; }
            
            /* Global Font Override to ensure the Vibe Library font wins */
            body { font-family: var(--font-main) !important; }

            /* Professional Agency Heading Style */
            h1, h2, h3, h4, .brand-heading {
                font-weight: 900;
                letter-spacing: -0.04em;
                text-transform: uppercase;
                line-height: 0.9;
            }

            /* Fix for images to ensure they match the vibe's radius */
            img, .vibe-container {
                border-radius: var(--radius);
            }
        </style>
    </body>
</html>
</file>

<file path="src/styles/vibe-system.css">
@tailwind base;
@tailwind components;
@tailwind utilities;

/* --- GLOBAL STRUCTURE --- */
html { scroll-behavior: smooth; }
body {
  background-color: var(--bg-color);
  color: var(--text-primary);
  font-family: var(--font-main, sans-serif);
  transition: background-color 0.4s ease;
}

/* --- VIBE PERSONALITY (Structure only, no colors) --- */
[data-vibe="vintage-boutique"] h1, 
[data-vibe="vintage-boutique"] h2 { 
  font-style: italic; 
  font-weight: 300; 
  text-transform: none; 
}

[data-vibe="midnight-tech"] h1 { 
  font-weight: 900; 
  letter-spacing: -0.05em; 
}

[data-vibe="rugged-industrial"] {
  text-transform: uppercase; /* Industrial feels "heavy" */
}

/* Legacy Professional: Balanced & Trustworthy */
[data-vibe="legacy-professional"] h1 {
  font-weight: 700;
  letter-spacing: -0.02em;
  text-transform: none; /* Keep it formal */
}

/* Solar Flare: Bold & Disruptive */
[data-vibe="solar-flare"] h1 {
  font-weight: 900;
  text-transform: uppercase;
  letter-spacing: -0.05em;
  font-style: italic; /* Adds movement */
}

/* --- UTILITY RECOVERY --- */
.bg-card { background-color: var(--bg-card); border: 1px solid var(--border); }
.border-vibe { border-color: var(--border); }

/* Automated CTA Contrast Logic */
.cta-button {
  background-color: var(--accent);
  border-radius: var(--radius);
  /* Use CSS to determine text color based on background lightness */
  color: canvasText; 
  filter: contrast(150%);
}
</file>

<file path="src/pages/index.astro">
---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import Hero from '../components/Hero.astro';
import Trustbar from '../components/TrustBar.astro'; // ‚úÖ ADD
import Events from '../components/Events.astro';
import BentoAbout from '../components/BentoAbout.astro';
import Features from '../components/Features.astro';
import Process from '../components/Process.astro';
import Testimonials from '../components/Testimonials.astro';
import Comparison from '../components/Comparison.astro';
import Gallery from '../components/Gallery.astro';
import Investment from '../components/Investment.astro';
import FAQ from '../components/FAQ.astro';
import Contact from '../components/Contact.astro';
import ServiceArea from '../components/ServiceArea.astro';

import data from '../data/business.json';

const {
  intelligence = {},
  strategy = {},
  settings = {},
  brand = {},
  about = {},
  hero = {},
  trustbar = null,          // ‚úÖ ADD (optional, but clean)
  events = [],
  features = [],
  processSteps = [],
  testimonials = [],
  comparison = null,
  gallery = null,
  investment = [],
  faqs = [],
  service_area = [],
  contact = {}
} = data;

const navMenu = settings.menu || [];
const siteTitle = brand.name ? `${brand.name} | ${brand.tagline || 'Professional Services'}` : "Vibe-Engine Production";
---

<Layout title={siteTitle} settings={settings}>
  <Navbar brand={brand} menu={navMenu} settings={settings} />

  <main>
    {/* 1. HERO SECTION */}
    <Hero hero={hero} brand={brand} settings={settings} />

    {/* 1.25 TRUSTBAR (best conversion placement: immediately under hero) */}
    {strategy.show_trustbar && trustbar?.enabled && trustbar?.items?.length > 0 && (
      <Trustbar data={trustbar} />
    )}

    {/* 1.5 THE BENTO ABOUT */}
    {strategy.show_about !== false && (brand.name || about.story_text) && (
      <BentoAbout brand={brand} about={about} intelligence={intelligence} />
    )}

    {/* 2. FEATURES / SERVICES */}
    {strategy.show_features && features.length > 0 && (
      <Features features={features} intelligence={intelligence} />
    )}

    {/* 2.5 EVENTS / CLASSES */}
    {strategy.show_events && events.length > 0 && (
      <Events events={events} />
)}


    {/* 3. METHODOLOGY / PROCESS */}
    {strategy.show_process && processSteps.length > 0 && (
      <Process steps={processSteps} intelligence={intelligence} />
    )}

    {/* 4. SOCIAL PROOF */}
    {strategy.show_testimonials && testimonials.length > 0 && (
      <Testimonials testimonials={testimonials} />
    )}

    {/* 5. VALUE COMPARISON */}
    {strategy.show_comparison && comparison && (
      <Comparison comparison={comparison} intelligence={intelligence} />
    )}

    {/* 6. PORTFOLIO / GALLERY */}
    {strategy.show_gallery && gallery?.enabled !== false && gallery?.items?.length > 0 && (
      <Gallery gallery={gallery} brand={brand} />
    )}

    {/* 7. PRICING / INVESTMENT */}
    {strategy.show_investment && investment.length > 0 && (
      <Investment tiers={investment} brand={brand} />
    )}

    {/* 8. OBJECTION HANDLING */}
    {strategy.show_faqs && faqs.length > 0 && <FAQ faqs={faqs} />}

    {/* 8.5 SERVICE AREA */}
    {strategy.show_service_area && data.service_area && (
      <ServiceArea service_area={data.service_area} intelligence={intelligence} />
    )}

    {/* 9. FINAL CONVERSION */}
    <Contact contact={contact} intelligence={intelligence} brand={brand} settings={settings} />
  </main>
</Layout>
</file>

<file path="src/data/business.json">
{
  "intelligence": {
    "industry": "Creative portfolio (brand & web designer)",
    "target_persona": "Founders, agencies, and small business owners who want a premium brand and website that looks modern and converts without feeling salesy",
    "tone_of_voice": "Confident, modern, concise, tasteful"
  },
  "strategy": {
    "show_trustbar": true,
    "show_about": true,
    "show_features": true,
    "show_process": true,
    "show_testimonials": true,
    "show_comparison": false,
    "show_gallery": true,
    "show_investment": false,
    "show_faqs": true,
    "show_service_area": false
  },
  "settings": {
    "vibe": "Solar Flare",
    "cta_text": "Request a Project Quote",
    "cta_link": "#contact",
    "cta_type": "anchor",
    "secondary_cta_text": "View Work",
    "secondary_cta_link": "#gallery",
    "menu": [
      { "label": "Home", "path": "#home" },
      { "label": "About", "path": "#about" },
      { "label": "Services", "path": "#features" },
      { "label": "Process", "path": "#process" },
      { "label": "Reviews", "path": "#testimonials" },
      { "label": "Work", "path": "#gallery" },
      { "label": "FAQs", "path": "#faqs" },
      { "label": "Contact", "path": "#contact" }
    ]
  },
  "brand": {
    "name": "Nova Lane Studio",
    "slug": "nova-lane-studio",
    "tagline": "Brand & web design that feels expensive.",
    "email": "hello@novalanestudio.com",
    "phone": "215-555-0147",
    "objection_handle": "If you want your site to feel premium, it has to be clear, fast, and intentional. I build clean systems that look great and make it easy for people to say yes."
  },
  "hero": {
    "headline": "Design that makes your work look premium",
    "subtext": "Brand identity, web design, and visual systems for founders who want clarity, confidence, and a website that converts without the cringe.",
    "image": {
      "alt": "Designer workspace with modern portfolio materials",
      "image_search_query": "designer portfolio workspace modern"
    }
  },
  "trustbar": {
    "enabled": true,
    "headline": "High-end results, without the agency overhead",
    "items": [
      { "icon": "sparkles", "label": "Premium aesthetic", "sublabel": "Clean, modern, confident" },
      { "icon": "layers", "label": "Systemized design", "sublabel": "Consistent across pages" },
      { "icon": "rocket", "label": "Fast delivery", "sublabel": "Clear milestones + pace" },
      { "icon": "check", "label": "Conversion-first", "sublabel": "Designed to drive action" }
    ]
  },
  "about": {
    "story_text": "Nova Lane Studio helps founders and small teams turn ‚Äúgood‚Äù into ‚Äúpremium.‚Äù The work is minimal but intentional‚Äîstrong typography, clear hierarchy, and visual systems that scale. The goal isn‚Äôt decoration. It‚Äôs clarity that builds trust and makes the next step obvious.",
    "founder_note": "I like simple sites that feel expensive: fast, focused, and easy to navigate. If you‚Äôre building something real, your website should reflect that.",
    "years_experience": "8"
  },
  "features": [
    {
      "title": "Brand Identity Refresh",
      "description": "Refine your logo, typography, and visual direction into a cohesive brand that looks polished everywhere.",
      "icon_slug": "sparkles"
    },
    {
      "title": "High-Converting Website Design",
      "description": "A clean, modern layout with strong messaging and clear CTAs‚Äîbuilt for speed, trust, and action.",
      "icon_slug": "rocket"
    },
    {
      "title": "Visual System + Templates",
      "description": "Reusable design components for social, pitch decks, and future pages‚Äîso your brand stays consistent.",
      "icon_slug": "layers"
    }
  ],
  "processSteps": [
    {
      "title": "Quick discovery",
      "description": "You share your goals, audience, and references. I confirm scope and define the visual direction."
    },
    {
      "title": "Messaging + structure",
      "description": "We shape the content hierarchy: what matters first, what supports it, and what drives action."
    },
    {
      "title": "Design + refinement",
      "description": "I design the key sections and polish the system. You get a clean preview and focused revisions."
    },
    {
      "title": "Launch-ready handoff",
      "description": "You receive a deployment-ready site build plus a simple path for future updates."
    }
  ],
  "testimonials": [
    {
      "quote": "The site instantly felt more premium. Clean, fast, and the messaging finally makes sense.",
      "author": "Jordan M.",
      "role": "Founder"
    },
    {
      "quote": "The process was structured and easy. Every decision had a purpose‚Äîand the final look is exactly what we wanted.",
      "author": "Alyssa K.",
      "role": "Studio owner"
    },
    {
      "quote": "This looks like an agency build, but we got it done quickly and with zero fluff.",
      "author": "Devon R.",
      "role": "Consultant"
    }
  ],
  "gallery": {
    "enabled": true,
    "title": "Selected work",
    "layout": null,
    "show_titles": true,
    "image_source": {
      "provider": "unsplash",
      "image_search_query": "branding mockup minimal modern",
      "filename_pattern": "nova-lane-studio-project-{i}.jpg",
      "target_folder": "public/images"
    },
    "computed_count": 8,
    "computed_layout": "masonry",
    "items": [
      { "title": "Brand identity system", "caption": "Typography + color direction", "tag": "Branding", "image_search_query": "branding identity mockup minimal" },
      { "title": "Homepage redesign", "caption": "Clear hierarchy + strong CTA", "tag": "Web", "image_search_query": "website mockup laptop minimal" },
      { "title": "Product landing page", "caption": "Premium feel, simple structure", "tag": "Web", "image_search_query": "landing page design mockup" },
      { "title": "Logo exploration", "caption": "Clean marks + variations", "tag": "Branding", "image_search_query": "logo design sketches minimal" },
      { "title": "Pitch deck templates", "caption": "Reusable slides + layout system", "tag": "Templates", "image_search_query": "presentation template minimal mockup" },
      { "title": "Social kit", "caption": "Consistent posts + stories", "tag": "Templates", "image_search_query": "social media template minimal" },
      { "title": "Packaging direction", "caption": "Modern product presentation", "tag": "Branding", "image_search_query": "packaging mockup minimal modern" },
      { "title": "Case study layout", "caption": "Story-driven project page", "tag": "Web", "image_search_query": "case study web design layout" }
    ]
  },
  "faqs": [
    {
      "question": "Do you work with clients outside my city?",
      "answer": "Yes. Most projects are remote and run smoothly with a structured process and clear milestones."
    },
    {
      "question": "What do you need from me to start?",
      "answer": "A short description of your business, your audience, and a few examples of sites you like. If you don‚Äôt have them, I‚Äôll infer a strong starting direction."
    },
    {
      "question": "How many revisions are included?",
      "answer": "You‚Äôll get focused refinement rounds on the core sections. The goal is clarity and polish‚Äîwithout endless back-and-forth."
    },
    {
      "question": "Can you match an existing brand?",
      "answer": "Yes. I can align with your current style, or refine it into a more consistent, premium system."
    },
    {
      "question": "What if I don‚Äôt have photos yet?",
      "answer": "No problem. We can start with clean placeholders and swap in your images later without breaking the layout."
    }
  ],
  "contact": {
    "headline": "Let‚Äôs build something premium",
    "subheadline": "Tell me what you do, who it‚Äôs for, and what ‚Äúsuccess‚Äù looks like. I‚Äôll reply with the best next step and a simple plan.",
    "email": "hello@novalanestudio.com",
    "phone": "215-555-0147",
    "email_recipient": "hello@novalanestudio.com",
    "button_text": "Request a Quote",
    "office_address": ""
  }
}
</file>

</files>
